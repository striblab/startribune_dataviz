!function e(t,n,a){function r(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var E=n[i]={exports:{}};t[i][0].call(E.exports,function(e){var n=t[i][1][e];return r(n?n:e)},E,E.exports,e,t,n,a)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(e,t,n){$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null!=t?t[1]||0:null};var a=$.urlParam("chart");null!=a&&($(".slide").hide(),$("#"+a).show()),"growth"==a&&d3.json("./shapefiles/metro_cities.json",function(e,t){d3.json("./shapefiles/metro_tracts.json",function(e,n){d3.json("./shapefiles/metro_tracts_1970.json",function(e,a){d3.json("./data/metro_populations.json",function(e,r){d3.json("./data/metro_demographics.json",function(e,o){d3.json("./data/metro_land_use.json",function(e,i){d3.json("./data/counties_populations.json",function(e,s){d3.json("./data/counties_demographics.json",function(e,l){d3.json("./data/counties_land_use.json",function(e,E){d3.json("./data/all_populations.json",function(e,A){d3.json("./data/all_demographics.json",function(e,d){d3.json("./data/all_land_use.json",function(e,C){function c(e,t,n,a,r){d3.select(e).selectAll(".row").sort(function(e,t){if("name"==a){if("descend"==r)return d3.descending(e.CTU_NAME,t.CTU_NAME);if("ascend"==r)return d3.ascending(e.CTU_NAME,t.CTU_NAME)}if("index"==a){if("descend"==r)return d3.descending(e.COMMUNITY_DESIGNATION,t.COMMUNITY_DESIGNATION);if("ascend"==r)return d3.ascending(e.COMMUNITY_DESIGNATION,t.COMMUNITY_DESIGNATION)}}).transition().duration(500)}function u(e,t,n,a){if("city"==a){if("population"==n){var r=R.filter(function(t){return t.CTU_NAME==e&&"ACS 2008-2010"!=t.DATASOURCE&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),o=["Population",0,0,0,0,0,0],i=[];i[0]="x";for(var s=0;s<r.length;s++)o[s+1]=r[s].POPULATION,i[s+1]=r[s].YEAR;var l=(o[1]-o[o.length-1])/o[o.length-1];if($("#populationChange").removeClass("pos"),$("#populationChange").removeClass("neg"),l<0?$("#populationChange").addClass("neg"):l>0&&$("#populationChange").addClass("pos"),isFinite(l)?$("#populationChange").html(d3.format("+%")(l)):$("#populationChange").html("--"),"population"==t)return o;if("years"==t)return i}if("income"==n){var E=h.filter(function(t){return t.CTU_NAME==e&&"MEDIANHHINC"==t.SUBJECT_LEVEL&&"ACS 2008-2010"!=t.DATASOURCE&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),A=["Income",0,0,0,0],d=[];d[0]="x";for(var s=0;s<E.length;s++)A[s+1]=E[s].MEASURE,d[s+1]=E[s].YEAR;var l=(A[A.length-2]-A[1])/A[1];if($("#incomeChange").removeClass("pos"),$("#incomeChange").removeClass("neg"),l<0?$("#incomeChange").addClass("neg"):l>0&&$("#incomeChange").addClass("pos"),isFinite(l)?$("#incomeChange").html(d3.format("+%")(l)):$("#incomeChange").html("--"),"income"==t)return A;if("years"==t)return d}if("poverty"==n){var C=h.filter(function(t){return t.CTU_NAME==e&&"POV100RATE"==t.SUBJECT_LEVEL&&"ACS 2008-2010"!=t.DATASOURCE&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),c=["Poverty",0,0,0,0],u=[];u[0]="x";for(var s=0;s<C.length;s++)c[s+1]=C[s].MEASURE,u[s+1]=C[s].YEAR;var l=c[C.length]-c[1];if($("#povertyChange").removeClass("pos"),$("#povertyChange").removeClass("neg"),l<0?$("#povertyChange").addClass("neg"):l>0&&$("#povertyChange").addClass("pos"),isFinite(l)?$("#povertyChange").html(d3.format("+%")(l)):$("#povertyChange").html("--"),"poverty"==t)return c;if("years"==t)return u}if("degrees"==n){var D=h.filter(function(t){return t.CTU_NAME==e&&"BACHELORS"==t.SUBJECT_LEVEL&&"ACS 2008-2010"!=t.DATASOURCE&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),_=["Degrees",0,0,0,0],U=[];U[0]="x";for(var s=0;s<D.length;s++)_[s+1]=D[s].MEASURE/D[s].DENOMINATOR,U[s+1]=D[s].YEAR;var l=_[D.length]-_[1];if($("#degreesChange").removeClass("pos"),$("#degreesChange").removeClass("neg"),l<0?$("#degreesChange").addClass("neg"):l>0&&$("#degreesChange").addClass("pos"),isFinite(l)?$("#degreesChange").html(d3.format("+%")(l)):$("#degreesChange").html("--"),"degrees"==t)return _;if("years"==t)return U}if("race"==n){var T=h.filter(function(t){return!(t.CTU_NAME!=e||"WHITENH"!=t.SUBJECT_LEVEL||"ACS 2011-2015"!=t.DATASOURCE&&"Census 2010"!=t.DATASOURCE&&"Census 2000"!=t.DATASOURCE&&"Census 1990"!=t.DATASOURCE||1970!=t.YEAR&&1980!=t.YEAR&&1990!=t.YEAR&&2e3!=t.YEAR&&2010!=t.YEAR&&2015!=t.YEAR)}),O=["Minorities",0,0,0,0],v=[];v[0]="x";for(var s=0;s<T.length;s++)O[s+1]=1-T[s].MEASURE/T[s].DENOMINATOR,v[s+1]=T[s].YEAR;var l=O[T.length]-O[1];if($("#raceChange").removeClass("pos"),$("#raceChange").removeClass("neg"),l<0?$("#raceChange").addClass("neg"):l>0&&$("#raceChange").addClass("pos"),isFinite(l)?$("#raceChange").html(d3.format("+%")(l)):$("#raceChange").html("--"),"race"==t)return O;if("years"==t)return v}if("land"==n){for(var L=f.filter(function(t){return t.CTU_NAME==e&&"Non-Urbanized"!=t.LAND_USE_DESCRIPTION&&"Institutional and Recreation"!=t.LAND_USE_DESCRIPTION&&"Open Water Bodies"!=t.LAND_USE_DESCRIPTION&&"Parks & Recreation Areas"!=t.LAND_USE_DESCRIPTION&&"Vacant/Agricultural"!=t.LAND_USE_DESCRIPTION&&"Industrial Parks not Developed"!=t.LAND_USE_DESCRIPTION&&"Public & Semi-Public Vacant"!=t.LAND_USE_DESCRIPTION&&"Agriculture"!=t.LAND_USE_DESCRIPTION&&"Park, Recreational or Preserve"!=t.LAND_USE_DESCRIPTION&&"Golf Course"!=t.LAND_USE_DESCRIPTION&&"Undeveloped Land"!=t.LAND_USE_DESCRIPTION&&"Open Water"!=t.LAND_USE_DESCRIPTION}),P=["Developed Acres",0,0,0,0,0],Y=["x",1970,1980,1990,2e3,2010],y=1,s=1970;s<2020;s+=10){for(var M=0;M<L.length;M++)L[M].YEAR==s&&(P[y]+=Number(L[M].ACRES));y++}var l=(P[P.length-1]-P[1])/P[1];if($("#landChange").removeClass("pos"),$("#landChange").removeClass("neg"),l<0?$("#landChange").addClass("neg"):l>0&&$("#landChange").addClass("pos"),isFinite(l)?$("#landChange").html(d3.format("+%")(l)):$("#landChange").html("--"),"land"==t)return P;if("years"==t)return Y}}else if("county"==a){if("population"==n){var r=g.filter(function(t){return t.CO_NAME==e&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),o=[],i=[];o[0]="Population",i[0]="x";for(var s=0;s<r.length;s++)o[s+1]=r[s].POPULATION,i[s+1]=r[s].YEAR;var l=(o[r.length]-o[1])/o[1];if($("#populationChange").removeClass("pos"),$("#populationChange").removeClass("neg"),l<0?$("#populationChange").addClass("neg"):l>0&&$("#populationChange").addClass("pos"),isFinite(l)?$("#populationChange").html(d3.format("+%")(l)):$("#populationChange").html("--"),"population"==t)return o;if("years"==t)return i}if("income"==n){var E=m.filter(function(t){return!(t.CTU_NAME!=e||"MEDIANHHINC"!=t.SUBJECT_LEVEL||"ACS 2011-2015"!=t.DATASOURCE&&"Census 2010"!=t.DATASOURCE&&"Census 2000"!=t.DATASOURCE&&"Census 1990"!=t.DATASOURCE||1970!=t.YEAR&&1980!=t.YEAR&&1990!=t.YEAR&&2e3!=t.YEAR&&2010!=t.YEAR&&2015!=t.YEAR)}),A=[],d=[];A[0]="Income",d[0]="x";for(var s=0;s<E.length;s++)A[s+1]=E[s].MEASURE,d[s+1]=E[s].YEAR;console.log(A);var l=(A[E.length]-A[1])/A[1];if($("#incomeChange").removeClass("pos"),$("#incomeChange").removeClass("neg"),l<0?$("#incomeChange").addClass("neg"):l>0&&$("#incomeChange").addClass("pos"),isFinite(l)?$("#incomeChange").html(d3.format("+%")(l)):$("#incomeChange").html("--"),"income"==t)return A;if("years"==t)return d}if("poverty"==n){var C=m.filter(function(t){return!(t.CTU_NAME!=e||"POV100RATE"!=t.SUBJECT_LEVEL||"ACS 2011-2015"!=t.DATASOURCE&&"Census 2010"!=t.DATASOURCE&&"Census 2000"!=t.DATASOURCE&&"Census 1990"!=t.DATASOURCE||1970!=t.YEAR&&1980!=t.YEAR&&1990!=t.YEAR&&2e3!=t.YEAR&&2010!=t.YEAR&&2015!=t.YEAR)}),c=[],u=[];c[0]="Poverty",u[0]="x";for(var s=0;s<C.length;s++)c[s+1]=C[s].MEASURE,u[s+1]=C[s].YEAR;var l=c[C.length]-c[1];if($("#povertyChange").removeClass("pos"),$("#povertyChange").removeClass("neg"),l<0?$("#povertyChange").addClass("neg"):l>0&&$("#povertyChange").addClass("pos"),isFinite(l)?$("#povertyChange").html(d3.format("+%")(l)):$("#povertyChange").html("--"),"poverty"==t)return c;if("years"==t)return u}if("degrees"==n){var D=m.filter(function(t){return!(t.CTU_NAME!=e||"BACHELORS"!=t.SUBJECT_LEVEL||"ACS 2011-2015"!=t.DATASOURCE&&"Census 2010"!=t.DATASOURCE&&"Census 2000"!=t.DATASOURCE&&"Census 1990"!=t.DATASOURCE||1970!=t.YEAR&&1980!=t.YEAR&&1990!=t.YEAR&&2e3!=t.YEAR&&2010!=t.YEAR&&2015!=t.YEAR)}),_=[],U=[];_[0]="Degrees",U[0]="x";for(var s=0;s<D.length;s++)_[s+1]=D[s].MEASURE/D[s].DENOMINATOR,U[s+1]=D[s].YEAR;var l=_[D.length]-_[1];if($("#degreesChange").removeClass("pos"),$("#degreesChange").removeClass("neg"),l<0?$("#degreesChange").addClass("neg"):l>0&&$("#degreesChange").addClass("pos"),isFinite(l)?$("#degreesChange").html(d3.format("+%")(l)):$("#degreesChange").html("--"),"degrees"==t)return _;if("years"==t)return U}if("race"==n){var T=m.filter(function(t){return!(t.CTU_NAME!=e||"WHITENH"!=t.SUBJECT_LEVEL||"ACS 2011-2015"!=t.DATASOURCE&&"Census 2010"!=t.DATASOURCE&&"Census 2000"!=t.DATASOURCE&&"Census 1990"!=t.DATASOURCE||1970!=t.YEAR&&1980!=t.YEAR&&1990!=t.YEAR&&2e3!=t.YEAR&&2010!=t.YEAR&&2015!=t.YEAR)}),O=[],v=[];O[0]="Minorities",v[0]="x";for(var s=0;s<T.length;s++)O[s+1]=1-T[s].MEASURE/T[s].DENOMINATOR,v[s+1]=T[s].YEAR;var l=O[T.length]-O[1];if($("#raceChange").removeClass("pos"),$("#raceChange").removeClass("neg"),l<0?$("#raceChange").addClass("neg"):l>0&&$("#raceChange").addClass("pos"),isFinite(l)?$("#raceChange").html(d3.format("+%")(l)):$("#raceChange").html("--"),"race"==t)return O;if("years"==t)return v}if("land"==n){for(var L=S.filter(function(t){return t.CO_NAME==e&&"Non-Urbanized"!=t.LAND_USE_DESCRIPTION&&"Institutional and Recreation"!=t.LAND_USE_DESCRIPTION&&"Open Water Bodies"!=t.LAND_USE_DESCRIPTION&&"Parks & Recreation Areas"!=t.LAND_USE_DESCRIPTION&&"Vacant/Agricultural"!=t.LAND_USE_DESCRIPTION&&"Industrial Parks not Developed"!=t.LAND_USE_DESCRIPTION&&"Public & Semi-Public Vacant"!=t.LAND_USE_DESCRIPTION&&"Agriculture"!=t.LAND_USE_DESCRIPTION&&"Park, Recreational or Preserve"!=t.LAND_USE_DESCRIPTION&&"Golf Course"!=t.LAND_USE_DESCRIPTION&&"Undeveloped Land"!=t.LAND_USE_DESCRIPTION&&"Open Water"!=t.LAND_USE_DESCRIPTION}),P=["Developed Acres",0,0,0,0,0],Y=["x",1970,1980,1990,2e3,2010],y=1,s=1970;s<2020;s+=10){for(var M=0;M<L.length;M++)L[M].YEAR==s&&(P[y]+=Number(L[M].ACRES));y++}var l=(P[P.length-1]-P[1])/P[1];if($("#landChange").removeClass("pos"),$("#landChange").removeClass("neg"),l<0?$("#landChange").addClass("neg"):l>0&&$("#landChange").addClass("pos"),isFinite(l)?$("#landChange").html(d3.format("+%")(l)):$("#landChange").html("--"),"land"==t)return P;if("years"==t)return Y}}else if("all"==a){if("population"==n){var r=N.filter(function(t){return t.REGION_NAME==e&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),o=[],i=[];o[0]="Population",i[0]="x";for(var s=0;s<r.length;s++)o[s+1]=r[s].POPULATION,i[s+1]=r[s].YEAR;var l=(o[r.length]-o[1])/o[1];if($("#populationChange").removeClass("pos"),$("#populationChange").removeClass("neg"),l<0?$("#populationChange").addClass("neg"):l>0&&$("#populationChange").addClass("pos"),isFinite(l)?$("#populationChange").html(d3.format("+%")(l)):$("#populationChange").html("--"),"population"==t)return o;if("years"==t)return i}if("income"==n){var E=p.filter(function(t){return t.REGION_NAME==e&&"MEDIANHHINC"==t.SUBJECT_LEVEL&&"ACS 2008-2010"!=t.DATASOURCE&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),A=[],d=[];A[0]="Income",d[0]="x";for(var s=0;s<E.length;s++)A[s+1]=E[s].MEASURE,d[s+1]=E[s].YEAR;var l=(A[E.length]-A[1])/A[1];if($("#incomeChange").removeClass("pos"),$("#incomeChange").removeClass("neg"),l<0?$("#incomeChange").addClass("neg"):l>0&&$("#incomeChange").addClass("pos"),isFinite(l)?$("#incomeChange").html(d3.format("+%")(l)):$("#incomeChange").html("--"),"income"==t)return A;if("years"==t)return d}if("poverty"==n){var C=p.filter(function(t){return t.REGION_NAME==e&&"POV100RATE"==t.SUBJECT_LEVEL&&"ACS 2008-2010"!=t.DATASOURCE&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),c=[],u=[];c[0]="Poverty",u[0]="x";for(var s=0;s<C.length;s++)c[s+1]=C[s].MEASURE,u[s+1]=C[s].YEAR;var l=c[C.length]-c[1];if($("#povertyChange").removeClass("pos"),$("#povertyChange").removeClass("neg"),l<0?$("#povertyChange").addClass("neg"):l>0&&$("#povertyChange").addClass("pos"),isFinite(l)?$("#povertyChange").html(d3.format("+%")(l)):$("#povertyChange").html("--"),"poverty"==t)return c;if("years"==t)return u}if("degrees"==n){var D=p.filter(function(t){return t.REGION_NAME==e&&"BACHELORS"==t.SUBJECT_LEVEL&&"ACS 2008-2010"!=t.DATASOURCE&&(1970==t.YEAR||1980==t.YEAR||1990==t.YEAR||2e3==t.YEAR||2010==t.YEAR||2015==t.YEAR)}),_=[],U=[];_[0]="Degrees",U[0]="x";for(var s=0;s<D.length;s++)_[s+1]=D[s].MEASURE/D[s].DENOMINATOR,U[s+1]=D[s].YEAR;var l=_[D.length]-_[1];if($("#degreesChange").removeClass("pos"),$("#degreesChange").removeClass("neg"),l<0?$("#degreesChange").addClass("neg"):l>0&&$("#degreesChange").addClass("pos"),isFinite(l)?$("#degreesChange").html(d3.format("+%")(l)):$("#degreesChange").html("--"),"degrees"==t)return _;if("years"==t)return U}if("race"==n){var T=p.filter(function(t){return!(t.REGION_NAME!=e||"WHITENH"!=t.SUBJECT_LEVEL||"ACS 2011-2015"!=t.DATASOURCE&&"Census 2010"!=t.DATASOURCE&&"Census 2000"!=t.DATASOURCE&&"Census 1990"!=t.DATASOURCE||1970!=t.YEAR&&1980!=t.YEAR&&1990!=t.YEAR&&2e3!=t.YEAR&&2010!=t.YEAR&&2015!=t.YEAR)}),O=[],v=[];O[0]="Minorities",v[0]="x";for(var s=0;s<T.length;s++)O[s+1]=1-T[s].MEASURE/T[s].DENOMINATOR,v[s+1]=T[s].YEAR;var l=O[T.length]-O[1];if($("#raceChange").removeClass("pos"),$("#raceChange").removeClass("neg"),l<0?$("#raceChange").addClass("neg"):l>0&&$("#raceChange").addClass("pos"),isFinite(l)?$("#raceChange").html(d3.format("+%")(l)):$("#raceChange").html("--"),"race"==t)return O;if("years"==t)return v}if("land"==n){for(var L=I.filter(function(t){return t.REGION_NAME==e&&"Non-Urbanized"!=t.LAND_USE_DESCRIPTION&&"Institutional and Recreation"!=t.LAND_USE_DESCRIPTION&&"Open Water Bodies"!=t.LAND_USE_DESCRIPTION&&"Parks & Recreation Areas"!=t.LAND_USE_DESCRIPTION&&"Vacant/Agricultural"!=t.LAND_USE_DESCRIPTION&&"Industrial Parks not Developed"!=t.LAND_USE_DESCRIPTION&&"Public & Semi-Public Vacant"!=t.LAND_USE_DESCRIPTION&&"Agriculture"!=t.LAND_USE_DESCRIPTION&&"Park, Recreational or Preserve"!=t.LAND_USE_DESCRIPTION&&"Golf Course"!=t.LAND_USE_DESCRIPTION&&"Undeveloped Land"!=t.LAND_USE_DESCRIPTION&&"Open Water"!=t.LAND_USE_DESCRIPTION}),P=["Developed Acres",0,0,0,0,0],Y=["x",1970,1980,1990,2e3,2010],y=1,s=1970;s<2020;s+=10){for(var M=0;M<L.length;M++)L[M].YEAR==s&&(P[y]+=Number(L[M].ACRES));y++}var l=(P[P.length-1]-P[1])/P[1];if($("#landChange").removeClass("pos"),$("#landChange").removeClass("neg"),l<0?$("#landChange").addClass("neg"):l>0&&$("#landChange").addClass("pos"),isFinite(l)?$("#landChange").html(d3.format("+%")(l)):$("#landChange").html("--"),"land"==t)return P;if("years"==t)return Y}}}$("#districtSelect").click(function(){$("#listing").slideToggle()});var R=r.populations,h=o.demographics,f=i.land,g=s.populations,m=l.demographics,S=E.land,N=A.populations,p=d.demographics,I=C.land;d3.select("#all").selectAll(".row").data(N.filter(function(e){return 2015==e.YEAR})).enter().append("div").attr("class",function(e){return"Twin Cities Region (7-county)"==e.REGION_NAME?"row selected":"row "}).attr("id",function(e){return"Twin Cities Region (7-county)"==e.REGION_NAME?"first":null}).attr("type","all").attr("zoom",9).on("mousedown",function(e){for(var t,n,a,r,o=d3.format(",")(N[18].POPULATION),i=0,s=0;s<p.length;s++)2015==p[s].YEAR&&("MEDIANHHINC"==p[s].SUBJECT_LEVEL?t=d3.format("$,")(p[s].MEASURE):"WHITENH"==p[s].SUBJECT_LEVEL?n=d3.format("%")(1-p[s].MEASURE/p[s].DENOMINATOR):"BACHELORS"==p[s].SUBJECT_LEVEL?r=d3.format("%")(p[s].MEASURE/p[s].DENOMINATOR):"POV100RATE"==p[s].SUBJECT_LEVEL&&(a=d3.format("%")(p[s].MEASURE)));for(var s=0;s<I.length;s++)2010==I[s].YEAR&&"Non-Urbanized"!=I[s].LAND_USE_DESCRIPTION&&"Institutional and Recreation"!=I[s].LAND_USE_DESCRIPTION&&"Open Water Bodies"!=I[s].LAND_USE_DESCRIPTION&&"Parks & Recreation Areas"!=I[s].LAND_USE_DESCRIPTION&&"Vacant/Agricultural"!=I[s].LAND_USE_DESCRIPTION&&"Industrial Parks not Developed"!=I[s].LAND_USE_DESCRIPTION&&"Public & Semi-Public Vacant"!=I[s].LAND_USE_DESCRIPTION&&"Agriculture"!=I[s].LAND_USE_DESCRIPTION&&"Park, Recreational or Preserve"!=I[s].LAND_USE_DESCRIPTION&&"Golf Course"!=I[s].LAND_USE_DESCRIPTION&&"Undeveloped Land"!=I[s].LAND_USE_DESCRIPTION&&"Open Water"!=I[s].LAND_USE_DESCRIPTION&&(i+=I[s].ACRES);$("#population").html(o),$("#land").html(d3.format(",.0f")(i)),$("#income").html(t),$("#minorities").html(n),$("#poverty").html(a),$("#degrees").html(r)}).attr("latitude",function(e){return 45.01832962}).attr("longitude",function(e){return-93.28469849}).html(function(e,t){return"<div class='col name'>"+e.REGION_NAME+"</div>"}),d3.select("#counties").selectAll(".row").data(g.filter(function(e){return 2015==e.YEAR})).enter().append("div").attr("class",function(e){return"row "}).attr("type","county").attr("zoom",8).on("mousedown",function(e){for(var t,n,a,r,o,i=0,s=0;s<g.length;s++)e.CO_NAME==g[s].CO_NAME&&2015==g[s].YEAR&&(t=d3.format(",")(g[s].POPULATION));for(var s=0;s<m.length;s++)e.CO_NAME==m[s].CTU_NAME&&2015==m[s].YEAR&&("MEDIANHHINC"==m[s].SUBJECT_LEVEL?n=d3.format("$,")(m[s].MEASURE):"WHITENH"==m[s].SUBJECT_LEVEL?a=d3.format("%")(1-m[s].MEASURE/m[s].DENOMINATOR):"BACHELORS"==m[s].SUBJECT_LEVEL?o=d3.format("%")(m[s].MEASURE/m[s].DENOMINATOR):"POV100RATE"==m[s].SUBJECT_LEVEL&&(r=d3.format("%")(m[s].MEASURE)));for(var s=0;s<S.length;s++)e.CO_NAME==S[s].CO_NAME&&2010==S[s].YEAR&&("Non-Urbanized"!=S[s].LAND_USE_DESCRIPTION&&"Institutional and Recreation"!=S[s].LAND_USE_DESCRIPTION&&"Open Water Bodies"!=S[s].LAND_USE_DESCRIPTION&&"Parks & Recreation Areas"!=S[s].LAND_USE_DESCRIPTION&&"Vacant/Agricultural"!=S[s].LAND_USE_DESCRIPTION&&"Industrial Parks not Developed"!=S[s].LAND_USE_DESCRIPTION&&"Public & Semi-Public Vacant"!=S[s].LAND_USE_DESCRIPTION&&"Agriculture"!=S[s].LAND_USE_DESCRIPTION&&"Park, Recreational or Preserve"!=S[s].LAND_USE_DESCRIPTION&&"Golf Course"!=S[s].LAND_USE_DESCRIPTION&&"Undeveloped Land"!=S[s].LAND_USE_DESCRIPTION&&"Open Water"!=S[s].LAND_USE_DESCRIPTION||(i+=S[s].ACRES));$("#population").html(t),$("#land").html(d3.format(",.0f")(i)),$("#income").html(n),$("#minorities").html(a),$("#poverty").html(r),$("#degrees").html(o)}).attr("latitude",function(e){return e.latitude}).attr("longitude",function(e){return e.longitude}).html(function(e,t){return"<div class='col name'>"+e.CO_NAME+"</div>"}),d3.select("#towns").selectAll(".row").data(R.filter(function(e){return 2015==e.YEAR})).enter().append("div").attr("class",function(e){return"row "}).attr("type","city").attr("zoom",11.5).on("mousedown",function(e){for(var t,n,a,r,o=d3.format(",")(e.POPULATION),i=0,s=0;s<h.length;s++)Number(e.COCTU_ID)==Number(h[s].COCTU_ID)&&2015==h[s].YEAR&&("MEDIANHHINC"==h[s].SUBJECT_LEVEL?t=d3.format("$,")(h[s].MEASURE):"WHITENH"==h[s].SUBJECT_LEVEL?n=d3.format("%")(1-h[s].MEASURE/h[s].DENOMINATOR):"BACHELORS"==h[s].SUBJECT_LEVEL?r=d3.format("%")(h[s].MEASURE/h[s].DENOMINATOR):"POV100RATE"==h[s].SUBJECT_LEVEL&&(a=d3.format("%")(h[s].MEASURE)));for(var s=0;s<f.length;s++)Number(e.COCTU_ID)==Number(f[s].COCTU_ID)&&2010==f[s].YEAR&&("Non-Urbanized"!=f[s].LAND_USE_DESCRIPTION&&"Institutional and Recreation"!=f[s].LAND_USE_DESCRIPTION&&"Open Water Bodies"!=f[s].LAND_USE_DESCRIPTION&&"Parks & Recreation Areas"!=f[s].LAND_USE_DESCRIPTION&&"Vacant/Agricultural"!=f[s].LAND_USE_DESCRIPTION&&"Industrial Parks not Developed"!=f[s].LAND_USE_DESCRIPTION&&"Public & Semi-Public Vacant"!=f[s].LAND_USE_DESCRIPTION&&"Agriculture"!=f[s].LAND_USE_DESCRIPTION&&"Park, Recreational or Preserve"!=f[s].LAND_USE_DESCRIPTION&&"Golf Course"!=f[s].LAND_USE_DESCRIPTION&&"Undeveloped Land"!=f[s].LAND_USE_DESCRIPTION&&"Open Water"!=f[s].LAND_USE_DESCRIPTION||(i+=f[s].ACRES));$("#population").html(o),$("#land").html(d3.format(",.0f")(i)),$("#income").html(t),$("#minorities").html(n),$("#poverty").html(a),$("#degrees").html(r)}).attr("latitude",function(e){return e.latitude}).attr("longitude",function(e){return e.longitude}).html(function(e,t){return"<div class='col name'>"+e.CTU_NAME+"</div>"});var D;$(document).ready(function(){$(".row").hide();var e=$("#filter_box").val();$(".row").each(function(){$(this).text().toUpperCase().indexOf(e.toUpperCase())!=-1&&$(this).show()}),$(".row").each(function(){$(this).text().toUpperCase().indexOf("(MPLS)")==-1&&$(this).text().toUpperCase().indexOf("(STP)")==-1||$(this).hide()}),$("#filter_box").on("keyup search",function(e){$(".row").hide();var t=$("#filter_box").val();$(".row").each(function(){$(this).text().toUpperCase().indexOf(t.toUpperCase())!=-1&&$(this).show()})}),$(".th").click(function(){if($(".th").removeClass("selected3"),$(this).addClass("selected3"),$(this).hasClass("toggled")){$(this).removeClass("toggled");var e="ascend"}else if($(this).hasClass("selected3")){$(this).addClass("toggled");var e="descend"}c("#cities",null,R,$(this).attr("data"),e)}),$(".row").click(function(){$(".row").removeClass("selected"),$(this).addClass("selected"),$("#listing").slideToggle(),$("#thisDistrict").html($(this).find(".name").text());var e=Number($(this).attr("longitude")),t=Number($(this).attr("latitude")),n=Number($(this).attr("zoom"));D.load({columns:[u($(this).find(".name").text(),"years","population",$(this).attr("type")),u($(this).find(".name").text(),"population","population",$(this).attr("type"))]}),chartIncome.load({columns:[u($(this).find(".name").text(),"years","income",$(this).attr("type")),u($(this).find(".name").text(),"income","income",$(this).attr("type"))]}),chartPoverty.load({columns:[u($(this).find(".name").text(),"years","poverty",$(this).attr("type")),u($(this).find(".name").text(),"poverty","poverty",$(this).attr("type"))]}),chartDegrees.load({columns:[u($(this).find(".name").text(),"years","degrees",$(this).attr("type")),u($(this).find(".name").text(),"degrees","degrees",$(this).attr("type"))]}),chartRace.load({columns:[u($(this).find(".name").text(),"years","race",$(this).attr("type")),u($(this).find(".name").text(),"race","race",$(this).attr("type"))]}),chartLand.load({columns:[u($(this).find(".name").text(),"years","land",$(this).attr("type")),u($(this).find(".name").text(),"land","land",$(this).attr("type"))]}),U.flyTo({center:[e,t],zoom:n,pitch:0,bearing:0})});var t=N.filter(function(e){return 1970==e.YEAR||1980==e.YEAR||1990==e.YEAR||2e3==e.YEAR||2010==e.YEAR||2015==e.YEAR}),n=[],a=[];n[0]="Population",a[0]="x";for(var r=0;r<t.length;r++)n[r+1]=t[r].POPULATION,a[r+1]=t[r].YEAR;var o={top:40,right:40,bottom:30,left:60};D=c3.generate({bindto:"#chartPop",padding:o,data:{x:"x",columns:[a,n],colors:{Population:"#333333"}},legend:{show:!1},axis:{y:{min:0,padding:{bottom:0,top:10},tick:{count:4,format:d3.format(",.0f")}},x:{tick:{count:6,values:[1970,1980,1990,2e3,2015],format:d3.format(".0f")}}}});for(var i=I.filter(function(e){return"Non-Urbanized"!=e.LAND_USE_DESCRIPTION&&"Institutional and Recreation"!=e.LAND_USE_DESCRIPTION&&"Open Water Bodies"!=e.LAND_USE_DESCRIPTION&&"Parks & Recreation Areas"!=e.LAND_USE_DESCRIPTION&&"Vacant/Agricultural"!=e.LAND_USE_DESCRIPTION&&"Industrial Parks not Developed"!=e.LAND_USE_DESCRIPTION&&"Public & Semi-Public Vacant"!=e.LAND_USE_DESCRIPTION&&"Agriculture"!=e.LAND_USE_DESCRIPTION&&"Park, Recreational or Preserve"!=e.LAND_USE_DESCRIPTION&&"Golf Course"!=e.LAND_USE_DESCRIPTION&&"Undeveloped Land"!=e.LAND_USE_DESCRIPTION&&"Open Water"!=e.LAND_USE_DESCRIPTION}),s=["Developed Acres",0,0,0,0,0],l=["x",1970,1980,1990,2e3,2010],E=1,r=1970;r<2020;r+=10){for(var A=0;A<i.length;A++)i[A].YEAR==r&&(s[E]+=Number(i[A].ACRES));E++}chartLand=c3.generate({bindto:"#chartLand",padding:o,data:{x:"x",columns:[l,s],colors:{"Developed Acres":"#333333"}},legend:{show:!1},axis:{y:{min:0,padding:{bottom:0,top:10},tick:{count:4,format:d3.format(",.0f")}},x:{tick:{count:5,values:[1970,1980,1990,2e3,2010],format:d3.format(".0f")}}}});var d=p.filter(function(e){return"MEDIANHHINC"==e.SUBJECT_LEVEL&&"ACS 2008-2010"!=e.DATASOURCE&&(1970==e.YEAR||1980==e.YEAR||1990==e.YEAR||2e3==e.YEAR||2010==e.YEAR||2015==e.YEAR)}),C=[],h=[];C[0]="Income",h[0]="x";for(var r=0;r<d.length;r++)C[r+1]=d[r].MEASURE,h[r+1]=d[r].YEAR;chartIncome=c3.generate({bindto:"#chartIncome",padding:o,data:{x:"x",columns:[h,C],colors:{Income:"#333333"}},legend:{show:!1},axis:{y:{min:0,padding:{bottom:0,top:10},tick:{format:d3.format("$,.0f"),count:4}},x:{tick:{count:4,values:[1990,2e3,2010,2015],format:d3.format(".0f")}}}});var f=p.filter(function(e){return"POV100RATE"==e.SUBJECT_LEVEL&&"ACS 2008-2010"!=e.DATASOURCE&&(1970==e.YEAR||1980==e.YEAR||1990==e.YEAR||2e3==e.YEAR||2010==e.YEAR||2015==e.YEAR)}),g=[],m=[];g[0]="Poverty",m[0]="x";for(var r=0;r<f.length;r++)g[r+1]=f[r].MEASURE,m[r+1]=f[r].YEAR;chartPoverty=c3.generate({bindto:"#chartPoverty",padding:o,data:{x:"x",columns:[m,g],colors:{Poverty:"#333333"}},legend:{show:!1},axis:{y:{min:0,padding:{bottom:0,top:10},tick:{count:4,format:d3.format("%")}},x:{tick:{count:4,values:[1990,2e3,2010,2015],format:d3.format(".0f")}}}});var S=p.filter(function(e){return!("WHITENH"!=e.SUBJECT_LEVEL||"ACS 2011-2015"!=e.DATASOURCE&&"Census 2010"!=e.DATASOURCE&&"Census 2000"!=e.DATASOURCE&&"Census 1990"!=e.DATASOURCE||1970!=e.YEAR&&1980!=e.YEAR&&1990!=e.YEAR&&2e3!=e.YEAR&&2010!=e.YEAR&&2015!=e.YEAR)}),_=[],T=[];_[0]="Minorities",T[0]="x";for(var r=0;r<S.length;r++)_[r+1]=1-S[r].MEASURE/S[r].DENOMINATOR,T[r+1]=S[r].YEAR;chartRace=c3.generate({bindto:"#chartRace",padding:o,data:{x:"x",columns:[T,_],colors:{Minorities:"#333333"}},legend:{show:!1},axis:{y:{max:.6,min:0,padding:{bottom:0,top:0},tick:{count:4,format:d3.format("%")}},x:{tick:{count:4,values:[1990,2e3,2010,2015],format:d3.format(".0f")}}}});var O=p.filter(function(e){return"BACHELORS"==e.SUBJECT_LEVEL&&"ACS 2008-2010"!=e.DATASOURCE&&(1970==e.YEAR||1980==e.YEAR||1990==e.YEAR||2e3==e.YEAR||2010==e.YEAR||2015==e.YEAR)}),v=[],L=[];v[0]="Degrees",L[0]="x";for(var r=0;r<O.length;r++)v[r+1]=O[r].MEASURE/O[r].DENOMINATOR,L[r+1]=O[r].YEAR;chartDegrees=c3.generate({bindto:"#chartDegrees",padding:o,data:{x:"x",columns:[L,v],colors:{Degrees:"#333333"}},legend:{show:!1},axis:{y:{min:0,padding:{bottom:0,top:10},tick:{count:4,format:d3.format("%")}},x:{tick:{count:4,values:[1990,2e3,2010,2015],format:d3.format(".0f")}}}})}),mapboxgl.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA";var _=new mapboxgl.Map({container:"before",style:"mapbox://styles/shadowflare/ciqzo0bu20004bknkbrhrm6wf",center:[-93.28469849,45.01832962],zoom:8,minZoom:3,hash:!1});_.addControl(new mapboxgl.NavigationControl),_.scrollZoom.disable(),_.on("load",function(){_.addSource("metro1970",{type:"geojson",data:a}),_.addLayer({id:"old-layer",interactive:!0,source:"metro1970",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":1,"fill-color":{property:"DENSITY",stops:[[0,"#f1eef6"],[20,"#bdc9e1"],[40,"#74a9cf"],[80,"#0570b0"]]},"fill-outline-color":"rgba(255, 255, 255, 0.1)"}},"place-neighbourhood")});var U=new mapboxgl.Map({container:"after",style:"mapbox://styles/shadowflare/ciqzo0bu20004bknkbrhrm6wf",center:[-93.28469849,45.01832962],zoom:8,minZoom:3});new mapboxgl.Compare(U,_,{});U.addControl(new mapboxgl.NavigationControl),U.scrollZoom.disable(),U.on("load",function(){U.addSource("metroToday",{type:"geojson",data:n}),U.addLayer({id:"new-layer",interactive:!0,source:"metroToday",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":1,"fill-color":{property:"DENSITY",stops:[[0,"#f1eef6"],[20,"#bdc9e1"],[40,"#74a9cf"],[80,"#0570b0"]]},"fill-outline-color":"rgba(255, 255, 255, 0.1)"}},"place-neighbourhood"),U.addSource("metro",{type:"geojson",data:t}),U.addLayer({id:"metro-layer",interactive:!0,source:"metro",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":0,"fill-color":"#dddddd","fill-outline-color":"rgba(255, 255, 255, 1)"}},"place-neighbourhood")}),$("#first").trigger("mousedown"),$("#population").html("3,005,419"),$("#land").html("575,447"),$("#income").html("$68,778"),$("#minorities").html("11%"),$("#poverty").html("25%"),$("#degrees").html("27%"),$("#populationChange").html("+60%"),$("#landChange").html("+111%"),$("#incomeChange").html("+88%"),$("#raceChange").html("+16%"),$("#povertyChange").html("+3%"),$("#degreesChange").html("+7%")})})})})})})})})})})})})},{}]},{},[1]);