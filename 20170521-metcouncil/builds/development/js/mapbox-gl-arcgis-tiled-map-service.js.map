{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@mapbox/sphericalmercator/sphericalmercator.js","node_modules/@mapbox/unitbezier/index.js","node_modules/mapbox-gl-supported/index.js","node_modules/mapbox-gl/src/geo/coordinate.js","node_modules/mapbox-gl/src/geo/lng_lat.js","node_modules/mapbox-gl/src/geo/lng_lat_bounds.js","node_modules/mapbox-gl/src/source/tile_bounds.js","node_modules/mapbox-gl/src/util/ajax.js","node_modules/mapbox-gl/src/util/browser.js","node_modules/mapbox-gl/src/util/browser/window.js","node_modules/mapbox-gl/src/util/evented.js","node_modules/mapbox-gl/src/util/util.js","node_modules/point-geometry/index.js","src/arcgis_tiled_map_service_source.js","src/index.js","src/load_arcgis_mapserver.js"],"names":["SphericalMercator","options","this","size","cache","c","Bc","Cc","zc","Ac","d","push","Math","PI","D2R","R2D","A","MAXEXTENT","prototype","px","ll","zoom","f","min","max","sin","x","round","y","log","g","atan","exp","bbox","tms_style","srs","pow","ur","concat","convert","xyz","px_ll","px_ur","floor","bounds","minX","apply","minY","maxX","maxY","tms","to","forward","slice","inverse","xy","tan","module","exports","UnitBezier","p1x","p1y","p2x","p2y","cx","bx","ax","cy","by","ay","sampleCurveX","t","sampleCurveY","sampleCurveDerivativeX","solveCurveX","epsilon","t0","t1","t2","x2","i","abs","d2","solve","isSupported","isBrowser","isArraySupported","isFunctionSupported","isObjectSupported","isJSONSupported","isWorkerSupported","isUint8ClampedArraySupported","isWebGLSupportedCached","failIfMajorPerformanceCaveat","window","document","Array","every","filter","forEach","indexOf","lastIndexOf","map","some","reduce","reduceRight","isArray","Function","bind","Object","keys","create","getPrototypeOf","getOwnPropertyNames","isSealed","isFrozen","isExtensible","getOwnPropertyDescriptor","defineProperty","defineProperties","seal","freeze","preventExtensions","JSON","undefined","isWebGLSupportedCache","isWebGLSupported","canvas","createElement","attributes","webGLContextAttributes","probablySupportsContext","supportsContext","getContext","mapboxgl","supported","antialias","alpha","stencil","depth","Coordinate","column","row","clone","zoomTo","_zoomTo","sub","_sub","scale","const","wrap","require","LngLat","lng","lat","isNaN","Error","wrapToBestWorld","center","wrapped","toArray","toString","input","hasOwnProperty","length","LngLatBounds","sw","ne","setSouthWest","setNorthEast","_ne","_sw","extend","obj","sw2","ne2","getCenter","getSouthWest","getNorthEast","getNorthWest","getWest","getNorth","getSouthEast","getEast","getSouth","clamp","TileBounds","minzoom","maxzoom","contains","coord","tileZ","z","level","lngX","latY","ceil","sameOrigin","url","a","href","protocol","location","host","AJAXError","message","status","super","call","constructor","getJSON","callback","xhr","XMLHttpRequest","open","setRequestHeader","onerror","e","onload","response","let","data","parse","err","statusText","send","getArrayBuffer","responseType","byteLength","cacheControl","getResponseHeader","expires","transparentPngUrl","getImage","imgData","img","Image","URL","webkitURL","revokeObjectURL","src","blob","Blob","Uint8Array","type","createObjectURL","getVideo","urls","video","onloadstart","s","crossOrigin","appendChild","now","performance","Date","frame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","fn","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","cancelFrame","id","timed","dur","ctx","tick","abort","start","getImageData","context","width","height","drawImage","hardwareConcurrency","navigator","get","devicePixelRatio","supportsWebp","webpImgTest","self","_addEventListener","listener","listenerList","_removeEventListener","index","splice","util","Evented","on","_listeners","off","_oneTimeListeners","once","fire","this$1","listens","target","listeners","oneTimeListeners","_eventedParent","_eventedParentData","endsWith","console","error","setEventedParent","parent","Point","easeCubicInOut","t3","bezier","ease","n","w","asyncAll","array","remaining","results","item","result","values","k","keysDifference","other","difference","dest","source0","source1","source2","arguments$1","arguments","pick","properties","uniqueId","bindAll","fns","getCoordinatesCenter","coords","Infinity","dx","dy","dMax","LN2","string","suffix","mapObject","iterator","output","key","filterObject","deepEqual","b","arraysIntersect","l","warnOnceHistory","warnOnce","warn","isCounterClockwise","calculateSignedArea","ring","sum","len","j","p1","p2","isClosedPolygon","points","sphericalToCartesian","spherical","r","azimuthal","polar","cos","parseCacheControl","header","replace","$0","$1","$2","$3","value","toLowerCase","maxAge","parseInt","add","p","_add","mult","_mult","div","_div","rotate","_rotate","matMult","m","_matMult","unit","_unit","perp","_perp","_round","mag","sqrt","equals","dist","distSqr","angle","atan2","angleTo","angleWith","angleWithSep","ajax","loadArcGISMapServer","_templateRe","_template","str","_getSubdomain","tilePoint","subdomains","ArcGISTiledMapServiceSource","dispatcher","eventedParent","roundZoom","tileSize","_loaded","load","dataType","metadata","setBounds","sourceDataType","onAdd","baseUrl","split","tileUrl","RegExp","test","token","tileBounds","serialize","tiles","hasTile","loadTile","tile","done","request","aborted","state","_refreshExpiredTiles","setExpiryData","gl","painter","texture","getTileTexture","bindTexture","TEXTURE_2D","texSubImage2D","RGBA","UNSIGNED_BYTE","createTexture","texParameteri","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","extTextureFilterAnisotropic","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","extTextureFilterAnisotropicMax","texImage2D","generateMipmap","_lodMap","abortTile","unloadTile","saveTileTexture","browser","MercatorZoomLevels","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","_withinPercentage","percentage","loaded","sr","spatialReference","latestWkid","wkid","extent","fullExtent","boundsWebMercator","xmin","ymin","xmax","ymax","merc","boundsWGS84","arcgisLODs","tileInfo","lods","correctResolutions","arcgisLOD","ci","correctRes","resolution"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var SphericalMercator = (function(){\n\n// Closures including constants and other precalculated values.\nvar cache = {},\n    EPSLN = 1.0e-10,\n    D2R = Math.PI / 180,\n    R2D = 180 / Math.PI,\n    // 900913 properties.\n    A = 6378137.0,\n    MAXEXTENT = 20037508.342789244;\n\n\n// SphericalMercator constructor: precaches calculations\n// for fast tile lookups.\nfunction SphericalMercator(options) {\n    options = options || {};\n    this.size = options.size || 256;\n    if (!cache[this.size]) {\n        var size = this.size;\n        var c = cache[this.size] = {};\n        c.Bc = [];\n        c.Cc = [];\n        c.zc = [];\n        c.Ac = [];\n        for (var d = 0; d < 30; d++) {\n            c.Bc.push(size / 360);\n            c.Cc.push(size / (2 * Math.PI));\n            c.zc.push(size / 2);\n            c.Ac.push(size);\n            size *= 2;\n        }\n    }\n    this.Bc = cache[this.size].Bc;\n    this.Cc = cache[this.size].Cc;\n    this.zc = cache[this.size].zc;\n    this.Ac = cache[this.size].Ac;\n};\n\n// Convert lon lat to screen pixel value\n//\n// - `ll` {Array} `[lon, lat]` array of geographic coordinates.\n// - `zoom` {Number} zoom level.\nSphericalMercator.prototype.px = function(ll, zoom) {\n    var d = this.zc[zoom];\n    var f = Math.min(Math.max(Math.sin(D2R * ll[1]), -0.9999), 0.9999);\n    var x = Math.round(d + ll[0] * this.Bc[zoom]);\n    var y = Math.round(d + 0.5 * Math.log((1 + f) / (1 - f)) * (-this.Cc[zoom]));\n    (x > this.Ac[zoom]) && (x = this.Ac[zoom]);\n    (y > this.Ac[zoom]) && (y = this.Ac[zoom]);\n    //(x < 0) && (x = 0);\n    //(y < 0) && (y = 0);\n    return [x, y];\n};\n\n// Convert screen pixel value to lon lat\n//\n// - `px` {Array} `[x, y]` array of geographic coordinates.\n// - `zoom` {Number} zoom level.\nSphericalMercator.prototype.ll = function(px, zoom) {\n    var g = (px[1] - this.zc[zoom]) / (-this.Cc[zoom]);\n    var lon = (px[0] - this.zc[zoom]) / this.Bc[zoom];\n    var lat = R2D * (2 * Math.atan(Math.exp(g)) - 0.5 * Math.PI);\n    return [lon, lat];\n};\n\n// Convert tile xyz value to bbox of the form `[w, s, e, n]`\n//\n// - `x` {Number} x (longitude) number.\n// - `y` {Number} y (latitude) number.\n// - `zoom` {Number} zoom.\n// - `tms_style` {Boolean} whether to compute using tms-style.\n// - `srs` {String} projection for resulting bbox (WGS84|900913).\n// - `return` {Array} bbox array of values in form `[w, s, e, n]`.\nSphericalMercator.prototype.bbox = function(x, y, zoom, tms_style, srs) {\n    // Convert xyz into bbox with srs WGS84\n    if (tms_style) {\n        y = (Math.pow(2, zoom) - 1) - y;\n    }\n    // Use +y to make sure it's a number to avoid inadvertent concatenation.\n    var ll = [x * this.size, (+y + 1) * this.size]; // lower left\n    // Use +x to make sure it's a number to avoid inadvertent concatenation.\n    var ur = [(+x + 1) * this.size, y * this.size]; // upper right\n    var bbox = this.ll(ll, zoom).concat(this.ll(ur, zoom));\n\n    // If web mercator requested reproject to 900913.\n    if (srs === '900913') {\n        return this.convert(bbox, '900913');\n    } else {\n        return bbox;\n    }\n};\n\n// Convert bbox to xyx bounds\n//\n// - `bbox` {Number} bbox in the form `[w, s, e, n]`.\n// - `zoom` {Number} zoom.\n// - `tms_style` {Boolean} whether to compute using tms-style.\n// - `srs` {String} projection of input bbox (WGS84|900913).\n// - `@return` {Object} XYZ bounds containing minX, maxX, minY, maxY properties.\nSphericalMercator.prototype.xyz = function(bbox, zoom, tms_style, srs) {\n    // If web mercator provided reproject to WGS84.\n    if (srs === '900913') {\n        bbox = this.convert(bbox, 'WGS84');\n    }\n\n    var ll = [bbox[0], bbox[1]]; // lower left\n    var ur = [bbox[2], bbox[3]]; // upper right\n    var px_ll = this.px(ll, zoom);\n    var px_ur = this.px(ur, zoom);\n    // Y = 0 for XYZ is the top hence minY uses px_ur[1].\n    var x = [ Math.floor(px_ll[0] / this.size), Math.floor((px_ur[0] - 1) / this.size) ];\n    var y = [ Math.floor(px_ur[1] / this.size), Math.floor((px_ll[1] - 1) / this.size) ];\n    var bounds = {\n        minX: Math.min.apply(Math, x) < 0 ? 0 : Math.min.apply(Math, x),\n        minY: Math.min.apply(Math, y) < 0 ? 0 : Math.min.apply(Math, y),\n        maxX: Math.max.apply(Math, x),\n        maxY: Math.max.apply(Math, y)\n    };\n    if (tms_style) {\n        var tms = {\n            minY: (Math.pow(2, zoom) - 1) - bounds.maxY,\n            maxY: (Math.pow(2, zoom) - 1) - bounds.minY\n        };\n        bounds.minY = tms.minY;\n        bounds.maxY = tms.maxY;\n    }\n    return bounds;\n};\n\n// Convert projection of given bbox.\n//\n// - `bbox` {Number} bbox in the form `[w, s, e, n]`.\n// - `to` {String} projection of output bbox (WGS84|900913). Input bbox\n//   assumed to be the \"other\" projection.\n// - `@return` {Object} bbox with reprojected coordinates.\nSphericalMercator.prototype.convert = function(bbox, to) {\n    if (to === '900913') {\n        return this.forward(bbox.slice(0, 2)).concat(this.forward(bbox.slice(2,4)));\n    } else {\n        return this.inverse(bbox.slice(0, 2)).concat(this.inverse(bbox.slice(2,4)));\n    }\n};\n\n// Convert lon/lat values to 900913 x/y.\nSphericalMercator.prototype.forward = function(ll) {\n    var xy = [\n        A * ll[0] * D2R,\n        A * Math.log(Math.tan((Math.PI*0.25) + (0.5 * ll[1] * D2R)))\n    ];\n    // if xy value is beyond maxextent (e.g. poles), return maxextent.\n    (xy[0] > MAXEXTENT) && (xy[0] = MAXEXTENT);\n    (xy[0] < -MAXEXTENT) && (xy[0] = -MAXEXTENT);\n    (xy[1] > MAXEXTENT) && (xy[1] = MAXEXTENT);\n    (xy[1] < -MAXEXTENT) && (xy[1] = -MAXEXTENT);\n    return xy;\n};\n\n// Convert 900913 x/y values to lon/lat.\nSphericalMercator.prototype.inverse = function(xy) {\n    return [\n        (xy[0] * R2D / A),\n        ((Math.PI*0.5) - 2.0 * Math.atan(Math.exp(-xy[1] / A))) * R2D\n    ];\n};\n\nreturn SphericalMercator;\n\n})();\n\nif (typeof module !== 'undefined' && typeof exports !== 'undefined') {\n    module.exports = exports = SphericalMercator;\n}\n","/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * Ported from Webkit\n * http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/UnitBezier.h\n */\n\nmodule.exports = UnitBezier;\n\nfunction UnitBezier(p1x, p1y, p2x, p2y) {\n    // Calculate the polynomial coefficients, implicit first and last control points are (0,0) and (1,1).\n    this.cx = 3.0 * p1x;\n    this.bx = 3.0 * (p2x - p1x) - this.cx;\n    this.ax = 1.0 - this.cx - this.bx;\n\n    this.cy = 3.0 * p1y;\n    this.by = 3.0 * (p2y - p1y) - this.cy;\n    this.ay = 1.0 - this.cy - this.by;\n\n    this.p1x = p1x;\n    this.p1y = p2y;\n    this.p2x = p2x;\n    this.p2y = p2y;\n}\n\nUnitBezier.prototype.sampleCurveX = function(t) {\n    // `ax t^3 + bx t^2 + cx t' expanded using Horner's rule.\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\n};\n\nUnitBezier.prototype.sampleCurveY = function(t) {\n    return ((this.ay * t + this.by) * t + this.cy) * t;\n};\n\nUnitBezier.prototype.sampleCurveDerivativeX = function(t) {\n    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;\n};\n\nUnitBezier.prototype.solveCurveX = function(x, epsilon) {\n    if (typeof epsilon === 'undefined') epsilon = 1e-6;\n\n    var t0, t1, t2, x2, i;\n\n    // First try a few iterations of Newton's method -- normally very fast.\n    for (t2 = x, i = 0; i < 8; i++) {\n\n        x2 = this.sampleCurveX(t2) - x;\n        if (Math.abs(x2) < epsilon) return t2;\n\n        var d2 = this.sampleCurveDerivativeX(t2);\n        if (Math.abs(d2) < 1e-6) break;\n\n        t2 = t2 - x2 / d2;\n    }\n\n    // Fall back to the bisection method for reliability.\n    t0 = 0.0;\n    t1 = 1.0;\n    t2 = x;\n\n    if (t2 < t0) return t0;\n    if (t2 > t1) return t1;\n\n    while (t0 < t1) {\n\n        x2 = this.sampleCurveX(t2);\n        if (Math.abs(x2 - x) < epsilon) return t2;\n\n        if (x > x2) {\n            t0 = t2;\n        } else {\n            t1 = t2;\n        }\n\n        t2 = (t1 - t0) * 0.5 + t0;\n    }\n\n    // Failure.\n    return t2;\n};\n\nUnitBezier.prototype.solve = function(x, epsilon) {\n    return this.sampleCurveY(this.solveCurveX(x, epsilon));\n};\n","'use strict';\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = isSupported;\n} else if (window) {\n    window.mapboxgl = window.mapboxgl || {};\n    window.mapboxgl.supported = isSupported;\n}\n\n/**\n * Test whether the current browser supports Mapbox GL JS\n * @param {Object} options\n * @param {boolean} [options.failIfMajorPerformanceCaveat=false] Return `false`\n *   if the performance of Mapbox GL JS would be dramatically worse than\n *   expected (i.e. a software renderer is would be used)\n * @return {boolean}\n */\nfunction isSupported(options) {\n    return !!(\n        isBrowser() &&\n        isArraySupported() &&\n        isFunctionSupported() &&\n        isObjectSupported() &&\n        isJSONSupported() &&\n        isWorkerSupported() &&\n        isUint8ClampedArraySupported() &&\n        isWebGLSupportedCached(options && options.failIfMajorPerformanceCaveat)\n    );\n}\n\nfunction isBrowser() {\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n\nfunction isArraySupported() {\n    return (\n        Array.prototype &&\n        Array.prototype.every &&\n        Array.prototype.filter &&\n        Array.prototype.forEach &&\n        Array.prototype.indexOf &&\n        Array.prototype.lastIndexOf &&\n        Array.prototype.map &&\n        Array.prototype.some &&\n        Array.prototype.reduce &&\n        Array.prototype.reduceRight &&\n        Array.isArray\n    );\n}\n\nfunction isFunctionSupported() {\n    return Function.prototype && Function.prototype.bind;\n}\n\nfunction isObjectSupported() {\n    return (\n        Object.keys &&\n        Object.create &&\n        Object.getPrototypeOf &&\n        Object.getOwnPropertyNames &&\n        Object.isSealed &&\n        Object.isFrozen &&\n        Object.isExtensible &&\n        Object.getOwnPropertyDescriptor &&\n        Object.defineProperty &&\n        Object.defineProperties &&\n        Object.seal &&\n        Object.freeze &&\n        Object.preventExtensions\n    );\n}\n\nfunction isJSONSupported() {\n    return 'JSON' in window && 'parse' in JSON && 'stringify' in JSON;\n}\n\nfunction isWorkerSupported() {\n    return 'Worker' in window;\n}\n\n// IE11 only supports `Uint8ClampedArray` as of version\n// [KB2929437](https://support.microsoft.com/en-us/kb/2929437)\nfunction isUint8ClampedArraySupported() {\n    return 'Uint8ClampedArray' in window;\n}\n\nvar isWebGLSupportedCache = {};\nfunction isWebGLSupportedCached(failIfMajorPerformanceCaveat) {\n\n    if (isWebGLSupportedCache[failIfMajorPerformanceCaveat] === undefined) {\n        isWebGLSupportedCache[failIfMajorPerformanceCaveat] = isWebGLSupported(failIfMajorPerformanceCaveat);\n    }\n\n    return isWebGLSupportedCache[failIfMajorPerformanceCaveat];\n}\n\nisSupported.webGLContextAttributes = {\n    antialias: false,\n    alpha: true,\n    stencil: true,\n    depth: true\n};\n\nfunction isWebGLSupported(failIfMajorPerformanceCaveat) {\n\n    var canvas = document.createElement('canvas');\n\n    var attributes = Object.create(isSupported.webGLContextAttributes);\n    attributes.failIfMajorPerformanceCaveat = failIfMajorPerformanceCaveat;\n\n    if (canvas.probablySupportsContext) {\n        return (\n            canvas.probablySupportsContext('webgl', attributes) ||\n            canvas.probablySupportsContext('experimental-webgl', attributes)\n        );\n\n    } else if (canvas.supportsContext) {\n        return (\n            canvas.supportsContext('webgl', attributes) ||\n            canvas.supportsContext('experimental-webgl', attributes)\n        );\n\n    } else {\n        return (\n            canvas.getContext('webgl', attributes) ||\n            canvas.getContext('experimental-webgl', attributes)\n        );\n    }\n}\n","'use strict';\n//      \n\n/**\n * A coordinate is a column, row, zoom combination, often used\n * as the data component of a tile.\n *\n * @param {number} column\n * @param {number} row\n * @param {number} zoom\n * @private\n */\nclass Coordinate {\n                   \n                \n                 \n    constructor(column        , row        , zoom        ) {\n        this.column = column;\n        this.row = row;\n        this.zoom = zoom;\n    }\n\n    /**\n     * Create a clone of this coordinate that can be mutated without\n     * changing the original coordinate\n     *\n     * @returns {Coordinate} clone\n     * @private\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.clone();\n     * // since coord is cloned, modifying a property of c2 does\n     * // not modify it.\n     * c2.zoom = 2;\n     */\n    clone() {\n        return new Coordinate(this.column, this.row, this.zoom);\n    }\n\n    /**\n     * Zoom this coordinate to a given zoom level. This returns a new\n     * coordinate object, not mutating the old one.\n     *\n     * @param {number} zoom\n     * @returns {Coordinate} zoomed coordinate\n     * @private\n     * @example\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.zoomTo(1);\n     * c2 // equals new Coordinate(0, 0, 1);\n     */\n    zoomTo(zoom        ) { return this.clone()._zoomTo(zoom); }\n\n    /**\n     * Subtract the column and row values of this coordinate from those\n     * of another coordinate. The other coordinat will be zoomed to the\n     * same level as `this` before the subtraction occurs\n     *\n     * @param {Coordinate} c other coordinate\n     * @returns {Coordinate} result\n     * @private\n     */\n    sub(c            ) { return this.clone()._sub(c); }\n\n    _zoomTo(zoom        ) {\n        const scale = Math.pow(2, zoom - this.zoom);\n        this.column *= scale;\n        this.row *= scale;\n        this.zoom = zoom;\n        return this;\n    }\n\n    _sub(c            ) {\n        c = c.zoomTo(this.zoom);\n        this.column -= c.column;\n        this.row -= c.row;\n        return this;\n    }\n}\n\nmodule.exports = Coordinate;\n","'use strict';\n\nconst wrap = require('../util/util').wrap;\n\n/**\n * A `LngLat` object represents a given longitude and latitude coordinate, measured in degrees.\n *\n * Mapbox GL uses longitude, latitude coordinate order (as opposed to latitude, longitude) to match GeoJSON.\n *\n * Note that any Mapbox GL method that accepts a `LngLat` object as an argument or option\n * can also accept an `Array` of two numbers and will perform an implicit conversion.\n * This flexible type is documented as [`LngLatLike`](#LngLatLike).\n *\n * @param {number} lng Longitude, measured in degrees.\n * @param {number} lat Latitude, measured in degrees.\n * @example\n * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n * @see [Get coordinates of the mouse pointer](https://www.mapbox.com/mapbox-gl-js/example/mouse-position/)\n * @see [Display a popup](https://www.mapbox.com/mapbox-gl-js/example/popup/)\n * @see [Highlight features within a bounding box](https://www.mapbox.com/mapbox-gl-js/example/using-box-queryrenderedfeatures/)\n * @see [Create a timeline animation](https://www.mapbox.com/mapbox-gl-js/example/timeline-animation/)\n */\nclass LngLat {\n    constructor(lng, lat) {\n        if (isNaN(lng) || isNaN(lat)) {\n            throw new Error(`Invalid LngLat object: (${lng}, ${lat})`);\n        }\n        this.lng = +lng;\n        this.lat = +lat;\n        if (this.lat > 90 || this.lat < -90) {\n            throw new Error('Invalid LngLat latitude value: must be between -90 and 90');\n        }\n    }\n\n    /**\n     * Returns a new `LngLat` object whose longitude is wrapped to the range (-180, 180).\n     *\n     * @returns {LngLat} The wrapped `LngLat` object.\n     * @example\n     * var ll = new mapboxgl.LngLat(286.0251, 40.7736);\n     * var wrapped = ll.wrap();\n     * wrapped.lng; // = -73.9749\n     */\n    wrap() {\n        return new LngLat(wrap(this.lng, -180, 180), this.lat);\n    }\n\n    /**\n     * Returns a new `LngLat` object wrapped to the best world to draw it provided a map `center` `LngLat`.\n     *\n     * When the map is close to the anti-meridian showing a point on world -1 or 1 is a better\n     * choice. The heuristic used is to minimize the distance from the map center to the point.\n     *\n     * Only works where the `LngLat` is wrapped with `LngLat.wrap()` and `center` is within the main world map.\n     *\n     * @param {LngLat} center Map center within the main world.\n     * @return {LngLat} The `LngLat` object in the best world to draw it for the provided map `center`.\n     * @example\n     * var ll = new mapboxgl.LngLat(170, 0);\n     * var mapCenter = new mapboxgl.LngLat(-170, 0);\n     * var snapped = ll.wrapToBestWorld(mapCenter);\n     * snapped; // = { lng: -190, lat: 0 }\n     */\n    wrapToBestWorld(center) {\n        const wrapped = new LngLat(this.lng, this.lat);\n\n        if (Math.abs(this.lng - center.lng) > 180) {\n            if (center.lng < 0) {\n                wrapped.lng -= 360;\n            } else {\n                wrapped.lng += 360;\n            }\n        }\n\n        return wrapped;\n    }\n\n    /**\n     * Returns the coordinates represented as an array of two numbers.\n     *\n     * @returns {Array<number>} The coordinates represeted as an array of longitude and latitude.\n     * @example\n     * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n     * ll.toArray(); // = [-73.9749, 40.7736]\n     */\n    toArray() {\n        return [this.lng, this.lat];\n    }\n\n    /**\n     * Returns the coordinates represent as a string.\n     *\n     * @returns {string} The coordinates represented as a string of the format `'LngLat(lng, lat)'`.\n     * @example\n     * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n     * ll.toString(); // = \"LngLat(-73.9749, 40.7736)\"\n     */\n    toString() {\n        return `LngLat(${this.lng}, ${this.lat})`;\n    }\n}\n\n/**\n * Converts an array of two numbers to a `LngLat` object.\n *\n * If a `LngLat` object is passed in, the function returns it unchanged.\n *\n * @param {LngLatLike} input An array of two numbers to convert, or a `LngLat` object to return.\n * @returns {LngLat} A new `LngLat` object, if a conversion occurred, or the original `LngLat` object.\n * @example\n * var arr = [-73.9749, 40.7736];\n * var ll = mapboxgl.LngLat.convert(arr);\n * ll;   // = LngLat {lng: -73.9749, lat: 40.7736}\n */\nLngLat.convert = function (input) {\n    if (input instanceof LngLat) {\n        return input;\n    } else if (input && input.hasOwnProperty('lng') && input.hasOwnProperty('lat')) {\n        return new LngLat(input.lng, input.lat);\n    } else if (Array.isArray(input) && input.length === 2) {\n        return new LngLat(input[0], input[1]);\n    } else {\n        throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n    }\n};\n\nmodule.exports = LngLat;\n","'use strict';\n\nconst LngLat = require('./lng_lat');\n\n/**\n * A `LngLatBounds` object represents a geographical bounding box,\n * defined by its southwest and northeast points in longitude and latitude.\n *\n * If no arguments are provided to the constructor, a `null` bounding box is created.\n *\n * Note that any Mapbox GL method that accepts a `LngLatBounds` object as an argument or option\n * can also accept an `Array` of two [`LngLatLike`](#LngLatLike) constructs and will perform an implicit conversion.\n * This flexible type is documented as [`LngLatBoundsLike`](#LngLatBoundsLike).\n *\n * @param {LngLatLike} [sw] The southwest corner of the bounding box.\n * @param {LngLatLike} [ne] The northeast corner of the bounding box.\n * @example\n * var sw = new mapboxgl.LngLat(-73.9876, 40.7661);\n * var ne = new mapboxgl.LngLat(-73.9397, 40.8002);\n * var llb = new mapboxgl.LngLatBounds(sw, ne);\n */\nclass LngLatBounds {\n    constructor(sw, ne) {\n        if (!sw) {\n            return;\n        } else if (ne) {\n            this.setSouthWest(sw).setNorthEast(ne);\n        } else if (sw.length === 4) {\n            this.setSouthWest([sw[0], sw[1]]).setNorthEast([sw[2], sw[3]]);\n        } else {\n            this.setSouthWest(sw[0]).setNorthEast(sw[1]);\n        }\n    }\n\n    /**\n     * Set the northeast corner of the bounding box\n     *\n     * @param {LngLatLike} ne\n     * @returns {LngLatBounds} `this`\n     */\n    setNorthEast(ne) {\n        this._ne = LngLat.convert(ne);\n        return this;\n    }\n\n    /**\n     * Set the southwest corner of the bounding box\n     *\n     * @param {LngLatLike} sw\n     * @returns {LngLatBounds} `this`\n     */\n    setSouthWest(sw) {\n        this._sw = LngLat.convert(sw);\n        return this;\n    }\n\n    /**\n     * Extend the bounds to include a given LngLat or LngLatBounds.\n     *\n     * @param {LngLat|LngLatBounds} obj object to extend to\n     * @returns {LngLatBounds} `this`\n     */\n    extend(obj) {\n        const sw = this._sw,\n            ne = this._ne;\n        let sw2, ne2;\n\n        if (obj instanceof LngLat) {\n            sw2 = obj;\n            ne2 = obj;\n\n        } else if (obj instanceof LngLatBounds) {\n            sw2 = obj._sw;\n            ne2 = obj._ne;\n\n            if (!sw2 || !ne2) return this;\n\n        } else {\n            if (Array.isArray(obj)) {\n                if (obj.every(Array.isArray)) {\n                    return this.extend(LngLatBounds.convert(obj));\n                } else {\n                    return this.extend(LngLat.convert(obj));\n                }\n            }\n            return this;\n        }\n\n        if (!sw && !ne) {\n            this._sw = new LngLat(sw2.lng, sw2.lat);\n            this._ne = new LngLat(ne2.lng, ne2.lat);\n\n        } else {\n            sw.lng = Math.min(sw2.lng, sw.lng);\n            sw.lat = Math.min(sw2.lat, sw.lat);\n            ne.lng = Math.max(ne2.lng, ne.lng);\n            ne.lat = Math.max(ne2.lat, ne.lat);\n        }\n\n        return this;\n    }\n\n    /**\n     * Returns the geographical coordinate equidistant from the bounding box's corners.\n     *\n     * @returns {LngLat} The bounding box's center.\n     * @example\n     * var llb = new mapboxgl.LngLatBounds([-73.9876, 40.7661], [-73.9397, 40.8002]);\n     * llb.getCenter(); // = LngLat {lng: -73.96365, lat: 40.78315}\n     */\n    getCenter() {\n        return new LngLat((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);\n    }\n\n    /**\n     * Returns the southwest corner of the bounding box.\n     *\n     * @returns {LngLat} The southwest corner of the bounding box.\n     */\n    getSouthWest() { return this._sw; }\n\n    /**\n    * Returns the northeast corner of the bounding box.\n    *\n    * @returns {LngLat} The northeast corner of the bounding box.\n     */\n    getNorthEast() { return this._ne; }\n\n    /**\n    * Returns the northwest corner of the bounding box.\n    *\n    * @returns {LngLat} The northwest corner of the bounding box.\n     */\n    getNorthWest() { return new LngLat(this.getWest(), this.getNorth()); }\n\n    /**\n    * Returns the southeast corner of the bounding box.\n    *\n    * @returns {LngLat} The southeast corner of the bounding box.\n     */\n    getSouthEast() { return new LngLat(this.getEast(), this.getSouth()); }\n\n    /**\n    * Returns the west edge of the bounding box.\n    *\n    * @returns {number} The west edge of the bounding box.\n     */\n    getWest() { return this._sw.lng; }\n\n    /**\n    * Returns the south edge of the bounding box.\n    *\n    * @returns {number} The south edge of the bounding box.\n     */\n    getSouth() { return this._sw.lat; }\n\n    /**\n    * Returns the east edge of the bounding box.\n    *\n    * @returns {number} The east edge of the bounding box.\n     */\n    getEast() { return this._ne.lng; }\n\n    /**\n    * Returns the north edge of the bounding box.\n    *\n    * @returns {number} The north edge of the bounding box.\n     */\n    getNorth() { return this._ne.lat; }\n\n    /**\n     * Returns the bounding box represented as an array.\n     *\n     * @returns {Array<Array<number>>} The bounding box represented as an array, consisting of the\n     *   southwest and northeast coordinates of the bounding represented as arrays of numbers.\n     * @example\n     * var llb = new mapboxgl.LngLatBounds([-73.9876, 40.7661], [-73.9397, 40.8002]);\n     * llb.toArray(); // = [[-73.9876, 40.7661], [-73.9397, 40.8002]]\n     */\n    toArray () {\n        return [this._sw.toArray(), this._ne.toArray()];\n    }\n\n    /**\n     * Return the bounding box represented as a string.\n     *\n     * @returns {string} The bounding box represents as a string of the format\n     *   `'LngLatBounds(LngLat(lng, lat), LngLat(lng, lat))'`.\n     * @example\n     * var llb = new mapboxgl.LngLatBounds([-73.9876, 40.7661], [-73.9397, 40.8002]);\n     * llb.toString(); // = \"LngLatBounds(LngLat(-73.9876, 40.7661), LngLat(-73.9397, 40.8002))\"\n     */\n    toString () {\n        return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`;\n    }\n}\n\n/**\n * Converts an array to a `LngLatBounds` object.\n *\n * If a `LngLatBounds` object is passed in, the function returns it unchanged.\n *\n * Internally, the function calls `LngLat#convert` to convert arrays to `LngLat` values.\n *\n * @param {LngLatBoundsLike} input An array of two coordinates to convert, or a `LngLatBounds` object to return.\n * @returns {LngLatBounds} A new `LngLatBounds` object, if a conversion occurred, or the original `LngLatBounds` object.\n * @example\n * var arr = [[-73.9876, 40.7661], [-73.9397, 40.8002]];\n * var llb = mapboxgl.LngLatBounds.convert(arr);\n * llb;   // = LngLatBounds {_sw: LngLat {lng: -73.9876, lat: 40.7661}, _ne: LngLat {lng: -73.9397, lat: 40.8002}}\n */\nLngLatBounds.convert = function (input) {\n    if (!input || input instanceof LngLatBounds) return input;\n    return new LngLatBounds(input);\n};\n\nmodule.exports = LngLatBounds;\n","'use strict';\n\nconst LngLatBounds = require('../geo/lng_lat_bounds');\nconst clamp = require('../util/util').clamp;\n\nclass TileBounds {\n    constructor(bounds, minzoom, maxzoom) {\n        this.bounds = LngLatBounds.convert(bounds);\n        this.minzoom = minzoom || 0;\n        this.maxzoom = maxzoom || 24;\n    }\n\n    contains(coord, maxzoom) {\n        // TileCoord returns incorrect z for overscaled tiles, so we use this\n        // to make sure overzoomed tiles still get displayed.\n        const tileZ = maxzoom ? Math.min(coord.z, maxzoom) : coord.z;\n\n        const level = {\n            minX: Math.floor(this.lngX(this.bounds.getWest(), tileZ)),\n            minY: Math.floor(this.latY(this.bounds.getNorth(), tileZ)),\n            maxX: Math.ceil(this.lngX(this.bounds.getEast(), tileZ)),\n            maxY: Math.ceil(this.latY(this.bounds.getSouth(), tileZ))\n        };\n        const hit = coord.x >= level.minX && coord.x < level.maxX && coord.y >= level.minY && coord.y < level.maxY;\n        return hit;\n    }\n\n    lngX(lng, zoom) {\n        return (lng + 180) * (Math.pow(2, zoom) / 360);\n    }\n\n    latY(lat, zoom) {\n        const f = clamp(Math.sin(Math.PI / 180 * lat), -0.9999, 0.9999);\n        const scale = Math.pow(2, zoom) / (2 * Math.PI);\n        return Math.pow(2, zoom - 1) + 0.5 * Math.log((1 + f) / (1 - f)) * -scale;\n    }\n}\n\nmodule.exports = TileBounds;\n","'use strict';\n\nconst window = require('./window');\n\nclass AJAXError extends Error {\n    constructor(message, status) {\n        super(message);\n        this.status = status;\n    }\n}\n\nexports.getJSON = function(url, callback) {\n    const xhr = new window.XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.setRequestHeader('Accept', 'application/json');\n    xhr.onerror = function(e) {\n        callback(e);\n    };\n    xhr.onload = function() {\n        if (xhr.status >= 200 && xhr.status < 300 && xhr.response) {\n            let data;\n            try {\n                data = JSON.parse(xhr.response);\n            } catch (err) {\n                return callback(err);\n            }\n            callback(null, data);\n        } else {\n            callback(new AJAXError(xhr.statusText, xhr.status));\n        }\n    };\n    xhr.send();\n    return xhr;\n};\n\nexports.getArrayBuffer = function(url, callback) {\n    const xhr = new window.XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'arraybuffer';\n    xhr.onerror = function(e) {\n        callback(e);\n    };\n    xhr.onload = function() {\n        if (xhr.response.byteLength === 0 && xhr.status === 200) {\n            return callback(new Error('http status 200 returned without content.'));\n        }\n        if (xhr.status >= 200 && xhr.status < 300 && xhr.response) {\n            callback(null, {\n                data: xhr.response,\n                cacheControl: xhr.getResponseHeader('Cache-Control'),\n                expires: xhr.getResponseHeader('Expires')\n            });\n        } else {\n            callback(new AJAXError(xhr.statusText, xhr.status));\n        }\n    };\n    xhr.send();\n    return xhr;\n};\n\nfunction sameOrigin(url) {\n    const a = window.document.createElement('a');\n    a.href = url;\n    return a.protocol === window.document.location.protocol && a.host === window.document.location.host;\n}\n\nconst transparentPngUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=';\n\nexports.getImage = function(url, callback) {\n    // request the image with XHR to work around caching issues\n    // see https://github.com/mapbox/mapbox-gl-js/issues/1470\n    return exports.getArrayBuffer(url, (err, imgData) => {\n        if (err) return callback(err);\n        const img = new window.Image();\n        const URL = window.URL || window.webkitURL;\n        img.onload = () => {\n            callback(null, img);\n            URL.revokeObjectURL(img.src);\n        };\n        const blob = new window.Blob([new Uint8Array(imgData.data)], { type: 'image/png' });\n        img.cacheControl = imgData.cacheControl;\n        img.expires = imgData.expires;\n        img.src = imgData.data.byteLength ? URL.createObjectURL(blob) : transparentPngUrl;\n    });\n};\n\nexports.getVideo = function(urls, callback) {\n    const video = window.document.createElement('video');\n    video.onloadstart = function() {\n        callback(null, video);\n    };\n    for (let i = 0; i < urls.length; i++) {\n        const s = window.document.createElement('source');\n        if (!sameOrigin(urls[i])) {\n            video.crossOrigin = 'Anonymous';\n        }\n        s.src = urls[i];\n        video.appendChild(s);\n    }\n    return video;\n};\n","'use strict';\n\n/**\n * @module browser\n * @private\n */\n\nconst window = require('./window');\n\n/**\n * Provides a function that outputs milliseconds: either performance.now()\n * or a fallback to Date.now()\n */\nmodule.exports.now = (function() {\n    if (window.performance &&\n        window.performance.now) {\n        return window.performance.now.bind(window.performance);\n    } else {\n        return Date.now.bind(Date);\n    }\n}());\n\nconst frame = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame;\n\nexports.frame = function(fn) {\n    return frame(fn);\n};\n\nconst cancel = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.msCancelAnimationFrame;\n\nexports.cancelFrame = function(id) {\n    cancel(id);\n};\n\nexports.timed = function (fn, dur, ctx) {\n    if (!dur) {\n        fn.call(ctx, 1);\n        return null;\n    }\n\n    let abort = false;\n    const start = module.exports.now();\n\n    function tick(now) {\n        if (abort) return;\n        now = module.exports.now();\n\n        if (now >= start + dur) {\n            fn.call(ctx, 1);\n        } else {\n            fn.call(ctx, (now - start) / dur);\n            exports.frame(tick);\n        }\n    }\n\n    exports.frame(tick);\n\n    return function() { abort = true; };\n};\n\nexports.getImageData = function (img) {\n    const canvas = window.document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    context.drawImage(img, 0, 0, img.width, img.height);\n    return context.getImageData(0, 0, img.width, img.height).data;\n};\n\n/**\n * Test if the current browser supports Mapbox GL JS\n * @param {Object} options\n * @param {boolean} [options.failIfMajorPerformanceCaveat=false] Return `false`\n *   if the performance of Mapbox GL JS would be dramatically worse than\n *   expected (i.e. a software renderer would be used)\n * @return {boolean}\n */\nexports.supported = require('mapbox-gl-supported');\n\nexports.hardwareConcurrency = window.navigator.hardwareConcurrency || 4;\n\nObject.defineProperty(exports, 'devicePixelRatio', {\n    get: function() { return window.devicePixelRatio; }\n});\n\nexports.supportsWebp = false;\n\nconst webpImgTest = window.document.createElement('img');\nwebpImgTest.onload = function() {\n    exports.supportsWebp = true;\n};\nwebpImgTest.src = 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';\n","'use strict';\n\n/* eslint-env browser */\nmodule.exports = self;\n","'use strict';\n\nconst util = require('./util');\n\nfunction _addEventListener(type, listener, listenerList) {\n    listenerList[type] = listenerList[type] || [];\n    listenerList[type].push(listener);\n}\n\nfunction _removeEventListener(type, listener, listenerList) {\n    if (listenerList && listenerList[type]) {\n        const index = listenerList[type].indexOf(listener);\n        if (index !== -1) {\n            listenerList[type].splice(index, 1);\n        }\n    }\n}\n\n/**\n * Methods mixed in to other classes for event capabilities.\n *\n * @mixin Evented\n */\nclass Evented {\n\n    /**\n     * Adds a listener to a specified event type.\n     *\n     * @param {string} type The event type to add a listen for.\n     * @param {Function} listener The function to be called when the event is fired.\n     *   The listener function is called with the data object passed to `fire`,\n     *   extended with `target` and `type` properties.\n     * @returns {Object} `this`\n     */\n    on(type, listener) {\n        this._listeners = this._listeners || {};\n        _addEventListener(type, listener, this._listeners);\n\n        return this;\n    }\n\n    /**\n     * Removes a previously registered event listener.\n     *\n     * @param {string} type The event type to remove listeners for.\n     * @param {Function} listener The listener function to remove.\n     * @returns {Object} `this`\n     */\n    off(type, listener) {\n        _removeEventListener(type, listener, this._listeners);\n        _removeEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    /**\n     * Adds a listener that will be called only once to a specified event type.\n     *\n     * The listener will be called first time the event fires after the listener is registered.\n     *\n     * @param {string} type The event type to listen for.\n     * @param {Function} listener The function to be called when the event is fired the first time.\n     * @returns {Object} `this`\n     */\n    once(type, listener) {\n        this._oneTimeListeners = this._oneTimeListeners || {};\n        _addEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    /**\n     * Fires an event of the specified type.\n     *\n     * @param {string} type The type of event to fire.\n     * @param {Object} [data] Data to be passed to any listeners.\n     * @returns {Object} `this`\n     */\n    fire(type, data) {\n        if (this.listens(type)) {\n            data = util.extend({}, data, {type: type, target: this});\n\n            // make sure adding or removing listeners inside other listeners won't cause an infinite loop\n            const listeners = this._listeners && this._listeners[type] ? this._listeners[type].slice() : [];\n\n            for (let i = 0; i < listeners.length; i++) {\n                listeners[i].call(this, data);\n            }\n\n            const oneTimeListeners = this._oneTimeListeners && this._oneTimeListeners[type] ? this._oneTimeListeners[type].slice() : [];\n\n            for (let i = 0; i < oneTimeListeners.length; i++) {\n                oneTimeListeners[i].call(this, data);\n                _removeEventListener(type, oneTimeListeners[i], this._oneTimeListeners);\n            }\n\n            if (this._eventedParent) {\n                this._eventedParent.fire(type, util.extend({}, data, typeof this._eventedParentData === 'function' ? this._eventedParentData() : this._eventedParentData));\n            }\n\n        // To ensure that no error events are dropped, print them to the\n        // console if they have no listeners.\n        } else if (util.endsWith(type, 'error')) {\n            console.error((data && data.error) || data || 'Empty error event');\n        }\n\n        return this;\n    }\n\n    /**\n     * Returns a true if this instance of Evented or any forwardeed instances of Evented have a listener for the specified type.\n     *\n     * @param {string} type The event type\n     * @returns {boolean} `true` if there is at least one registered listener for specified event type, `false` otherwise\n     */\n    listens(type) {\n        return (\n            (this._listeners && this._listeners[type] && this._listeners[type].length > 0) ||\n            (this._oneTimeListeners && this._oneTimeListeners[type] && this._oneTimeListeners[type].length > 0) ||\n            (this._eventedParent && this._eventedParent.listens(type))\n        );\n    }\n\n    /**\n     * Bubble all events fired by this instance of Evented to this parent instance of Evented.\n     *\n     * @private\n     * @param {parent}\n     * @param {data}\n     * @returns {Object} `this`\n     */\n    setEventedParent(parent, data) {\n        this._eventedParent = parent;\n        this._eventedParentData = data;\n\n        return this;\n    }\n}\n\nmodule.exports = Evented;\n","'use strict';\n//      \n\nconst UnitBezier = require('@mapbox/unitbezier');\nconst Coordinate = require('../geo/coordinate');\nconst Point = require('point-geometry');\n\n/**\n * Given a value `t` that varies between 0 and 1, return\n * an interpolation function that eases between 0 and 1 in a pleasing\n * cubic in-out fashion.\n *\n * @private\n */\nexports.easeCubicInOut = function(t        )         {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    const t2 = t * t,\n        t3 = t2 * t;\n    return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n};\n\n/**\n * Given given (x, y), (x1, y1) control points for a bezier curve,\n * return a function that interpolates along that curve.\n *\n * @param p1x control point 1 x coordinate\n * @param p1y control point 1 y coordinate\n * @param p2x control point 2 x coordinate\n * @param p2y control point 2 y coordinate\n * @private\n */\nexports.bezier = function(p1x        , p1y        , p2x        , p2y        )                        {\n    const bezier = new UnitBezier(p1x, p1y, p2x, p2y);\n    return function(t        ) {\n        return bezier.solve(t);\n    };\n};\n\n/**\n * A default bezier-curve powered easing function with\n * control points (0.25, 0.1) and (0.25, 1)\n *\n * @private\n */\nexports.ease = exports.bezier(0.25, 0.1, 0.25, 1);\n\n/**\n * constrain n to the given range via min + max\n *\n * @param n value\n * @param min the minimum value to be returned\n * @param max the maximum value to be returned\n * @returns the clamped value\n * @private\n */\nexports.clamp = function (n        , min        , max        )         {\n    return Math.min(max, Math.max(min, n));\n};\n\n/**\n * constrain n to the given range, excluding the minimum, via modular arithmetic\n *\n * @param n value\n * @param min the minimum value to be returned, exclusive\n * @param max the maximum value to be returned, inclusive\n * @returns constrained number\n * @private\n */\nexports.wrap = function (n        , min        , max        )         {\n    const d = max - min;\n    const w = ((n - min) % d + d) % d + min;\n    return (w === min) ? max : w;\n};\n\n/*\n * Call an asynchronous function on an array of arguments,\n * calling `callback` with the completed results of all calls.\n *\n * @param array input to each call of the async function.\n * @param fn an async function with signature (data, callback)\n * @param callback a callback run after all async work is done.\n * called with an array, containing the results of each async call.\n * @private\n */\nexports.asyncAll = function (array            , fn          , callback          ) {\n    if (!array.length) { return callback(null, []); }\n    let remaining = array.length;\n    const results = new Array(array.length);\n    let error = null;\n    array.forEach((item, i) => {\n        fn(item, (err, result) => {\n            if (err) error = err;\n            results[i] = result;\n            if (--remaining === 0) callback(error, results);\n        });\n    });\n};\n\n/*\n * Polyfill for Object.values. Not fully spec compliant, but we don't\n * need it to be.\n *\n * @private\n */\nexports.values = function (obj        )                {\n    const result = [];\n    for (const k in obj) {\n        result.push(obj[k]);\n    }\n    return result;\n};\n\n/*\n * Compute the difference between the keys in one object and the keys\n * in another object.\n *\n * @returns keys difference\n * @private\n */\nexports.keysDifference = function (obj        , other        )                {\n    const difference = [];\n    for (const i in obj) {\n        if (!(i in other)) {\n            difference.push(i);\n        }\n    }\n    return difference;\n};\n\n/**\n * Given a destination object and optionally many source objects,\n * copy all properties from the source objects into the destination.\n * The last source object given overrides properties from previous\n * source objects.\n *\n * @param dest destination object\n * @param {...Object} sources sources from which properties are pulled\n * @private\n */\n// eslint-disable-next-line no-unused-vars\nexports.extend = function (dest        , source0        , source1         , source2         )         {\n    for (let i = 1; i < arguments.length; i++) {\n        const src = arguments[i];\n        for (const k in src) {\n            dest[k] = src[k];\n        }\n    }\n    return dest;\n};\n\n/**\n * Given an object and a number of properties as strings, return version\n * of that object with only those properties.\n *\n * @param src the object\n * @param properties an array of property names chosen\n * to appear on the resulting object.\n * @returns object with limited properties.\n * @example\n * var foo = { name: 'Charlie', age: 10 };\n * var justName = pick(foo, ['name']);\n * // justName = { name: 'Charlie' }\n * @private\n */\nexports.pick = function (src        , properties               )         {\n    const result = {};\n    for (let i = 0; i < properties.length; i++) {\n        const k = properties[i];\n        if (k in src) {\n            result[k] = src[k];\n        }\n    }\n    return result;\n};\n\nlet id = 1;\n\n/**\n * Return a unique numeric id, starting at 1 and incrementing with\n * each call.\n *\n * @returns unique numeric id.\n * @private\n */\nexports.uniqueId = function ()         {\n    return id++;\n};\n\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n *\n * @param fns list of member function names\n * @param context the context value\n * @example\n * function MyClass() {\n *   bindAll(['ontimer'], this);\n *   this.name = 'Tom';\n * }\n * MyClass.prototype.ontimer = function() {\n *   alert(this.name);\n * };\n * var myClass = new MyClass();\n * setTimeout(myClass.ontimer, 100);\n * @private\n */\nexports.bindAll = function(fns               , context        )       {\n    fns.forEach((fn) => {\n        if (!context[fn]) { return; }\n        context[fn] = context[fn].bind(context);\n    });\n};\n\n/**\n * Given a list of coordinates, get their center as a coordinate.\n *\n * @returns centerpoint\n * @private\n */\nexports.getCoordinatesCenter = function(coords                   )             {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    for (let i = 0; i < coords.length; i++) {\n        minX = Math.min(minX, coords[i].column);\n        minY = Math.min(minY, coords[i].row);\n        maxX = Math.max(maxX, coords[i].column);\n        maxY = Math.max(maxY, coords[i].row);\n    }\n\n    const dx = maxX - minX;\n    const dy = maxY - minY;\n    const dMax = Math.max(dx, dy);\n    const zoom = Math.max(0, Math.floor(-Math.log(dMax) / Math.LN2));\n    return new Coordinate((minX + maxX) / 2, (minY + maxY) / 2, 0)\n        .zoomTo(zoom);\n};\n\n/**\n * Determine if a string ends with a particular substring\n *\n * @private\n */\nexports.endsWith = function(string        , suffix        )          {\n    return string.indexOf(suffix, string.length - suffix.length) !== -1;\n};\n\n/**\n * Create an object by mapping all the values of an existing object while\n * preserving their keys.\n *\n * @private\n */\nexports.mapObject = function(input        , iterator          , context         )         {\n    const output = {};\n    for (const key in input) {\n        output[key] = iterator.call(context || this, input[key], key, input);\n    }\n    return output;\n};\n\n/**\n * Create an object by filtering out values of an existing object.\n *\n * @private\n */\nexports.filterObject = function(input        , iterator          , context         )         {\n    const output = {};\n    for (const key in input) {\n        if (iterator.call(context || this, input[key], key, input)) {\n            output[key] = input[key];\n        }\n    }\n    return output;\n};\n\n/**\n * Deeply compares two object literals.\n *\n * @private\n */\nexports.deepEqual = function(a        , b        )          {\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) return false;\n        for (let i = 0; i < a.length; i++) {\n            if (!exports.deepEqual(a[i], b[i])) return false;\n        }\n        return true;\n    }\n    if (typeof a === 'object' && a !== null && b !== null) {\n        if (!(typeof b === 'object')) return false;\n        const keys = Object.keys(a);\n        if (keys.length !== Object.keys(b).length) return false;\n        for (const key in a) {\n            if (!exports.deepEqual(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a === b;\n};\n\n/**\n * Deeply clones two objects.\n *\n * @private\n */\nexports.clone = function   (input   )    {\n    if (Array.isArray(input)) {\n        return input.map(exports.clone);\n    } else if (typeof input === 'object' && input) {\n        return ((exports.mapObject(input, exports.clone)     )   );\n    } else {\n        return input;\n    }\n};\n\n/**\n * Check if two arrays have at least one common element.\n *\n * @private\n */\nexports.arraysIntersect = function(a            , b            )          {\n    for (let l = 0; l < a.length; l++) {\n        if (b.indexOf(a[l]) >= 0) return true;\n    }\n    return false;\n};\n\n/**\n * Print a warning message to the console and ensure duplicate warning messages\n * are not printed.\n *\n * @private\n */\nconst warnOnceHistory = {};\nexports.warnOnce = function(message        )       {\n    if (!warnOnceHistory[message]) {\n        // console isn't defined in some WebWorkers, see #2558\n        if (typeof console !== \"undefined\") console.warn(message);\n        warnOnceHistory[message] = true;\n    }\n};\n\n/**\n * Indicates if the provided Points are in a counter clockwise (true) or clockwise (false) order\n *\n * @returns true for a counter clockwise set of points\n */\n// http://bryceboe.com/2006/10/23/line-segment-intersection-algorithm/\nexports.isCounterClockwise = function(a       , b       , c       )          {\n    return (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x);\n};\n\n/**\n * Returns the signed area for the polygon ring.  Postive areas are exterior rings and\n * have a clockwise winding.  Negative areas are interior rings and have a counter clockwise\n * ordering.\n *\n * @param ring Exterior or interior ring\n */\nexports.calculateSignedArea = function(ring              )         {\n    let sum = 0;\n    for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n};\n\n/**\n * Detects closed polygons, first + last point are equal\n *\n * @param points array of points\n * @return true if the points are a closed polygon\n */\nexports.isClosedPolygon = function(points              )          {\n    // If it is 2 points that are the same then it is a point\n    // If it is 3 points with start and end the same then it is a line\n    if (points.length < 4)\n        return false;\n\n    const p1 = points[0];\n    const p2 = points[points.length - 1];\n\n    if (Math.abs(p1.x - p2.x) > 0 ||\n        Math.abs(p1.y - p2.y) > 0) {\n        return false;\n    }\n\n    // polygon simplification can produce polygons with zero area and more than 3 points\n    return (Math.abs(exports.calculateSignedArea(points)) > 0.01);\n};\n\n/**\n * Converts spherical coordinates to cartesian coordinates.\n *\n * @param spherical Spherical coordinates, in [radial, azimuthal, polar]\n * @return cartesian coordinates in [x, y, z]\n */\n\nexports.sphericalToCartesian = function(spherical               )                {\n    const r = spherical[0];\n    let azimuthal = spherical[1],\n        polar = spherical[2];\n    // We abstract \"north\"/\"up\" (compass-wise) to be 0° when really this is 90° (π/2):\n    // correct for that here\n    azimuthal += 90;\n\n    // Convert azimuthal and polar angles to radians\n    azimuthal *= Math.PI / 180;\n    polar *= Math.PI / 180;\n\n    // spherical to cartesian (x, y, z)\n    return [\n        r * Math.cos(azimuthal) * Math.sin(polar),\n        r * Math.sin(azimuthal) * Math.sin(polar),\n        r * Math.cos(polar)\n    ];\n};\n\n/**\n * Parses data from 'Cache-Control' headers.\n *\n * @param cacheControl Value of 'Cache-Control' header\n * @return object containing parsed header info.\n */\n\nexports.parseCacheControl = function(cacheControl        )         {\n    // Taken from [Wreck](https://github.com/hapijs/wreck)\n    const re = /(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g;\n\n    const header = {};\n    cacheControl.replace(re, ($0, $1, $2, $3) => {\n        const value = $2 || $3;\n        header[$1] = value ? value.toLowerCase() : true;\n        return '';\n    });\n\n    if (header['max-age']) {\n        const maxAge = parseInt(header['max-age'], 10);\n        if (isNaN(maxAge)) delete header['max-age'];\n        else header['max-age'] = maxAge;\n    }\n\n    return header;\n};\n","'use strict';\n\nmodule.exports = Point;\n\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n    clone: function() { return new Point(this.x, this.y); },\n\n    add:     function(p) { return this.clone()._add(p);     },\n    sub:     function(p) { return this.clone()._sub(p);     },\n    mult:    function(k) { return this.clone()._mult(k);    },\n    div:     function(k) { return this.clone()._div(k);     },\n    rotate:  function(a) { return this.clone()._rotate(a);  },\n    matMult: function(m) { return this.clone()._matMult(m); },\n    unit:    function() { return this.clone()._unit(); },\n    perp:    function() { return this.clone()._perp(); },\n    round:   function() { return this.clone()._round(); },\n\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    equals: function(p) {\n        return this.x === p.x &&\n               this.y === p.y;\n    },\n\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    // Find the angle of the two vectors, solving the formula for the cross product a x b = |a||b|sin(θ) for θ.\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n// constructs Point from an array if necessary\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","'use strict';\n\nconst util = require('mapbox-gl/src/util/util');\nconst ajax = require('mapbox-gl/src/util/ajax');\nconst Evented = require('mapbox-gl/src/util/evented');\nconst loadArcGISMapServer = require('./load_arcgis_mapserver');\nconst TileBounds = require('mapbox-gl/src/source/tile_bounds');\n\n//From https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\nconst _templateRe = /\\{ *([\\w_]+) *\\}/g;\nconst _template = function (str, data) {\n    return str.replace(_templateRe, (str, key) => {\n        let value = data[key];\n\n        if (value === undefined) {\n            throw new Error(`No value provided for variable ${str}`);\n\n        } else if (typeof value === 'function') {\n            value = value(data);\n        }\n        return value;\n    });\n};\n\n//From https://github.com/Leaflet/Leaflet/blob/master/src/layer/tile/TileLayer.js\nconst _getSubdomain = function (tilePoint, subdomains) {\n    if (subdomains) {\n        const index = Math.abs(tilePoint.x + tilePoint.y) % subdomains.length;\n        return subdomains[index];\n    }\n    return null;\n};\n\nclass ArcGISTiledMapServiceSource extends Evented {\n\n    constructor(id, options, dispatcher, eventedParent) {\n        super();\n        this.id = id;\n        this.dispatcher = dispatcher;\n        this.setEventedParent(eventedParent);\n\n        this.type = 'arcgisraster';\n        this.minzoom = 0;\n        this.maxzoom = 22;\n        this.roundZoom = true;\n        this.tileSize = 512;\n        this._loaded = false;\n        this.options = options;\n        util.extend(this, util.pick(options, ['url', 'scheme', 'tileSize']));\n    }\n\n    load() {\n        this.fire('dataloading', {dataType: 'source'});\n        loadArcGISMapServer(this.options, (err, metadata) => {\n            if (err) {\n                return this.fire('error', err);\n            }\n            util.extend(this, metadata);\n            this.setBounds(metadata.bounds);\n\n            // `content` is included here to prevent a race condition where `Style#_updateSources` is called\n            // before the TileJSON arrives. this makes sure the tiles needed are loaded once TileJSON arrives\n            // ref: https://github.com/mapbox/mapbox-gl-js/pull/4347#discussion_r104418088\n            this.fire('data', {dataType: 'source', sourceDataType: 'metadata'});\n            this.fire('data', {dataType: 'source', sourceDataType: 'content'});\n\n        });\n    }\n\n    onAdd(map) {\n        // set the urls\n        const baseUrl = this.url.split('?')[0];\n        this.tileUrl = `${baseUrl} /tile/{z}/{y}/{x}`;\n\n        const arcgisonline = new RegExp(/tiles.arcgis(online)?\\.com/g);\n        if (arcgisonline.test(this.url)) {\n            this.tileUrl = this.tileUrl.replace('://tiles', '://tiles{s}');\n            this.subdomains = ['1', '2', '3', '4'];\n        }\n\n        if (this.token) {\n            this.tileUrl += (`?token=${this.token}`);\n        }\n        this.load();\n        this.map = map;\n    }\n\n    setBounds(bounds) {\n        this.bounds = bounds;\n        if (bounds) {\n            this.tileBounds = new TileBounds(bounds, this.minzoom, this.maxzoom);\n        }\n    }\n\n    serialize() {\n        return {\n            type: 'arcgisraster',\n            url: this.url,\n            tileSize: this.tileSize,\n            tiles: this.tiles,\n            bounds: this.bounds,\n        };\n    }\n\n    hasTile(coord) {\n        return !this.tileBounds || this.tileBounds.contains(coord, this.maxzoom);\n    }\n\n    loadTile(tile, callback) {\n        //convert to ags coords\n        const tilePoint = tile.coord;\n        const url =  _template(this.tileUrl, util.extend({\n            s: _getSubdomain(tilePoint, this.subdomains),\n            z: (this._lodMap && this._lodMap[tilePoint.z]) ? this._lodMap[tilePoint.z] : tilePoint.z, // try lod map first, then just defualt to zoom level\n            x: tilePoint.x,\n            y: tilePoint.y\n        }, this.options));\n        tile.request = ajax.getImage(url, done.bind(this));\n\n        function done(err, img) {\n            delete tile.request;\n\n            if (tile.aborted) {\n                this.state = 'unloaded';\n                return callback(null);\n            }\n\n            if (err) {\n                this.state = 'errored';\n                return callback(err);\n            }\n\n            if (this.map._refreshExpiredTiles) tile.setExpiryData(img);\n            delete img.cacheControl;\n            delete img.expires;\n\n            const gl = this.map.painter.gl;\n            tile.texture = this.map.painter.getTileTexture(img.width);\n            if (tile.texture) {\n                gl.bindTexture(gl.TEXTURE_2D, tile.texture);\n                gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, img);\n            } else {\n                tile.texture = gl.createTexture();\n                gl.bindTexture(gl.TEXTURE_2D, tile.texture);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n                if (this.map.painter.extTextureFilterAnisotropic) {\n                    gl.texParameterf(gl.TEXTURE_2D, this.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, this.map.painter.extTextureFilterAnisotropicMax);\n                }\n\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\n                tile.texture.size = img.width;\n            }\n            gl.generateMipmap(gl.TEXTURE_2D);\n\n            tile.state = 'loaded';\n\n            callback(null);\n        }\n    }\n\n    abortTile(tile) {\n        if (tile.request) {\n            tile.request.abort();\n            delete tile.request;\n        }\n    }\n\n    unloadTile(tile) {\n        if (tile.texture) this.map.painter.saveTileTexture(tile.texture);\n    }\n}\n\nmodule.exports = ArcGISTiledMapServiceSource;\n","const ArcGISTiledMapServiceSource = require('./arcgis_tiled_map_service_source');\nmodule.exports = ArcGISTiledMapServiceSource;","'use strict';\nconst util = require('mapbox-gl/src/util/util');\nconst ajax = require('mapbox-gl/src/util/ajax');\nconst browser = require('mapbox-gl/src/util/browser');\nconst SphericalMercator = require('@mapbox/sphericalmercator');\n\n//Contains code from esri-leaflet https://github.com/Esri/esri-leaflet\nconst MercatorZoomLevels = {\n    '0': 156543.03392799999,\n    '1': 78271.516963999893,\n    '2': 39135.758482000099,\n    '3': 19567.879240999901,\n    '4': 9783.9396204999593,\n    '5': 4891.9698102499797,\n    '6': 2445.9849051249898,\n    '7': 1222.9924525624899,\n    '8': 611.49622628138002,\n    '9': 305.74811314055802,\n    '10': 152.874056570411,\n    '11': 76.437028285073197,\n    '12': 38.218514142536598,\n    '13': 19.109257071268299,\n    '14': 9.5546285356341496,\n    '15': 4.7773142679493699,\n    '16': 2.38865713397468,\n    '17': 1.1943285668550501,\n    '18': 0.59716428355981699,\n    '19': 0.29858214164761698,\n    '20': 0.14929107082381,\n    '21': 0.07464553541191,\n    '22': 0.0373227677059525,\n    '23': 0.0186613838529763\n};\n\nconst _withinPercentage = function (a, b, percentage) {\n    const diff = Math.abs((a / b) - 1);\n    return diff < percentage;\n};\n\nmodule.exports = function(options, callback) {\n    const loaded = function(err, metadata) {\n        if (err) {\n            return callback(err);\n        }\n\n        const result = util.pick(metadata,\n            ['tileInfo', 'initialExtent', 'fullExtent', 'spatialReference', 'tileServers', 'documentInfo']);\n\n        result._lodMap = {};\n        const zoomOffsetAllowance = 0.1;\n        const sr = metadata.spatialReference.latestWkid || metadata.spatialReference.wkid;\n        if (sr === 102100 || sr === 3857) {\n\n            /*\n            Example extent from ArcGIS REST API\n            fullExtent: {\n            xmin: -9144791.679226127,\n            ymin: -2195190.961437726,\n            xmax: -4650987.072019983,\n            ymax: 1118113.110155766,\n            spatialReference: {\n            wkid: 102100,\n            wkt: null\n            }\n            },\n            */\n            //convert ArcGIS extent to bounds\n            const extent = metadata.fullExtent;\n            if (extent && extent.spatialReference && extent.spatialReference.wkid ===  102100) {\n                const boundsWebMercator = [extent.xmin, extent.ymin, extent.xmax, extent.ymax];\n                var merc = new SphericalMercator({\n                    size: 256\n                });\n                const boundsWGS84 = merc.convert(boundsWebMercator);\n                result.bounds = boundsWGS84;\n            }\n\n            // create the zoom level data\n            const arcgisLODs = metadata.tileInfo.lods;\n            const correctResolutions = MercatorZoomLevels;\n            result.minzoom = arcgisLODs[0].level;\n            result.maxzoom = arcgisLODs[arcgisLODs.length - 1].level;\n            for (let i = 0; i < arcgisLODs.length; i++) {\n                const arcgisLOD = arcgisLODs[i];\n                for (const ci in correctResolutions) {\n                    const correctRes = correctResolutions[ci];\n\n                    if (_withinPercentage(arcgisLOD.resolution, correctRes, zoomOffsetAllowance)) {\n                        result._lodMap[ci] = arcgisLOD.level;\n                        break;\n                    }\n                }\n            }\n        } else {\n            callback(new Error('non-mercator spatial reference'));\n        }\n\n        callback(null, result);\n    };\n\n    if (options.url) {\n        ajax.getJSON(options.url, loaded);\n    } else {\n        browser.frame(loaded.bind(null, null, options));\n    }\n};\n"]}