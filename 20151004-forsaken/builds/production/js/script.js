!function t(e,n,o){function s(r,a){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+r+"'")}var c=n[r]={exports:{}};e[r][0].call(c.exports,function(t){var n=e[r][1][t];return s(n||t)},c,c.exports,t,e,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)s(o[r]);return s}({1:[function(t,e,n){d3.json("./data/waitlist.json",function(t,e){function n(t){u.selectAll("path").classed("faded",!1).classed("active",r&&function(t){return t===r})}function o(t){var e,n,o;if(t&&r!==t){var s=d.centroid(t);e=s[0],n=s[1],o=1,r=t}else e=a/2,n=l/2,o=1,r=null;u.selectAll("path").classed("faded",!1).classed("active",r&&function(t){return t===r}),u.transition().duration(750).attr("transform","translate("+a/2+","+l/2+")scale("+o+")translate("+-e+","+-n+")").style("stroke-width",1.5/o+"px")}var s=e.waitlist,i=$("#map svg");$(window).on("resize",function(){var t=i.parent().width();i.attr("width",t),i.attr("height",t/1)});var r,a=350,l=350,c=d3.geo.albersUsa().scale(5037).translate([50,970]),d=d3.geo.path().projection(c),p=d3.select("#map svg").attr("width",a).attr("height",l);p.append("rect").attr("class","background").attr("width",a).attr("height",l);var u=p.append("g"),f=document.getElementById("infobox"),v="#b36e74",h="#f7bd9c",b="#dea98b",m="#c4967c",y="#ab836c",g="#916f5c";d3.json("shapefiles/counties.json",function(t,e){u.append("g").attr("id","states").selectAll("path").data(e.features).enter().append("path").attr("d",d).on("click",n).style("fill",function(t){for(var e=0;e<87;e++)if(t.properties.COUNTYNAME==s[e].county)return s[e].pct_unspent>30?g:s[e].pct_unspent>20?y:s[e].pct_unspent>15?m:s[e].pct_unspent>10?b:s[e].pct_unspent>0?h:s[e].pct_unspent<0?v:"#ddd"}).on("mousedown",function(t,e){for(var e=0;e<87;e++)if(t.properties.COUNTYNAME==s[e].county){if(s[e].pct_unspent>30);else if(s[e].pct_unspent>20);else if(s[e].pct_unspent>15);else if(s[e].pct_unspent>10);else if(s[e].pct_unspent>0);else if(s[e].pct_unspent<0);f.innerHTML="<div class='chatter'><h2>"+t.properties.COUNTYNAME+" County</h2><div class='boxLeft'><div class='stat'>Region: <b>"+s[e].name+"</b></div><div class='stat'>Waiting List: <b>"+s[e].waiting+"</b></div></div><div class='boxRight'><div class='stat'>Allocated: <b>"+d3.format("$,")(s[e].allocated)+"</b></div><div class='stat'>Percent Unspent: <b>"+d3.format(".0")(s[e].pct_unspent)+"%</b></div></div>"}}).style("stroke-width","1.5px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){return"<b>"+t.properties.COUNTYNAME+" County</b>"})),u.append("path").attr("id","state-borders").attr("d",d)});d3.behavior.zoom().on("zoom",function(){u.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),u.selectAll("circle").attr("d",d.projection(c)),u.selectAll("path").attr("d",d.projection(c))});$(".zoom").click(function(){o(),document.getElementById("infobox").innerHTML="<div class='chatter'>Minnesota counties vary widely in spending state &ldquo;waiver&rdquo; money for people with disabilities.</div>"}),d3.helper={},d3.helper.tooltip=function(t){return function(e){var n,o=d3.select("body").node();e.on("mouseover",function(e,s){d3.select("body").selectAll("div.tooltip").remove(),n=d3.select("body").append("div").attr("class","tooltip");var i=d3.mouse(o);n.style("left",i[0]+10+"px").style("top",i[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,s)}).on("mousemove",function(e,s){var i=d3.mouse(o);n.style("left",i[0]+10+"px").style("top",i[1]-15+"px");var r=t(e,s)||"";n.html(r)}).on("mouseout",function(t,e){n.remove()})}}})},{}]},{},[1]);