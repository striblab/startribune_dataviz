!function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r||e)},d,d.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){d3.json("./data/groups.json",function(e,t){d3.json("./shapefiles/metro_cities.json",function(e,r){function i(e,t,r){d3.select(e).selectAll(".row").sort(function(e,i){if("group"==t){if("descend"==r)return d3.descending(e.name,i.name);if("ascend"==r)return d3.ascending(e.name,i.name)}if("city"==t){if("descend"==r)return d3.descending(e.city,i.city);if("ascend"==r)return d3.ascending(e.city,i.city)}if("members"==t){if("descend"==r)return d3.descending(e.members,i.members);if("ascend"==r)return d3.ascending(e.members,i.members)}if("privacy"==t){if("descend"==r)return d3.ascending(e.privacy,i.privacy);if("ascend"==r)return d3.descending(e.privacy,i.privacy)}if("created"==t){if("descend"==r)return d3.ascending(e.created,i.created);if("ascend"==r)return d3.descending(e.created,i.created)}}).transition().duration(500)}var n=t.groups,o=[];d3.select("#groupsList").selectAll(".row").data(n).enter().append("div").attr("class",function(e){return"row"}).attr("latitude",function(e){return e.latitude}).attr("longitude",function(e){return e.longitude}).html(function(e,t){return o[t]=e.city,"<div class='col name'>"+e.name+"</div><div class='col city'>"+e.city+"</div><div class='col members'>"+d3.format(",")(e.members)+"</div><div class='col privacy'>"+e.privacy+"</div><div class='col created'>"+e.created+"</div>"}),$(document).ready(function(){$("#filter_box").keyup(function(e){$(".row").hide();var t=$("#filter_box").val();$(".row").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()});$(".row:visible").length}),$(".hSort").click(function(){if($(".hSort").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("toggled")){$(this).removeClass("toggled");var e="ascend"}else if($(this).hasClass("selected")){$(this).addClass("toggled");var e="descend"}i("#groupsList",$(this).attr("data"),e)})});var a=new mapboxgl.LngLat(-93.716125,44.643254),s=new mapboxgl.LngLat(-92.763062,45.350215);new mapboxgl.LngLatBounds(a,s);mapboxgl.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA";var c=new mapboxgl.Map({container:"map",style:"mapbox://styles/shadowflare/ciqzo0bu20004bknkbrhrm6wf",center:[-93.2231,44.9405],zoom:7});c.scrollZoom.disable(),c.on("load",function(){c.addSource("cities",{type:"geojson",data:r}),c.addLayer({id:"cities-layer",interactive:!0,source:"cities",layout:{},type:"fill",paint:{"fill-antialias":!0,"fill-opacity":.5,"fill-color":"#888","fill-outline-color":"rgba(255, 255, 255, 1)"}}),o.forEach(function(e,t){c.addLayer({id:"cities-layer"+t,interactive:!0,type:"fill",source:"cities",layout:{},filter:["==","CTU_NAME",o[t]],paint:{"fill-opacity":.8,"fill-color":"#0000ff","fill-outline-color":"rgba(51, 51, 51, 1)"}})}),$(".row").click(function(){c.flyTo({center:[Number($(this).attr("longitude")),Number($(this).attr("latitude"))],zoom:10}),$(".row").removeClass("rowSelect"),$(this).addClass("rowSelect")}),$(".zoom").click(function(){$(".row").removeClass("rowSelect"),c.flyTo({center:[-93.2231,44.9405],zoom:7})});var e=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});c.on("mousemove",function(t){var r=c.queryRenderedFeatures(t.point,{layers:["cities-layer"]});if(c.getCanvas().style.cursor=r.length?"pointer":"",!r.length)return void e.remove();var i=r[0];e.setLngLat(t.lngLat).setHTML(i.properties.CTU_NAME).addTo(c)})})})})},{}]},{},[1]);