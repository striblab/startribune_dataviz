!function t(e,r,o){function n(s,i){if(!r[s]){if(!e[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return n(r||t)},c,c.exports,t,e,r,o)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(t,e,r){d3.json("./data/cities2014.json",function(t,e){function r(t){var e,r,o;if(t&&a!==t){var n=c.centroid(t);e=n[0],r=n[1],o=4,a=t}else e=s/2,r=i/2,o=1,a=null;d.selectAll("path").classed("faded",!0).classed("active",a&&function(t){return t===a}),d.transition().duration(750).attr("transform","translate("+s/2+","+i/2+")scale("+o+")translate("+-e+","+-r+")").style("stroke-width",1.5/o+"px")}function o(t){var e,r,o;if(t&&a!==t){var n=c.centroid(t);e=n[0],r=n[1],o=1,a=t}else e=s/2,r=i/2,o=1,a=null;d.selectAll("path").classed("faded",!1).classed("active",a&&function(t){return t===a}),d.transition().duration(750).attr("transform","translate("+s/2+","+i/2+")scale("+o+")translate("+-e+","+-r+")").style("stroke-width",1.5/o+"px")}var n=(e.cities2014,$("#map svg"));$(window).on("resize",function(){var t=n.parent().width();n.attr("width",t),n.attr("height",t/.875)});var a,s=525,i=600,l=d3.geo.albersUsa().scale(29037).translate([-930,3480]),c=d3.geo.path().projection(l),p=d3.select("#map svg").attr("width",s).attr("height",i);p.append("rect").attr("class","background").attr("width",s).attr("height",i);var d=p.append("g"),u=document.getElementById("infobox");u.innerHTML="Click a city for census data";d3.json("shapefiles/metro.json",function(t,e){d.append("g").attr("id","states").selectAll("path").data(e.features).enter().append("path").attr("d",c).on("click",r).style("fill",function(t){return t.properties.PctChg10>.15?"#006d2c":t.properties.PctChg10>.1?"#31a354":t.properties.PctChg10>.05?"#74c476":t.properties.PctChg10>0?"#bae4b3":0==t.properties.PctChg10?"#e0e0e0":t.properties.PctChg10<0?"#a50f15":void 0}).on("mousedown",function(t,e){if(t.properties.PctChg10>0)var r="<span class='pos'>+"+(100*t.properties.PctChg10).toFixed(1)+"%</span>";else if(t.properties.PctChg10<0)var r="<span class='neg'>"+(100*t.properties.PctChg10).toFixed(1)+"%</span>";else var r="<span class='norm'>"+(100*t.properties.PctChg10).toFixed(1)+" %</span>";u.innerHTML="<h1>"+t.properties.NAME+"</h1><hr><div class='metric'>Percent Change</div><div class='bigNum'>"+r+"</div><hr><div class='metric'>Population 2010</div><div class='bigNum'>"+d3.format(",")(t.properties.POPESTIMAT)+"</div><hr><div class='metric'>Population 2014</div><div class='bigNum'>"+d3.format(",")(t.properties.POPESTIM_4)+"</div>"}).style("stroke-width","1.5px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){return"<b>"+t.properties.NAME+"</b>"})),d.append("path").attr("id","state-borders").attr("d",c)});d3.behavior.zoom().on("zoom",function(){d.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),d.selectAll("circle").attr("d",c.projection(l)),d.selectAll("path").attr("d",c.projection(l))});$(".zoom").click(function(){o(),document.getElementById("infobox").innerHTML="Click a city for census data"}),d3.helper={},d3.helper.tooltip=function(t){return function(e){var r,o=d3.select("body").node();e.on("mouseover",function(e,n){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var a=d3.mouse(o);r.style("left",a[0]+10+"px").style("top",a[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,n)}).on("mousemove",function(e,n){var a=d3.mouse(o);r.style("left",a[0]+10+"px").style("top",a[1]-15+"px");var s=t(e,n)||"";r.html(s)}).on("mouseout",function(t,e){r.remove()})}}})},{}]},{},[1]);