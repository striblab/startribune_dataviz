!function t(e,a,s){function n(i,o){if(!a[i]){if(!e[i]){var d="function"==typeof require&&require;if(!o&&d)return d(i,!0);if(r)return r(i,!0);throw new Error("Cannot find module '"+i+"'")}var l=a[i]={exports:{}};e[i][0].call(l.exports,function(t){var a=e[i][1][t];return n(a||t)},l,l.exports,t,e,a,s)}return a[i].exports}for(var r="function"==typeof require&&require,i=0;i<s.length;i++)n(s[i]);return n}({1:[function(t,e,a){$(".metroSwitch").click(function(){$(".metroSwitch").removeClass("selected"),$(this).addClass("selected"),$(".map").hide(),$(".chatter").hide(),$("#"+$(this).attr("data")).show(),$("#"+$(this).attr("data")+"Chatter").show()}),d3.json("./data/aum.json",function(t,e){function a(t,e,a,s){d3.select(t).selectAll(".card").sort(function(t,e){if("county"==a){if("descend"==s)return d3.descending(t.county,e.county);if("ascend"==s)return d3.ascending(t.county,e.county)}if("state"==a){if("descend"==s)return d3.descending(t.state,e.state);if("ascend"==s)return d3.ascending(t.state,e.state)}if("aum25"==a){if("descend"==s)return d3.descending(t.aum25,e.aum25);if("ascend"==s)return d3.ascending(t.aum25,e.aum25)}if("aum75"==a){if("descend"==s)return d3.descending(t.aum75,e.aum75);if("ascend"==s)return d3.ascending(t.aum75,e.aum75)}}).transition().duration(500)}function s(t,e,a){for(var s=0;s<i.length;s++)if(t.properties.GEOID==i[s].FIPS||"27"+String(t.properties.COUNTYFIPS)==String(i[s].FIPS)){var n=i[s].aum25-42;if(null==i[s].aum25||0==i[s].aum25||"undefined"==i[s].aum25)return"#fff";var r=d3.scale.linear().domain([-10,0,20]).range(["#F21919","#F1D9CB","#57B857"]);return r(n)}return"#fff"}function n(t,e,a){for(var n=0;n<i.length;n++)if(t.properties.GEOID==i[n].FIPS||"27"+String(t.properties.COUNTYFIPS)==String(i[n].FIPS)){if(0!=i[n].aum25){if(t.properties.hasOwnProperty("NAME"))var r=t.properties.NAME;else if(t.properties.hasOwnProperty("COUNTYNAME"))var r=t.properties.COUNTYNAME;var o=Math.round(i[n].aum25-47);if(Math.round(i[n].aum25)<-15||Math.round(i[n].aum25)>15)var d="#fff";else var d="#000";return"<div style='font-weight:900;'>"+r+" County, "+i[n].state+"</div><div>"+Math.round(i[n].aum25)+" average upward mobility score</div><div style='background-color:"+s(t,e,a)+"; color:"+d+"'>"+d3.format("+")(o)+" from average</div>"}return"<div style='font-weight:900;'>"+t.properties.NAME+" County, "+i[n].state+"</div><div>No data available</div>"}}function r(t,e,a,r,o,d,l,c,p){function u(t){var e;if(t&&f!==t){var a=C.centroid(t);a[0],a[1],e=6,f=t}else v/2,m/2,e=3,f=null;w.selectAll("path").classed("faded",!0).classed("active",f&&function(t){return t===f}),w.transition().duration(750).style("stroke-width",1.5/e+"px")}function h(t){var e;if(t&&f!==t){var a=C.centroid(t);a[0],a[1],e=1,f=t}else v/2,m/2,e=1,f=null;w.selectAll("path").classed("faded",!1).classed("active",f&&function(t){return t===f}),w.transition().duration(750).style("stroke-width",1.5/e+"px")}if("country"==d)var f,v=800,m=500,g=d3.geo.albersUsa().scale(1e3).translate([400,260]);else if("us"==d)var f,v=800,m=500,g=d3.geo.albersUsa().scale(2e3).translate([330,430]);else if("mn"==d)var f,v=350,m=500,g=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==d)var f,v=350,m=350,g=d3.geo.mercator().scale([16500]).center([-92.403259,44.988113]);var C=d3.geo.path().projection(g),x=d3.select(t+" svg").attr("width",v).attr("height",m);x.append("rect").attr("class","background").attr("width",v).attr("height",m);var w=x.append("g");d3.json("shapefiles/"+r,function(t,e){d3.json("shapefiles/us_states_topo.json",function(t,a){var r=[{long:-93.266667,lat:44.983333,name:"Minneapolis"},{long:-74.0059,lat:40.7127,name:"New York"},{long:-122.416667,lat:37.783333,name:"San Francisco"},{long:-87.955833,lat:43.052222,name:"Milwaukee"},{long:-87.684722,lat:41.836944,name:"Chicago"},{long:-93.620833,lat:41.590833,name:"Des Moines"},{long:-83.045833,lat:42.331389,name:"Detroit"},{long:-86.15,lat:39.766667,name:"Indiana"},{long:-96.731667,lat:43.536389,name:"Sioux Falls"},{long:-118.25,lat:34.05,name:"Los Angeles"},{long:-80.208889,lat:25.775278,name:"Miami"},{long:-95.383056,lat:29.762778,name:"Houston"},{long:-96.796667,lat:32.775833,name:"Dallas"},{long:-71.063611,lat:42.358056,name:"Boston"}];w.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",C).on("click",u).attr("id",function(t){return(t.properties.NAME+""+t.properties.GEOID+"_"+d).replace(new RegExp(" ","g"),"-")}).style("fill",function(t){return s(t,o,l)}).on("mousedown",function(t,e){for(var e=0;e<i.length;e++)if(t.properties.GEOID==i[e].FIPS||"27"+String(t.properties.COUNTYFIPS)==String(i[e].FIPS)){if($("#districtName").html(t.properties.NAME+" County, "+i[e].state),t.properties.hasOwnProperty("NAME"))var a=t.properties.NAME,s=i[e].state;else if(t.properties.hasOwnProperty("COUNTYNAME"))var a=t.properties.COUNTYNAME,s="Minnesota";var n=a,r=s;$(".card, .card div").hide(),$(".card").each(function(){$(this).text().toUpperCase().indexOf(n.toUpperCase())!=-1&&$(this).text().toUpperCase().indexOf(r.toUpperCase())!=-1&&($(this).show(),$(this).find("div").show())})}}).style("stroke-width",".5px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){return n(t,o,l)})),w.append("path").attr("id","state-borders").attr("d",C),x.selectAll("circle").data(r).enter().append("circle").attr("class","mark").attr("width",10).attr("height",10).attr("r","1.3px").attr("fill","#333").attr("transform",function(t){return"translate("+g([t.long,t.lat])+")"}),x.insert("path",".graticule").datum(topojson.mesh(a,a.objects.us_states,function(t,e){return t!==e})).attr("class","state-boundary").style("stroke-width","1.2px").attr("d",C),x.selectAll("text").data(r).enter().append("text").attr("class","city-label").attr("transform",function(t){return"translate("+g([t.long+.23,t.lat-.09])+")"}).text(function(t){return" "+t.name})})});d3.behavior.zoom().on("zoom",function(){w.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),w.selectAll("circle").attr("d",C.projection(g)),w.selectAll("path").attr("d",C.projection(g))});$(".zoom").click(function(){h(),$("#filter input").val(""),$("#districtName").html("Midwest"),$(".district").removeClass("selected"),$(".card, .card div").show()}),d3.helper={},d3.helper.tooltip=function(t){return function(e){var a,s=d3.select("body").node();e.on("mouseover",function(e,n){d3.select("body").selectAll("div.tooltip").remove(),a=d3.select("body").append("div").attr("class","tooltip");var r=d3.mouse(s);a.style("left",r[0]+10+"px").style("top",r[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,n)}).on("mousemove",function(e,n){var r=d3.mouse(s);a.style("left",r[0]+10+"px").style("top",r[1]-15+"px");var i=t(e,n)||"";a.html(i)}).on("mouseout",function(t,e){a.remove()})}}}var i=e.countiesAll,o=$("#map svg"),d=$("#country svg"),l=!1;$(window).on("resize",function(){var t=o.parent().width(),e=d.parent().width();o.attr("width",t),o.attr("height",t/1.6),d.attr("width",e),d.attr("height",e/1.6)}),$(".hSort").click(function(){if($(".hSort").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("toggled")){$(this).removeClass("toggled");var t="ascend"}else if($(this).hasClass("selected")){$(this).addClass("toggled");var t="descend"}a("#table",i,$(this).attr("data"),t)}),$(".district").click(function(){$(".district").removeClass("selected"),$(this).addClass("selected")}),function(t,e,a){d3.select(t).selectAll(".card").data(e).enter().append("div").attr("class","card").attr("fips",function(t){return t.FIPS}).html(function(t){var e;return 0!=t.aum25?(e=d3.format("+")(Math.round(t.aum25-42)),d3.format("+")(Math.round(t.aum75-61))):e="No data available","<div class='tableCell district' data='county'>"+t.county+"<span style='display:none'>"+t.FIPS+"</span></div><div class='tableCell state' data='state'>"+t.state+"</div><div class='tableCell p25'>"+e+"</div>"});var s="South Dakota",n="North Dakota",r="Minnesota",i="Iowa",o="Wisconsin",d="Illinois",c="Indiana",p="Michigan",u="Ohio";$(document).ready(function(){$("#filter input").keyup(function(t){$(".card, .card div").hide();var e=$("#filter input").val();""==e?$(".card, .card div").show():0==l?$(".card").each(function(){$(this).text().toUpperCase().indexOf(e.toUpperCase())!=-1&&($(this).show(),$(this).find("div").show())}):$(".state").each(function(){$(this).text().toUpperCase().indexOf(e.toUpperCase()||$(this).text().toUpperCase().indexOf(s.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(n.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(r.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(i.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(o.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(d.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(c.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(p.toUpperCase())!=-1||$(this).text().toUpperCase().indexOf(u.toUpperCase())!=-1)!=-1&&($(this).parent().show(),$(this).parent().find("div").show())})}),$("#usfilter").click(function(){l=!1,$(".card, .card div").show()}),$("#mwfilter").click(function(){l=!0,$(".card, .card div").hide(),$(".state").each(function(){$(this).text().toUpperCase().indexOf(s.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(n.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(r.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(i.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(o.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(d.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(c.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(p.toUpperCase())==-1&&$(this).text().toUpperCase().indexOf(u.toUpperCase())==-1||($(this).parent().show(),$(this).parent().find("div").show())})})}),$(".district").click(function(){$(".district").removeClass("selected"),$(this).addClass("selected"),$(".districtName").html($(this).text()),jQuery.fn.d3Click=function(){this.each(function(t,e){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(a)})},jQuery.fn.d3Down=function(){this.each(function(t,e){var a=document.createEvent("MouseEvents");a.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(a)})},jQuery.fn.d3Up=function(){this.each(function(t,e){var a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(a)})};var t=($(this).text()+"_us").replace(new RegExp(" ","g"),"-"),e=(($(this).text()+"_mn").replace(new RegExp(" ","g"),"-"),($(this).text()+"_country").replace(new RegExp(" ","g"),"-"));$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Click(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()}),$(".p25").each(function(){var t=$(this).text();if("No data available"!=t){var e=d3.scale.linear().domain([-10,0,20]).range(["#F21919","#F1D9CB","#57B857"]);if(t<-15||t>15)var a="#fff";else var a="#000";$(this).css("color",a),$(this).css("background-color",e(t))}}),$(".p75").each(function(){var t=$(this).text();"No data available"!=t&&(t>=20?($(this).addClass("posDark"),$(this).html(t)):t>=10?($(this).addClass("posMid"),$(this).html(t)):t>0?($(this).addClass("posLight"),$(this).html(t)):t<=-20?($(this).addClass("negDark"),$(this).html(t)):t<=-10?($(this).addClass("negMid"),$(this).html(t)):t<0?($(this).addClass("negLight"),$(this).html(t)):0==t&&($(this).addClass("neutral"),$(this).html(t)))})}("#table",i),r("#map","#districtName","#chart","us_states.json","economics","us",i,2,1),r("#map","#districtName","#chart","midwest_counties.json","economics","us",i,2,1),r("#country","#districtName","#chart","us_counties.json","economics","country",i,2,1);var c=o.parent().width();o.attr("width",c),o.attr("height",c/1.6);var p=d.parent().width();d.attr("width",p),d.attr("height",p/1.6)})},{}]},{},[1]);