!function e(o,t,n){function i(r,l){if(!t[r]){if(!o[r]){var p="function"==typeof require&&require;if(!l&&p)return p(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+r+"'")}var d=t[r]={exports:{}};o[r][0].call(d.exports,function(e){var t=o[r][1][e];return i(t||e)},d,d.exports,e,o,t,n)}return t[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,o,t){$.urlParam=function(e){var o=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null!=o?o[1]||0:null};var n=$.urlParam("chart");null!=n&&($(".slide").hide(),$("#"+n).show()),d3.json("./shapefiles/pipelines.json",function(e,o){d3.json("./shapefiles/enpipelines.json",function(e,t){d3.json("./shapefiles/spills.geojson",function(e,n){d3.json("./shapefiles/enspills.geojson",function(e,i){d3.json("./shapefiles/petro_pipelines.geojson",function(e,a){d3.json("./shapefiles/enpetro.json",function(e,r){d3.json("./shapefiles/hgl_pipelines.geojson",function(e,l){d3.json("./shapefiles/enhgl.geojson",function(e,p){d3.json("./shapefiles/natgas_pipelines.geojson",function(e,d){d3.json("./shapefiles/ennatgas.json",function(e,s){mapboxgl.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA";var c=new mapboxgl.Map({container:"map",style:"mapbox://styles/shadowflare/ciqzo0bu20004bknkbrhrm6wf",center:[-94.6859,46.729553],zoom:5,minZoom:3});c.addControl(new mapboxgl.NavigationControl),c.scrollZoom.disable(),c.on("load",function(){c.addSource("pipelines",{type:"geojson",data:o}),c.addSource("enpipelines",{type:"geojson",data:t}),c.addSource("spills",{type:"geojson",data:n}),c.addSource("enspills",{type:"geojson",data:i}),c.addSource("petro",{type:"geojson",data:a}),c.addSource("enpetro",{type:"geojson",data:r}),c.addSource("hgl",{type:"geojson",data:l}),c.addSource("enhgl",{type:"geojson",data:p}),c.addSource("natgas",{type:"geojson",data:d}),c.addSource("ennatgas",{type:"geojson",data:s}),c.addLayer({id:"pipelines-layer",interactive:!0,source:"pipelines",layout:{},type:"line",paint:{"line-color":"rgba(51, 51, 51, 0.5)","line-width":2},filter:["!=","ENBRIDGE","Opername"]},"place-neighbourhood"),c.addLayer({id:"petro-layer",interactive:!0,source:"petro",layout:{},type:"line",paint:{"line-color":"rgba(51, 51, 51, 0.5)","line-width":2},filter:["!=","ENBRIDGE","Opername"]},"place-neighbourhood"),c.addLayer({id:"hgl-layer",interactive:!0,source:"hgl",layout:{},type:"line",paint:{"line-color":"rgba(51, 51, 51, 0.5)","line-width":2},filter:["!=","ENBRIDGE","Opername"]},"place-neighbourhood"),c.addLayer({id:"natgas-layer",interactive:!0,source:"natgas",layout:{},type:"line",paint:{"line-color":"rgba(51, 51, 51, 0)","line-width":2},filter:["!=","ENBRIDGE","Opername"]},"place-neighbourhood"),c.addLayer({id:"pipelines-layer-e",interactive:!0,source:"enpipelines",layout:{},type:"line",paint:{"line-color":"rgba(183, 12, 12, .4)","line-width":2}},"place-neighbourhood"),c.addLayer({id:"natgas-layer-e",interactive:!0,source:"ennatgas",layout:{},type:"line",paint:{"line-color":"rgba(183, 12, 12, .4)","line-width":2}},"place-neighbourhood"),c.addLayer({id:"petro-layer-e",interactive:!0,source:"enpetro",layout:{},type:"line",paint:{"line-color":"rgba(183, 12, 12, .4)","line-width":2}},"place-neighbourhood"),c.addLayer({id:"hgl-layer-e",interactive:!0,source:"enhgl",layout:{},type:"line",paint:{"line-color":"rgba(183, 12, 12, .4)","line-width":2}},"place-neighbourhood"),c.addLayer({id:"spills-layer",type:"circle",source:"spills",paint:{"circle-radius":5,"circle-color":"rgba(88, 88, 88, 0.45)"},filter:["==","ENBRIDGE","NO"]}),c.addLayer({id:"spills-layer-e",type:"circle",source:"enspills",paint:{"circle-radius":5,"circle-color":"rgba(0, 0, 0, .6)","circle-stroke-color":"#ffffff","circle-stroke-width":.5},filter:["!=","SOURCE","MPCA"]});var e=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});c.on("mousemove",function(o){var t=c.queryRenderedFeatures(o.point,{layers:["spills-layer-e"]});if(c.getCanvas().style.cursor=t.length?"pointer":"",!t.length)return void e.remove();var n=t[0];e.setLngLat(o.lngLat).setHTML("<div class='name'>"+String(n.properties.OPERATOR).toUpperCase()+"</div><div class='date'>"+n.properties.DATE+"</div><div class=''>"+String(n.properties.CITY).toUpperCase()+", MN</div>").addTo(c)})}),function(){var e={top:20,right:60,bottom:20,left:40};c3.generate({bindto:"#chartTrend",padding:e,data:{x:"x",columns:[["x",2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],["Incidents",14,18,22,19,10,23,12,21,24,14,21,27,23,26,7]],type:"bar"},bar:{width:{ratio:.2}},legend:{show:!1},point:{show:!1},color:{pattern:["#333333"]},axis:{y:{min:0,padding:{bottom:0,top:0},tick:{count:4,format:d3.format(".0f")}},x:{tick:{count:5,multiline:!1,format:d3.format(".0f")}}}})}(),function(){var e={top:20,right:60,bottom:20,left:40};c3.generate({bindto:"#chartMN",padding:e,data:{x:"x",columns:[["x",2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],["Other Spill",2,7,1,0,3,4,2,3,5,2,2,1,3,2,2],["Significant Spill",3,1,3,0,1,1,0,2,3,0,1,2,0,3,0]],groups:[["Other Spill","Significant Spill"]],type:"bar"},bar:{width:{ratio:.2}},legend:{show:!1},point:{show:!1},color:{pattern:["#333333","#888888"]},axis:{y:{max:9,min:0,padding:{bottom:0,top:0},tick:{count:4,values:[0,3,6,9],format:d3.format(".0f")}},x:{tick:{count:5,multiline:!1,format:d3.format(".0f")}}}})}(),function(){var e={top:20,right:60,bottom:20,left:40};c3.generate({bindto:"#chartMNSpills",padding:e,data:{x:"x",columns:[["x",2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],["Incidents",10,16,5,3,8,6,7,11,12,3,11,12,10,8,3]],type:"bar"},bar:{width:{ratio:.2}},legend:{show:!1},point:{show:!1},color:{pattern:["#333333"]},axis:{y:{max:20,min:0,padding:{bottom:0,top:0},tick:{count:4,values:[0,10,20,30],format:d3.format(".0f")}},x:{tick:{count:5,multiline:!1,format:d3.format(".0f")}}}})}(),function(){var e={top:20,right:60,bottom:20,left:80};c3.generate({bindto:"#chartGallons",padding:e,data:{x:"x",columns:[["x",2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],["Enbridge Spilled",256410,11602,42609,0,420,14280,420,517,7427,440,36,1565,152,431,15],["Other Spilled",38262,2251,84,21178,135685,1,67739,211606,193888,5,62304,1022,2115,1302,8]],groups:[["Enbridge Spilled","Other Spilled"]],type:"bar"},bar:{width:{ratio:.2}},legend:{show:!1},point:{show:!1},color:{pattern:["#333333","#888888"]},axis:{y:{min:0,padding:{bottom:0,top:0},tick:{count:4,format:d3.format(",.0f")}},x:{tick:{count:5,multiline:!1,format:d3.format(".0f")}}}})}()})})})})})})})})})})},{}]},{},[1]);