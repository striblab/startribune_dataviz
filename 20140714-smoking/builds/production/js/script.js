!function t(e,n,a){function r(i,l){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=n[i]={exports:{}};e[i][0].call(u.exports,function(t){var n=e[i][1][t];return r(n||t)},u,u.exports,t,e,n,a)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(t,e,n){d3.json("./data/mncountySmoking.json",function(t){t.mncountySmoking,new L.LatLngBounds(new L.LatLng(39.1982,-128.1445),new L.LatLng(50.5414,-68.2031));L.mapbox.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiODRHdjBSWSJ9.lF4ymp-69zdGvZ5X4Tokzg";var e=L.mapbox.map("map","mapbox.light").setView([46.358056,-94.200833],7);e.setView([45.9703,-94.1748],6),e.dragging.disable(),e.touchZoom.disable(),e.doubleClickZoom.disable(),e.scrollWheelZoom.disable(),e.tap&&e.tap.disable();var n=(L.mapbox.tileLayer("http://apps.startribune.com/news/tileserver/smoking.tilejson").addTo(e),L.mapbox.gridLayer("http://apps.startribune.com/news/tileserver/smoking.tilejson").addTo(e)),a=L.mapbox.gridControl(n).addTo(e);e.legendControl.addLegend(document.getElementById("legend").innerHTML),a.options.follow=!0;var r=$("#chart svg");$(window).on("resize",function(){var t=r.parent().width();r.attr("width",t),r.attr("height",t/(800/750))});var o={top:20,right:220,bottom:30,left:50},i=800-o.left-o.right,l=750-o.top-o.bottom,s=d3.time.format("%Y"),u=s.parse("1996"),c=s.parse("2012"),d=d3.time.months(u,c),p=d3.time.scale().range([0,i]).domain([u,c]),m=d3.scale.linear().range([l,14]),f=function(t){return d3.hcl(48*t,95,45).toString()},h=d3.svg.axis().scale(p).orient("top"),g=d3.svg.axis().scale(m).orient("left"),v=d3.svg.line().interpolate("basis").defined(function(t){return null!=t}).x(function(t,e){return p(d[e])}).y(function(t){return m(t)}),y=d3.select("#chart svg").attr("width",i+o.left+o.right).attr("height",l+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.top+")");d3.csv("data/minnesota_smoking2.csv",function(t){var e=[];_(t).pluck("name");_(t).each(function(t){e.push({id:t.id,name:t.name,values:_(d).map(function(e){return parseFloat(t[s(e)])||null})})});var n=_(e).chain().pluck("values").flatten().value();m.domain([15,d3.max(n)]),y.append("g").attr("class","x axis").attr("transform","translate(0,0)").call(h),y.append("g").attr("class","y axis").call(g).append("text").attr("transform","rotate(-90)").attr("y",10).attr("dy",".71em").style("text-anchor","end").style("font-weight","bold").text("Population Percentage");var a=y.selectAll(".series").data(e).enter().append("g").attr("class","series");a.append("path").attr("class","line").attr("d",function(t){return v(t.values)}).style("stroke",function(t,e){return f(e)}),a.append("path").attr("class","invisible hover").attr("d",function(t){return v(t.values)}),a.append("text").attr("class","label hover").datum(function(t){return{name:t.name,value:t.values[t.values.length-1]}}).attr("transform",function(t){return"translate("+p(c)+","+m(t.value)+")"}).attr("x",3).attr("dy",".35em").style("fill",function(t,e){return f(e)}).style("opacity",0).text(function(t){return t.name}),a.selectAll(".hover").on("mouseover",function(t,e){d3.selectAll(".line").style("opacity",.12).filter(function(e){return e.name==t.name}).style("opacity",1).style("stroke-width",2.5),d3.selectAll(".series text").style("opacity",0).filter(function(e){return e.name==t.name}).style("opacity",1)}).on("mouseout",function(t,e){d3.selectAll(".line").style("opacity",1).style("stroke-width",null),d3.selectAll(".series text").style("opacity",0)})});var x=r.parent().width();r.attr("width",x),r.attr("height",x/(800/750))})},{}]},{},[1]);