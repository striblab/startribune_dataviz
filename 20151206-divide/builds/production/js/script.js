!function e(a,t,o){function l(r,i){if(!t[r]){if(!a[r]){var s="function"==typeof require&&require;if(!i&&s)return s(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+r+"'")}var u=t[r]={exports:{}};a[r][0].call(u.exports,function(e){var t=a[r][1][e];return l(t||e)},u,u.exports,e,a,t,o)}return t[r].exports}for(var n="function"==typeof require&&require,r=0;r<o.length;r++)l(o[r]);return l}({1:[function(e,a,t){d3.json("./data/religion.json",function(e,a){d3.json("./data/medianIncome.json",function(e,t){d3.json("./data/population.json",function(e,o){d3.json("./data/age.json",function(e,l){d3.json("./data/medianAge.json",function(e,n){d3.json("./data/livingCosts.json",function(e,r){d3.json("./data/education.json",function(e,i){d3.json("./data/race.json",function(e,s){d3.json("./data/votes2012.json",function(e,u){function c(e,a,t){if("Minnesota"==e)var o="Minnesota";else var o=e;var l="#121212",n="#888888",r="#C7C7C7";if("population"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if(t[i].pctChange>.03)return l;if(t[i].pctChange<=0)return r;if(t[i].pctChange<=.03)return n}if("education"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if(t[i].associates_pct+t[i].bachelors_pct+t[i].grad_degree_pct<.4)return r;if(t[i].associates_pct+t[i].bachelors_pct+t[i].grad_degree_pct>=.4)return l}if("income"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if(t[i].income>=55e3)return l;if(t[i].income<55e3)return r}if("costs"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if(t[i].YearlyCost>=55e3)return l;if(t[i].YearlyCost<55e3)return r}if("age"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if(t[i].median_age>=45)return l;if(t[i].median_age>=40)return n;if(t[i].median_age<40)return r}if("religion"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if(t[i].adherent_pct>=60)return l;if(t[i].adherent_pct<60)return r}if("race"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if(t[i].poc_pct>.15)return l;if(t[i].poc_pct<=.1)return r;if(t[i].poc_pct<=.15)return n}if("social"==a)for(var i=0;i<t.length;i++)if(t[i].county==o){if("No"==t[i].Yes_No)return l;if("Yes"==t[i].Yes_No)return r}}function f(e,a,t,o,l){if("population"==a)var n=[c(o,a,t)],r=d3.format(",");if("education"==a)var n=[c(o,a,t)],r=d3.format("%");if("religion"==a)var n=[c(o,a,t)],r=d3.format("%");if("income"==a)var n=[c(o,a,t)],r=d3.format("$,.0f");if("costs"==a)var n=[c(o,a,t)],r=d3.format("$,.0f");if("age"==a)var n=[c(o,a,t)],r=d3.format(",");if("race"==a)var n=[c(o,a,t)],r=d3.format("%");if("social"==a)var n=[c(o,a,t)],r=d3.format(",");nv.addGraph(function(){return g[l]=nv.models.multiBarHorizontalChart().x(function(e){return e.label}).y(function(e){return e.value}).margin({top:30,right:40,bottom:20,left:95}).showValues(!0).tooltips(!0).stacked(!0).showLegend(!1).color(n).width($(e).width()).height($(e).height()).showControls(!1),g[l].yAxis.tickFormat(r),d3.select(e+" svg").datum(p(a,t,o)).transition().duration(500).call(g[l]),nv.utils.windowResize(g[l].update),g[l]})}function d(e,a,t,o,l,n){if("population"==t)var r=[c(l,t,o)],i=d3.format(",");if("education"==t)var r=[c(l,t,o)],i=d3.format("%");if("religion"==t)var r=[c(l,t,o)],i=d3.format("%");if("income"==t)var r=[c(l,t,o)],i=d3.format("$,.0f");if("costs"==t)var r=[c(l,t,o)],i=d3.format("$,.0f");if("age"==t)var r=[c(l,t,o)],i=d3.format(",");if("race"==t)var r=[c(l,t,o)],i=d3.format("%");if("social"==t)var r=[c(l,t,o)],i=d3.format(",");d3.select(a+" svg").datum(p(t,o,l)).transition().duration(300).call(e[n].color(r)),e[n].yAxis.tickFormat(i),nv.utils.windowResize(e[n].update)}function p(e,a,t){if("population"==e)for(var o=0;o<a.length;o++)if(a[o].county==t)return[{key:"Population",values:[{label:"1950",value:a[o].pop1950},{label:"1960",value:a[o].pop1960},{label:"1970",value:a[o].pop1970},{label:"1980",value:a[o].pop1980},{label:"1990",value:a[o].pop1990},{label:"2000",value:a[o].pop2000},{label:"2010",value:a[o].pop2010},{label:"2014",value:a[o].pop2014}]}];if("education"==e)for(var o=0;o<a.length;o++)if(a[o].county==t)return[{key:"% of population",values:[{label:"Below 9th grade",value:a[o].less_nine_pct},{label:"No HS Diploma",value:a[o].highschool_nodiploma_pct},{label:"High School",value:a[o].highschool_pct},{label:"Some College",value:a[o].some_college_nodegree_pct},{label:"Associate's",value:a[o].associates_pct},{label:"Bachelor's",value:a[o].bachelors_pct},{label:"Graduate",value:a[o].grad_degree_pct}]}];if("religion"==e)for(var o=0;o<a.length;o++)if(a[o].county==t)return[{key:"",values:[{label:"Evangelical",value:a[o].evangelical/a[o].population},{label:"Mainline Prot.",value:a[o].mainline_protestant/a[o].population},{label:"Black Prot.",value:a[o].black_protestant/a[o].population},{label:"Catholic",value:a[o].catholic/a[o].population},{label:"Orthodox",value:a[o].orthodox/a[o].population},{label:"Judaism",value:a[o].judaism/a[o].population},{label:"Islam",value:a[o].islam/a[o].population},{label:"Other",value:a[o].other/a[o].population}]}];if("income"==e)for(var o=0;o<a.length;o++)if(a[o].county==t)return[{key:"Median Income (2010 dollars)",values:[{label:"1999",value:a[o].income_1999_today_dollars},{label:"2010",value:a[o].income}]}];if("costs"==e)for(var o=0;o<a.length;o++)if(a[o].county==t)return[{key:"Monthly Cost",values:[{label:"Children",value:a[o].ChildCare},{label:"Food",value:a[o].Food},{label:"Health",value:a[o].HealthCare},{label:"Housing",value:a[o].Housing},{label:"Transport",value:a[o].Transport},{label:"Other",value:a[o].Other},{label:"Taxes",value:a[o].Taxes}]}];if("age"==e){for(var l=[],n=[],o=0;o<a.length;o++)a[o].county==t&&("0 to 4"==a[o].range&&(l[0]=a[o].female_2015,n[0]=a[o].male_2015),"5 to 9"==a[o].range&&(l[1]=a[o].female_2015,n[1]=a[o].male_2015),"10 to 14"==a[o].range&&(l[2]=a[o].female_2015,n[2]=a[o].male_2015),"15 to 19"==a[o].range&&(l[3]=a[o].female_2015,n[3]=a[o].male_2015),"20 to 24"==a[o].range&&(l[4]=a[o].female_2015,n[4]=a[o].male_2015),"25 to 29"==a[o].range&&(l[5]=a[o].female_2015,n[5]=a[o].male_2015),"30 to 34"==a[o].range&&(l[6]=a[o].female_2015,n[6]=a[o].male_2015),"35 to 39"==a[o].range&&(l[7]=a[o].female_2015,n[7]=a[o].male_2015),"40 to 44"==a[o].range&&(l[8]=a[o].female_2015,n[8]=a[o].male_2015),"45 to 49"==a[o].range&&(l[9]=a[o].female_2015,n[9]=a[o].male_2015),"50 to 54"==a[o].range&&(l[10]=a[o].female_2015,n[10]=a[o].male_2015),"55 to 59"==a[o].range&&(l[11]=a[o].female_2015,n[11]=a[o].male_2015),"60 to 64"==a[o].range&&(l[12]=a[o].female_2015,n[12]=a[o].male_2015),"65 to 69"==a[o].range&&(l[13]=a[o].female_2015,n[13]=a[o].male_2015),"70 to 74"==a[o].range&&(l[14]=a[o].female_2015,n[14]=a[o].male_2015),"75 to 79"==a[o].range&&(l[15]=a[o].female_2015,n[15]=a[o].male_2015),"80 to 84"==a[o].range&&(l[16]=a[o].female_2015,n[16]=a[o].male_2015),"85+"==a[o].range&&(l[17]=a[o].female_2015,n[17]=a[o].male_2015));return[{key:"Females",values:[{label:"0 to 4",value:l[0]},{label:"5 to 9",value:l[1]},{label:"10 to 14",value:l[2]},{label:"15 to 19",value:l[3]},{label:"20 to 24",value:l[4]},{label:"25 to 29",value:l[5]},{label:"30 to 34",value:l[6]},{label:"35 to 39",value:l[7]},{label:"40 to 44",value:l[8]},{label:"45 to 49",value:l[9]},{label:"50 to 54",value:l[10]},{label:"55 to 59",value:l[11]},{label:"60 to 64",value:l[12]},{label:"65 to 69",value:l[13]},{label:"70 to 74",value:l[14]},{label:"75 to 79",value:l[15]},{label:"80 to 84",value:l[16]},{label:"85+",value:l[17]}]},{key:"Males",values:[{label:"0 to 4",value:n[0]},{label:"5 to 9",value:n[1]},{label:"10 to 14",value:n[2]},{label:"15 to 19",value:n[3]},{label:"20 to 24",value:n[4]},{label:"25 to 29",value:n[5]},{label:"30 to 34",value:n[6]},{label:"35 to 39",value:n[7]},{label:"40 to 44",value:n[8]},{label:"45 to 49",value:n[9]},{label:"50 to 54",value:n[10]},{label:"55 to 59",value:n[11]},{label:"60 to 64",value:n[12]},{label:"65 to 69",value:n[13]},{label:"70 to 74",value:n[14]},{label:"75 to 79",value:n[15]},{label:"80 to 84",value:n[16]},{label:"85+",value:n[17]}]}]}if("race"==e)for(var o=0;o<a.length;o++)if(a[o].county==t)return[{key:"% people of color",values:[{label:"2010",value:a[o].poc_pct}]},{key:"% white",values:[{label:"2010",value:a[o].white_pct}]}];if("social"==e)for(var o=0;o<a.length;o++)if(a[o].county==t)return[{key:"No Votes",values:[{label:"2012",value:a[o].NO}]},{key:"Yes Votes",values:[{label:"2012",value:a[o].YES}]}]}function v(e,a,t){if("Minnesota"==e)var o="Minnesota";else var o=e.properties.COUNTYNAME;if("population"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return d3.format("%.0f")(t[l].pctChange)+" population growth 2010-2014";if("education"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return d3.format("%.0f")(t[l].associates_pct+t[l].bachelors_pct+t[l].grad_degree_pct)+" with college degrees";if("income"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return d3.format("$,.00f")(t[l].income)+" median income";if("costs"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return d3.format("$,.00f")(t[l].YearlyCost)+" annual household costs";if("age"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return d3.format(".0f")(t[l].median_age)+" median age";if("religion"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return d3.format(".0f")(t[l].adherent_pct)+"% religious adherency";if("race"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return d3.format("%")(t[l].poc_pct)+" people of color";if("social"==a)for(var l=0;l<t.length;l++)if(t[l].county==o)return t[l].PctWin+"% voted No"}function m(e,a,t,o,l,n,r){function i(e){if(e&&u!==e){var a=h.centroid(e);a[0],a[1],4,u=e}else f/2,p/2,1,u=null;_.selectAll("path").classed("faded",!0).classed("active",u&&function(e){return e===u})}function s(e){if(e&&u!==e){var a=h.centroid(e);a[0],a[1],1,u=e}else f/2,p/2,1,u=null;_.selectAll("path").classed("faded",!1).classed("active",u&&function(e){return e===u})}"politics"!=l&&$(a).html("<div class='countyName'>Minnesota</div><div class='metric' style='color:"+c("Minnesota",l,n)+"'>"+v("Minnesota",l,n)+"</div>");var u,f=350,p=350,m=d3.geo.albersUsa().scale(5037).translate([50,970]),h=d3.geo.path().projection(m),b=d3.select(e+" svg").attr("width",f).attr("height",p);b.append("rect").attr("class","background").attr("width",f).attr("height",p);var _=b.append("g");document.getElementById("infobox");d3.json("shapefiles/"+o,function(e,o){_.append("g").attr("id","states").selectAll("path").data(o.features).enter().append("path").attr("d",h).on("click",i).style("fill",function(e){return c(e.properties.COUNTYNAME,l,n)}).on("mousedown",function(e,o){if("age"==l){var i=e.properties.COUNTYNAME+" County";d(g,t,l,dataAge,e.properties.COUNTYNAME,r)}else{var i=e.properties.COUNTYNAME+" County";d(g,t,l,n,e.properties.COUNTYNAME,r)}$(a).html("<div class='countyName'>"+i+"</div><div class='metric' style='color:"+c(e.properties.COUNTYNAME,l,n)+"'>"+v(e,l,n)+"</div>")}).style("stroke-width","1.5px").style("stroke","#fff").call(d3.helper.tooltip(function(e,a){if("politics"==l)var t="District "+e.properties.DISTRICT;else var t=e.properties.COUNTYNAME+" County";return"<div class='countyName'>"+t+"</div><div style='color:"+c(e.properties.COUNTYNAME,l,n)+"'>"+v(e,l,n)+"</div>"})),_.append("path").attr("id","state-borders").attr("d",h)});d3.behavior.zoom().on("zoom",function(){_.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),_.selectAll("circle").attr("d",h.projection(m)),_.selectAll("path").attr("d",h.projection(m))});$(".zoom, .myButton2").click(function(){s(),"age"==l?d(g,t,l,dataAge,"Minnesota",r):d(g,t,l,n,"Minnesota",r),$(a).html("<div class='countyName'>Minnesota</div><div class='metric' style='color:"+c("Minnesota",l,n)+"'>"+v("Minnesota",l,n)+"</div>")}),d3.helper={},d3.helper.tooltip=function(e){return function(a){var t,o=d3.select("body").node();a.on("mouseover",function(a,l){d3.select("body").selectAll("div.tooltip").remove(),t=d3.select("body").append("div").attr("class","tooltip");var n=d3.mouse(o);t.style("left",n[0]+10+"px").style("top",n[1]-15+"px").style("position","absolute").style("z-index",1001);e(a,l)}).on("mousemove",function(a,l){var n=d3.mouse(o);t.style("left",n[0]+10+"px").style("top",n[1]-15+"px");var r=e(a,l)||"";t.html(r)}).on("mouseout",function(e,a){t.remove()})}}}dataReligion=a.religion,dataIncome=t.medianIncome,dataPopulation=o.population,dataAge=l.age,dataMAge=n.medianAge,dataCosts=r.livingCosts,dataEducation=i.education,dataRace=s.race,data2012=u.votes2012,$(".myButton2").on("click",function(){$(".myButton2").removeClass("selected"),$(this).addClass("selected"),$(".section").hide(),$("#"+$(this).attr("data")).show()}),f("#popChart","population",dataPopulation,"Minnesota",0),f("#edChart","education",dataEducation,"Minnesota",1),f("#religionChart","religion",dataReligion,"Minnesota",2),f("#incomeChart","income",dataIncome,"Minnesota",3),f("#costsChart","costs",dataCosts,"Minnesota",4),f("#raceChart","race",dataRace,"Minnesota",5),f("#ageChart","age",dataAge,"Minnesota",6),f("#socialChart","social",data2012,"Minnesota",7),$(".section").hide(),$("#populationB").addClass("selected"),$("#population").show();var g=[];m("#popMap","#popInfo","#popChart","counties.json","population",dataPopulation,0),m("#edMap","#edInfo","#edChart","counties.json","education",dataEducation,1),m("#religionMap","#religionInfo","#religionChart","counties.json","religion",dataReligion,2),m("#incomeMap","#incomeInfo","#incomeChart","counties.json","income",dataIncome,3),m("#costsMap","#costsInfo","#costsChart","counties.json","costs",dataCosts,4),m("#raceMap","#raceInfo","#raceChart","counties.json","race",dataRace,5),m("#ageMap","#ageInfo","#ageChart","counties.json","age",dataMAge,6),m("#socialMap","#socialInfo","#socialChart","counties.json","social",data2012,7)})})})})})})})})})},{}]},{},[1]);