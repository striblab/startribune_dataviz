!function e(t,a,r){function l(o,s){if(!a[o]){if(!t[o]){var i="function"==typeof require&&require;if(!s&&i)return i(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=a[o]={exports:{}};t[o][0].call(u.exports,function(e){var a=t[o][1][e];return l(a||e)},u,u.exports,e,t,a,r)}return a[o].exports}for(var n="function"==typeof require&&require,o=0;o<r.length;o++)l(r[o]);return l}({1:[function(e,t,a){var r=$("#map svg");$(window).on("resize",function(){var e=r.parent().width();r.attr("width",e),r.attr("height",e/(800/350))}),$("#property").css("background-color","#333"),$(".myButton").click(function(){$(".myButton").css("background-color","#61bd1a"),$(this).css("background-color","#333")}),d3.json("./data/greenline_ridership.json",function(e,t){var a,r=t.greenline_ridership,l=$("#map").width(),n=350,o=d3.geo.albersUsa().scale(184537).translate([-10700,23050]),s=d3.geo.path().projection(o),i=d3.select("#map svg").attr("width",l).attr("height",n);i.append("rect").attr("class","background").attr("width",l).attr("height",n);var u=i.append("g"),d="#fcae91",c="#fb6a4a",v="#de2d26",p="#a50f15";d3.json("shapefiles/landmarks.geo.json",function(e,t){u.append("g").attr("id","landmarks").selectAll("path").data(t.features).enter().append("path").attr("d",s).style("fill","#fff").style("fill-opacity","0").style("stroke-width","1.5px").style("stroke","#ddd"),u.append("path").attr("id","landmark-borders").attr("d",s)}),d3.json("shapefiles/census-tracts.geo.json",function(e,t){function i(e){var t,r,o;if(e&&a!==e){var i=s.centroid(e);t=i[0],r=i[1],o=4,a=e}else t=l/2,r=n/2,o=1,a=null;u.selectAll("path").classed("faded",!0).classed("active",a&&function(e){return e===a}),u.transition().duration(750).attr("transform","translate("+l/3.3+","+n/2+")scale("+o+")translate("+-t+","+-r+")").style("stroke-width",1.5/o+"px")}function f(e){var t,r,o;if(e&&a!==e){var i=s.centroid(e);t=i[0],r=i[1],o=1,a=e}else t=l/2,r=n/2,o=1,a=null;u.selectAll("path").classed("faded",!1).classed("active",a&&function(e){return e===a}),u.transition().duration(750).attr("transform","translate("+l/2+","+n/2+")scale("+o+")translate("+-t+","+-r+")").style("stroke-width",1.5/o+"px")}function g(e){d3.select("#chart svg").datum(e).transition().duration(300).call(b),nv.utils.windowResize(b.update)}d3.json("shapefiles/metrotransit-green-line.geo.json",function(e,t){u.append("g").attr("id","greenline").selectAll("path").data(t.features).enter().append("path").attr("d",s).style("fill","#fff").style("fill-opacity","0").style("stroke","#333").style("stroke-width","1.5px"),u.append("path").attr("id","greenline-borders").attr("d",s)}),d3.json("shapefiles/metrotransit-green-line-stops.geo.json",function(e,t){u.append("g").attr("id","stops").selectAll("path").data(t.features).enter().append("path").attr("d",s).on("click",i).style("fill",function(e){for(var t=0;t<24;t++)if(e.properties.Station==r[t].station){var a=(Number(r[t].Total14Avg)+Number(r[t].Total15Avg))/2;return a>=3e3?p:a>=2e3?v:a>=1e3?c:a>=600?d:"#ddd"}}).style("fill-opacity","1").style("stroke-width","3.5px").style("stroke",function(e){for(var t=0;t<24;t++)if(e.properties.Station==r[t].station){var a=(Number(r[t].Total14Avg)+Number(r[t].Total15Avg))/2;return a>=3e3?p:a>=2e3?v:a>=1e3?c:a>=600?d:"#ddd"}}).on("mousedown",function(e,t){for(var a=0;a<24;a++)if(e.properties.Station==r[a].station){var l=[{key:"Average Daily Boardings",values:[{label:"June '14",value:r[a].Jun14Avg},{label:"July '14",value:r[a].Jul14Avg},{label:"August '14",value:r[a].Aug14Avg},{label:"September '14",value:r[a].Sep14Avg},{label:"October '14",value:r[a].Oct14Avg},{label:"November '14",value:r[a].Nov14Avg},{label:"December '14",value:r[a].Dec14Avg},{label:"January '15",value:r[a].Jan15Avg},{label:"February '15",value:r[a].Feb15Avg},{label:"March '15",value:r[a].Mar15Avg},{label:"April '15",value:r[a].April15Avg},{label:"May '15",value:r[a].May15Avg}]}],n=document.getElementById("stationName");n.innerHTML=e.properties.Station,g(l)}}).call(d3.helper.tooltip(function(e,t){return"<b>"+e.properties.Station+"</b>"})),u.append("path").attr("id","stops-borders").attr("d",s)});d3.behavior.zoom().on("zoom",function(){u.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),u.selectAll("circle").attr("d",s.projection(o)),u.selectAll("path").attr("d",s.projection(o))});$(".zoom").click(function(){f(),document.getElementById("stationName").innerHTML="Green Line Stations",g(h)});var b;nv.addGraph(function(){var e=$("#chart").width;return b=nv.models.discreteBarChart().x(function(e){return e.label}).y(function(e){return e.value}).transitionDuration(350).color(["#31a354"]).width(e-20).height(160),b.yAxis.tickFormat(d3.format(",")),d3.select("#chart svg").datum(h).call(b),d3.select(".nv-x.nv-axis > g").selectAll("g").selectAll("text").attr("transform",function(e,t,a){return"translate (-30, 42) rotate(-50 0,0)"}),nv.utils.windowResize(b.update),b});var h=[{key:"Average Daily Boardings",values:[{label:"June '14",value:r[23].Jun14Avg},{label:"July '14",value:r[23].Jul14Avg},{label:"August '14",value:r[23].Aug14Avg},{label:"September '14",value:r[23].Sep14Avg},{label:"October '14",value:r[23].Oct14Avg},{label:"November '14",value:r[23].Nov14Avg},{label:"December '14",value:r[23].Dec14Avg},{label:"January '15",value:r[23].Jan15Avg},{label:"February '15",value:r[23].Feb15Avg},{label:"March '15",value:r[23].Mar15Avg},{label:"April '15",value:r[23].April15Avg},{label:"May '15",value:r[23].May15Avg}]}]}),d3.helper={},d3.helper.tooltip=function(e){return function(t){var a,r=d3.select("body").node();t.on("mouseover",function(t,l){d3.select("body").selectAll("div.tooltip").remove(),a=d3.select("body").append("div").attr("class","tooltip");var n=d3.mouse(r);a.style("left",n[0]+10+"px").style("top",n[1]-15+"px").style("position","absolute").style("z-index",1001);e(t,l)}).on("mousemove",function(t,l){var n=d3.mouse(r);a.style("left",n[0]+10+"px").style("top",n[1]-15+"px");var o=e(t,l)||"";a.html(o)}).on("mouseout",function(e,t){a.remove()})}}})},{}]},{},[1]);