
<svg class="us-map" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 787.34 488.26"><title>us_map2</title><polygon points="783.02 61.81 780.79 63.11 778.14 60.9 778.49 58.86 776.72 57.17 776.75 54.92 771.93 54.95 770.74 50 764.32 29.67 761.56 27.93 757.24 26.05 755.83 27.91 753.33 28.66 749.88 31.84 747.89 31.1 746.79 27.77 744.34 27.82 738.64 44.58 739.36 49.88 737.85 52.04 737.93 57.16 739.42 60.22 737.84 62.46 738.57 63.45 736.78 65.39 735.43 68.75 736.7 69.84 731.82 73.86 731.45 75.15 728.35 75.44 727.76 80.62 717.34 83.56 703.77 86.7 693.41 89.65 684.39 91.19 679.12 95.63 674.11 103.25 672.72 106.45 668.11 110.75 667.92 113.28 671.35 114.69 670.72 117.91 671.74 123.03 669.37 123.65 666.28 127.79 663.01 129.88 657.16 130.93 655.37 132.18 651.91 130.66 649.02 130.69 641.98 131.96 634.42 135.53 636.19 140.59 637.38 140.96 639.05 143.97 636.68 146.23 635.79 149.04 628.3 155.91 621.15 161.67 618.73 163.19 612.28 166.65 606.82 171.04 603.24 175.19 599.29 175.25 593.15 178.67 591.12 178.02 587.61 175.46 586.43 177.09 584.38 175.78 578.59 173.92 578.64 172.33 581.62 168.23 581.87 163.73 584.36 161.16 585.31 155.21 586.76 154.24 587.17 156.71 589.29 155.35 589.72 148.3 587.56 143.74 586.75 139.87 584.23 132.19 582.46 129.69 579.98 128.57 575.54 131.05 573.21 136.34 570.97 139.03 567.52 137.9 566.61 136.32 567.9 131.76 570.97 130.08 571.12 126.37 573.66 124.22 573.54 117.11 572.41 113.99 570.29 111.41 571.81 108.99 569.03 105.27 567.62 105.58 563.13 103.59 560.63 103.74 558.75 101.23 555.42 101.3 551.82 99.52 548.88 100.1 546.92 103.82 548.5 107.71 545 109.04 544.04 110.6 544.63 116.42 543.25 120.06 541.84 119.93 541.33 113 539.02 116.74 535.72 117.91 535.74 121.11 533.63 122.26 534.3 124.46 534.05 128.79 531.46 134.24 532.85 139.12 531.99 143.4 537.16 154.09 538.07 159.66 537.83 164.95 536.96 168.72 535.46 171.51 533.99 175.98 531.35 178.81 527.41 181.41 523.13 181.81 521.63 180.66 516.39 166.04 516.43 160.44 514.45 156.41 513.66 151.75 514.76 145.65 515.77 143.18 515 139.57 515.9 135.19 517.21 134.02 516.87 130.91 517.49 126.43 520.54 118.19 522.21 115.7 522.22 113.2 519.5 114.5 517.75 119.49 515.11 121.18 513.24 125.12 511.32 127.26 509.76 126.87 510.33 123.8 512.15 119.23 514.63 118.61 514.99 116.25 514.63 115.76 517.93 109.71 519.51 105.1 520.83 103.82 523.86 103.41 524.29 100.76 526.2 101.09 526.19 103.59 530.17 101.39 530.33 99.29 531.7 98.1 535.52 98.22 538.92 97.28 540.74 94.52 542.91 94.39 547.33 95.46 550.1 97.75 551.82 97.95 551.06 96.3 551.92 94.1 555.95 95.88 559.3 94.65 566.67 94.98 567.58 93.35 565.97 91.58 563.45 91.91 563.45 93.83 560.71 93.42 558.63 90.84 557.75 84.27 554.02 85.25 552.5 87 551.3 85.87 548.84 87.03 546.18 86.59 545.02 81.39 542.6 81.78 539.46 83.58 534.56 83.89 531 84.72 524.39 89.73 521.03 89.48 520.18 88.41 516.95 89.52 515.15 88.76 511.5 83.88 507.86 82.29 503.31 82.27 501.09 85.16 500.69 81.67 501.75 79.56 506.37 73.36 503.35 72.28 500.45 74.08 498.58 76.64 494.78 79.7 493.46 81.76 491.76 82 488.3 85.07 482.62 86.38 480.5 88.82 475.52 91.09 473.6 90.91 469.13 87.93 470.77 85.36 469.6 84.04 466.33 86 457.36 89.66 454.4 89.56 453.36 88.04 459.03 83.25 462.58 79.62 464.81 76.52 470.18 71.35 473.93 69.18 479.78 66.92 483.96 64.3 484.13 63.25 480.86 63.87 477.29 61.74 474.31 62.32 471.7 61.84 469.51 62.6 468.28 59.85 465.17 61.16 462.98 63.11 459.11 64.04 457.19 62.81 457.12 61.15 453.29 60.06 452.62 58.31 449.42 59.3 448.65 61.05 446.76 56.94 444.91 57.18 443.89 55.27 440.62 53.83 437.75 53.52 434.5 54.64 434.52 55.44 430.36 56.06 429.71 54.01 424.82 53.71 424.33 52.81 420.15 52.53 418.83 51.41 417.04 41.67 415.38 40.27 412.9 40.06 412.97 47.25 386.72 47.2 300.63 42.99 232.71 35.28 207.09 31.46 150.65 20.66 138.5 17.99 68.44 0 67.41 1.84 68.58 4.44 70.4 5.44 70.41 8.41 69.16 10.61 69.43 14.26 68.7 17.27 69.83 19.44 66.63 23 65.11 26.98 65.14 31.53 63.77 31.67 64.29 26.56 65.55 21.08 64 20.99 63.06 16.42 60.16 15.64 59.06 13.64 55.57 13.57 52.44 11.68 48.98 10.69 44.62 6.91 42.68 4.45 40.26 7.59 39.58 13.21 41.17 16.64 40.44 23.98 41.02 25.6 39.73 35.91 41.16 40.5 39.12 41.27 37.88 43.66 39.78 45.93 41.99 45.45 44.1 46.8 38.19 47.98 36.66 50.89 35.74 56.28 32.42 65.49 29.09 71.91 28.69 74.09 22.51 89.12 20.25 93.46 16.73 98.09 14.3 102.69 12.07 105.29 12.88 109.07 11.36 113.11 10.61 119.33 11.85 122.02 10.05 125.86 11.13 127.52 10.74 132.88 7.79 138.01 7.78 140.33 6.31 142.86 0.39 149.83 0 153.37 2.63 157.22 4.66 163.38 4.35 168.9 2.47 172.05 2.53 178.77 1.45 179.97 4.18 185.96 4.99 188.82 7.22 191.78 8.41 195.84 7.67 200.37 10.35 203.88 13.37 203.96 14.52 200.71 15.93 200.32 15.07 207.42 12.38 206.65 10.98 211.53 11.84 214.93 10.93 217.1 11.49 219.75 13.99 223.61 16.61 223.92 17.81 227.77 15.73 231 14.78 230.19 13.66 236.3 15.72 239.3 19.28 248.44 19.42 250.66 20.95 251.86 22.5 255.78 23.92 256.34 23.04 260.15 26.22 263.96 24.69 267.47 25.39 268.5 23.45 273.53 25.42 276.64 30.57 277.45 34.27 279.73 39.04 280.82 42.59 284.66 42.95 287.15 48.62 291.43 52.38 291.5 54.1 295.94 53.38 297.68 55.5 298.96 56.99 298.12 62.1 303.75 65.89 309.35 67.3 313.13 67.42 317.99 66.6 321.92 67.94 324.78 85.09 326.83 106.14 329.35 103.83 333.27 141.56 355.67 159.14 365.83 191.58 370.66 205.04 372.46 206.16 363.83 233.06 367.06 235.27 368.36 237.51 373.68 241.37 376.07 243.93 380.13 246.5 381.97 249.39 386.69 255.4 390.47 257.02 392.83 257.31 396.35 259.7 400.53 259.49 405.45 261.77 411.11 265.5 413.82 267.29 416.53 277.15 422.04 281.05 425.24 283.78 425.39 286.31 421.81 287.33 421.77 289.57 415.56 292.87 411.79 296.85 411.43 297.83 409.52 301.36 411.21 305.77 411.31 312.9 412.66 315.22 416.96 318.4 418.58 319.09 420.29 322.54 422.9 324.5 425.72 325.02 429.5 326.99 434.16 328.56 435.79 330.03 441.57 333.54 444.32 335.94 447.53 336.66 451.02 339.41 453.84 341.22 454.19 343.25 457.32 342.68 459.95 343.92 463.16 343.49 466.01 346.41 469.56 347.82 475.3 350.16 477.73 353.75 478.7 356.34 481.24 359.8 481.62 364.33 484.88 369.75 484.77 373.77 485.76 375.92 488.26 381.2 486.39 379.79 483.16 379.36 479.54 377.45 477.57 377.06 471.88 375.56 470.31 375.69 467.49 376.97 467.29 378 462.36 376 462.96 376.52 460.44 378.35 460.98 380.98 454.18 384.94 447.72 388.76 444.18 389.26 440.79 392.25 441.73 395.48 440.19 391.11 435.26 392.29 434.75 394.24 437.19 398.4 436.34 398.47 437.49 401.46 436.23 402.48 437.09 412.57 432.04 417.53 427.32 420.6 423.54 420.25 420.01 418.53 418.88 419.36 416.15 420.83 416.65 422.97 414.43 423.56 417.55 426.68 419 435.24 416.25 437.94 416.07 439.09 415.29 448.04 414.13 452.25 415.16 458.22 417.56 463.29 418.18 466.48 416.38 465.87 414.67 470.02 412.18 470.21 414.6 474.59 413.88 476.17 417.75 477.63 417.39 481.45 419.28 483.79 423.85 485.98 423.91 488.8 425.55 491.32 424.6 492.48 421.58 496.29 421.47 498.09 424.2 500.25 423.61 501.49 421.04 501.09 418.34 504.04 417.11 504.25 420.34 510.43 421.72 513.15 424.89 516.07 425.26 518.48 421.85 516.98 421.55 514.99 418.91 509.9 418.52 506.56 416.31 507.62 413.57 507.03 411.82 510.81 412.49 512.74 411.31 512.8 408.93 509.2 406.11 507.72 409.28 503.63 408.27 503.89 406.4 508.56 403.42 510.15 401.98 515.52 399.39 519.36 398.29 521.06 399.38 525.08 399.54 526.78 398.53 531.06 399.11 531.1 398.67 537.56 398.87 539.07 399.82 541.24 398.99 551.02 396.28 555.49 395.44 560.98 395.52 567.35 397.25 576.47 401.95 578.43 404.24 578.51 406.32 585.65 404.68 592.05 400.31 593.96 400.6 593.3 397.76 598.62 396.17 605.42 399.49 607.52 402.36 609.73 403.12 610.33 405.9 613.5 407.34 617.82 411.35 621.07 411.55 622.08 414.26 624.38 416.03 625.05 424.68 623.6 435.35 626.32 438.75 628.18 436.1 631.41 435.18 627.38 443.42 629.87 445.68 636.71 455.08 638.37 454.2 637.54 451.89 639.63 452.34 639.66 456.39 640.95 459.04 645.08 462.72 646.21 466.43 648.98 470.7 651.37 469.18 654.65 470.24 659.79 477.88 659.44 480.89 661.36 482.55 666.71 480.83 669.7 478.9 671.13 479.53 673.85 475.49 673.03 474.06 673.93 469.04 675.47 468.43 674.71 452.76 674.06 448.44 672.4 444.41 665.29 431.85 661.07 425.71 659.71 419.81 660.64 418.72 651.3 407.02 644.64 395.73 641.15 386.9 638.9 378.87 638.34 370.75 639.93 369.09 639.62 366.09 640.81 362.91 641.04 359.52 643.89 352.48 646.79 347.84 649.8 345.75 649.95 344.38 653 340.86 656.06 339.23 657.66 336.18 660.97 333.01 661.32 330.65 664.83 330.03 666.91 326.47 666.86 322.4 669.25 316.95 672.09 313.23 674.6 311.82 679.93 309.52 683.44 310.27 684.44 303.85 687.75 298.28 692.26 293.64 695.38 291.82 700.12 290.32 702.96 290.39 705.13 284.45 703.22 284.2 700.43 281.45 700.62 278.07 705.59 276.85 708.41 271.42 710.12 270.81 710.56 268.45 708.61 264.16 706.1 265.41 704.26 264.02 699.9 265.89 699.18 265.21 695.3 266.97 694.81 265.64 698.11 264.66 698.67 263.47 703.46 261.26 703.89 260.22 708.16 260.08 704.87 252.91 701.5 246.29 694.13 247.31 690.99 245.69 691.47 244.52 695.21 246.91 696.73 244.2 694.57 243.16 694.34 240.71 695.92 238.35 693.35 234.6 694.09 228.95 689.53 227.22 687.6 225.12 682.25 224.97 680.89 222.09 677.15 223.49 676.15 221.67 676.7 218.76 678.29 217.61 676.7 220.91 678.17 222.99 680.55 220.78 682.56 223.35 687.62 223.87 691.57 226.14 691.93 224.46 690.23 222.43 690.02 220.09 687.51 217.51 685.93 213.31 686.81 210.44 685.95 204.96 686.56 202.57 689.8 199.38 689.48 197.54 691.19 196.76 691.63 200.42 689.29 201.58 688.48 205.38 691.02 211.11 690.44 213.02 691.25 217.5 690.3 217.7 692.09 220.84 695.15 220.56 695.6 219.03 698.43 221.64 697.1 223.36 698.51 224.31 699.11 227.47 702.06 225.93 699.68 234.09 699.67 240.12 700.98 242.52 703.22 240.55 704.72 232.88 705.01 228.34 706.74 226.76 707.93 223.15 709.01 214.6 706.95 208.24 705.66 208.38 700.31 198.46 703.83 200.21 708.31 200.82 710.35 203.59 711.82 198.34 714.19 195.53 716.89 186.99 716.24 176.54 715.4 174.46 711.27 173.93 711.58 172.04 713.78 169.03 715.74 171.8 717.75 170.37 720.79 169.82 725.1 167.94 734.76 161.21 739.17 157.14 736.74 156.8 735.87 154.74 732.41 158.74 729.97 160.01 724.92 161.26 723.96 162.69 717.68 162.59 740.88 150.2 745.85 147.94 745.28 143.93 745.95 140.8 747.7 140.7 748.19 141.23 747.58 145.37 750.16 144.26 752.51 142.78 752.21 141.42 754.31 140.3 756.19 141.66 758.52 140.9 764.42 136.91 764.65 134.06 760.74 137.03 756.49 136.27 755.72 134.19 754.09 133.97 753.76 131.52 751.19 129.09 748.11 129.5 747.4 126.62 748.89 123.62 748.74 120.83 747.37 117.77 747.99 113.87 748.61 108.52 750.51 105.71 750.15 103.94 752.12 102.61 750.76 100.82 752.83 96.8 754.02 98.64 756.1 98.48 757.23 96.11 759.17 95.19 759.93 92.5 762.62 92.57 764.44 89.69 763.75 88.68 764.42 84.14 763.54 82.28 765.33 81.15 766.17 83.8 769.53 82.81 770.65 81.21 772 83.29 774.63 80.98 773.07 78.25 774.48 78.06 776.21 80.51 778.9 75.39 781.33 74.88 781.05 73.09 783.02 73.03 783.67 70.64 785.58 71.26 787.34 67.55 783.02 61.81"/><polygon points="494.56 63.14 496.26 62.38 497.57 59.17 489.87 64.17 489.83 66.19 491.49 65.72 494.56 63.14"/><polygon points="540.2 104.34 541.89 103.75 541.45 101.47 540.59 101.04 540.2 104.34"/><polygon points="64.22 13.96 65.78 15.9 67.13 12.29 65.28 12.65 64.22 13.96"/><polygon points="65.95 7.96 65 4.59 63 6.57 62.1 8.81 64.7 10.34 65.95 7.96"/></svg>


(function() {
    function qa(a, b, c, d, e) {
        this.type = a;
        this.target = b;
        this.callback = c;
        this.context = d;
        this.priority = e | 0;
        "function" != typeof c && j("[BoundEvent] Error: callback is not a function; event:", this, "target:", b, "Callback:", c)
    }

    function D() {}

    function y() {}

    function I(a, b) {
        this.x = a;
        this.y = b
    }

    function P(a, b) {
        this.lat = a;
        this.lng = b
    }

    function Ba(a, b, c, d) {
        this.left = a || 0;
        this.top = b || 0;
        this.right = c || 0;
        this.bottom = d || 0
    }

    function q() {
        this._flipped = !1;
        4 == arguments.length && this.setBounds.apply(this, arguments)
    }

    function V(a,
        b) {
        this.mx = this.my = 1;
        this.bx = this.by = 0;
        this.widthInPixels = a || 256;
        this.heightInPixels = b || 256
    }

    function Ka(a, b) {
        function c(a) {
            var c = a.touches,
                d = c.length,
                h = x;
            1 != d && m && (m = !1, f.dispatchEvent("dragend"));
            2 > d && sa && (sa = !1, f.dispatchEvent("pinchend"));
            if (0 == d) i && (1 == h && f.dispatchEvent("doubletap", o), i = !1), B && (1 == h && (i = !0), B = !1), x = d;
            else {
                var g = {
                        zoomRatio: 1,
                        deltaScale: 1,
                        deltaX: 0,
                        deltaY: 0,
                        shiftX: 0,
                        shiftY: 0
                    },
                    u = c.length,
                    E = 0,
                    C = 0,
                    v, A, z = 0;
                for (v = 0; v < u; v++) {
                    A = c[v];
                    var D = 1 / (v + 1),
                        F = A.pageX;
                    A = A.pageY;
                    b.containsPoint(F,
                        A) && (z += 1);
                    E = D * F + (1 - D) * E;
                    C = D * A + (1 - D) * C
                }
                g.inside = z;
                z = 0;
                if (0 < u) {
                    for (v = 0; v < u; v++) A = c[v], z += I.distance(E, C, A.pageX, A.pageY);
                    z /= u
                }
                g.pageX = E;
                g.pageY = C;
                g.mapX = E - b.left;
                g.mapY = C - b.bottom;
                g.centerX = b.centerX();
                g.centerY = b.centerY();
                g.radius = z;
                g.time = (new Date).getTime();
                g.touchEvent = a;
                g.touchId = n;
                c = g.pageX;
                u = g.pageY;
                if (!(d > h && 0 == g.inside)) {
                    if (1 == d) {
                        if (0 == h && (i && (h = I.distance(c, u, o.pageX, o.pageY), g.time - o.time > e || 12 < h ? i = !1 : 1 == d && i && a.preventDefault()), !1 == i)) B = !0, o = g, r = g.time;
                        m ? (g.shiftX = c - N, g.shiftY = u - s, g.deltaX =
                            c - q, g.deltaY = u - p, f.dispatchEvent("drag", g), q = c, p = u) : (q = N = c, p = s = u, m = !0, n += 1, g.touchId = n, f.dispatchEvent("dragstart", g))
                    } else if (1 < d) sa ? (g.startX = j, g.startY = l, g.zoomRatio = g.radius / k, g.deltaScale = g.radius / y, g.shiftX = g.pageX - g.startX, g.shiftY = g.pageY - g.startY, g.deltaX = g.pageX - q, g.deltaY = g.pageY - p, f.dispatchEvent("pinch", g), q = g.pageX, p = g.pageY, y = g.radius) : (sa = !0, y = k = g.radius, q = j = g.pageX, p = l = g.pageY, n += 1, g.touchId = n, f.dispatchEvent("pinchstart", g));
                    x = d
                }
            }
        }

        function d() {
            h && (h = !1, f.dispatchEvent("touchend"))
        }
        var e = 600,
            f = this,
            h = !1,
            i = !1,
            r = 0,
            o, B = !1,
            x = 0,
            sa = !1,
            j, l, k, m = !1,
            N, s, n = 1,
            q, p, y;
        g.addEventListener(a, "touchstart", function(a) {
            c(a);
            return !1
        });
        g.addEventListener(document, "touchend", function(a) {
            c(a);
            elapsed = (new Date).getTime() - r;
            400 > elapsed ? (h = !0, o && f.dispatchEvent("touchstart", {
                pageX: o.pageX,
                pageY: o.pageY
            })) : d()
        });
        g.addEventListener(document, "touchmove", function(a) {
            d();
            c(a)
        })
    }

    function u() {
        this._ignoredElements = [];
        this._overMap = this.dragging = !1;
        this._boundsOnPage = new q;
        g.touchEnabled || (g.addEventListener(document,
            "mousemove", this.throttledMouseMove, this), g.addEventListener(document.body, "mousedown", this.handleMouseDown, this), g.addEventListener(window, "mouseup", this.handleMouseUp, this))
    }

    function La(a, b, c, d) {
        if (!a.isReady() || !c.isReady()) j("[JoinedTable.joinTables()] Source or destination table is not ready; src:", c.isReady(), "dest:", a.isReady());
        else if (!a.fieldExists(b) || !c.fieldExists(d)) j("[JoinedTable.joinTable()] source or destination table is missing its key field; src:", d, "dest:", b);
        else {
            for (var e = a.schema,
                    f = c.schema, h = a.size(), i = c.size(), r = m.getKeys(f), r = m.filter(r, function(a) {
                        return a != b
                    }), o = r.length, B = m.createArray(o, function() {
                        return Array(h)
                    }), x = m.map(r, function(a) {
                        return c.getFieldData(a)
                    }), g = a.indexOnField(b), l = c.getFieldData(d), d = Array(h), n = 0; n < i; n++) {
                var q = g[l[n]];
                d[n] = q
            }
            for (n = 0; n < o; n++)
                for (var g = B[n], l = x[n], ra = 0; ra < i; ra++) q = d[ra], void 0 !== q && (g[q] = l[ra]);
            i = {};
            o = {};
            k.copyAllParams(i, e);
            k.copyAllParams(o, a.data);
            k.copyNewParams(i, f);
            k.copyAllParams(o, m.arrayToIndex(r, B));
            a.populate(o, i)
        }
    }

    function p(a) {
        this.__initEmptyTable();
        a && a.schema && a.data && this.populate(a.data, a.schema)
    }

    function Ma(a, b) {
        var c = new Ca(b);
        this.nextRecord = new A(a, -1);
        this.size = function() {
            return c.size()
        };
        this.hasNext = function() {
            var a = c.hasNext();
            this.nextRecord.id = a ? c.nextId : -1;
            return a
        };
        this.getIds = function() {
            return b
        };
        this.getFieldData = function(c) {
            for (var e = [], c = a.getFieldData(c), f = 0, h = b.length; f < h; f++) e.push(c[b[f]]);
            return e
        }
    }

    function A(a, b) {
        this.id = b;
        this._data = (this._table = a) ? a.data : {}
    }

    function Ca(a) {
        this.ids = a;
        this._idx = 0
    }

    function $(a, b, c, d) {
        this._geo =
            a;
        this._geoKey = b;
        this.waitFor(a);
        this._data = c;
        this._dataKey = d;
        this.waitFor(c);
        c.addEventListener("change", this.handleDataChange, this);
        this.startWaiting()
    }

    function W(a, b) {
        this.id = a;
        this.parts = [];
        b && this.addPartData(b);
        this.sortKey = ""
    }

    function ka(a, b) {
        this._xx = a;
        this._yy = b;
        this._size = a.length;
        this.nextY = this.nextX = this._idx = 0
    }

    function ta(a) {
        this._str = a;
        this._idx = 0;
        this._aligned = !0;
        this._offByte = 0;
        this._useBE = !0;
        this.rewind = function() {
            this._idx = 0;
            this._aligned = !0
        };
        this.useBigEndian = function() {
            this._useBE = !0
        };
        this.useLittleEndian = function() {
            this._useBE = !1
        };
        this.readUnsignedInt = function() {
            var a = this.readUnsignedShort(),
                c = this.readUnsignedShort();
            return this._useBE ? a << 16 | c : c << 16 | a
        }
    }

    function X(a) {
        this._scale = a;
        this._parts = this._idx = this._size = 0
    }

    function Ya(a, b, c, d) {
        var e = 0 < a && 1 < b && 0 < c;
        this.level = 0;
        this.updateContentWidth = function(f) {
            if (!1 !== e) {
                for (var f = f * d, h = 0, i = c; f < i && h < a;) h++, i /= b;
                this.level = h
            }
        }
    }

    function da(a, b, c) {
        if (m.isArray(c)) {
            c = m.arrayToIndex(c);
            a = new ta(a);
            a.useLittleEndian();
            var d = this.parseHeader(a);
            if (d)
                if (5 == d.shp_type && d.topology) {
                    var e = d.simplified_levels,
                        f = 2;
                    0 < e && 1 < d.level_resolution && (f = Math.pow(2, 1 / d.level_resolution));
                    this._vectorScale = new Ya(e, f, 1 << d.level_one_precision, g.iPhone || g.iPad ? 0.4 : 0.7);
                    this._layerBounds = this.parseVectors(a, b || null, d);
                    this._polygonShapes = this.parseTopologyData(a, s.POLYGONS in c, s.INNERLINES in c || s.OUTERLINES in c);
                    b = this._sharedArcIndex;
                    if (s.POLYLINES in c) this._lineShapes = this.initLines(s.POLYLINES);
                    if (s.OUTERLINES in c) this._outerShapes = this.initLines(s.OUTERLINES,
                        b);
                    if (s.INNERLINES in c) this._innerShapes = this.initLines(s.INNERLINES, b)
                } else j("[MshpParser] Unable to parse; Parser currently only supports polygon data with topology. Found type:", d.shp_type, "topology?", d.topology);
            else j("[MshpParser.parseByteArray()] error parsing file header; stopping.")
        } else j("[MshpParser()] Requires an array of shape types.")
    }

    function Za() {
        Y.prototype.handleReadyState = function() {
            this._parser = new da(this._utf16Str, this._transform, this._types)
        };
        Y.prototype.extractProjectedShapes =
            function(a) {
                return this._parser.extractProjectedShapes(a)
            };
        Da = function(a, b) {
            var c, d, e;
            this.getBounds = function() {
                return d
            };
            this.handleReadyState = function() {
                var f = a.extractProjectedShapes(b);
                c = f.shapes;
                d = f.bounds;
                e = f.vectorScaler;
                this._index = new la;
                this._index.init(c, d)
            };
            this.updateContentSize = function(a) {
                e && e.updateContentWidth(a)
            };
            this.getShapes = function() {
                return c
            };
            this.getShapesInBoundingBox = function(a, b) {
                if (this.isReady()) return !b && a.containsPoint(d.left, d.top) && a.containsPoint(d.right, d.bottom) ?
                    c.concat() : this._index.getSymbolsInBoundingBox(a, b)
            };
            this.getShapeById = function(a) {
                return c ? c[a] : null
            };
            this.waitFor(a);
            this.startWaiting()
        };
        k.inherit(Da, y)
    }

    function L() {
        this.useEllipsoid = !0;
        this._DEG2RAD = Math.PI / 180;
        this._RAD2DEG = 180 / Math.PI;
        this._R = 6378137;
        this._E = 0.0818191908426215;
        this._A = 6378137;
        this._y0 = this._x0 = 0;
        this._k0 = 1;
        this._xy = new I;
        this._ll = new P
    }

    function ma(a, b) {
        this.__super__();
        this.name = "Mercator";
        this._lat0 = (a || 0) * this._DEG2RAD;
        this._lng0 = (b || 0) * this._DEG2RAD
    }

    function Na() {
        var a =
            new ma;
        a.useEllipsoid = !1;
        a.name = "SphericalMercator";
        return a
    }

    function Oa() {
        var a = new Na;
        return new J(a)
    }

    function J(a) {
        this.projection = a;
        this.tileWidthInPixels = this.tileHeightInPixels = 256;
        this.levelOneScale = 6378137 / this.tileWidthPixels;
        this.baseZoom = 4;
        this.baseScale = 0
    }

    function Z(a, b) {
        var c = !isNaN(a),
            d, e;
        if (b && 1 > b) c ? (c = a >> 16 & 255, e = a >> 8 & 255, d = a & 255) : m.isString(a) && (matches = $a.exec(a)) ? (c = matches[1], e = matches[2], d = matches[3], 5 > matches[0].length && (c += c, e += e, d += d), c = parseInt(c, 16), e = parseInt(e, 16), d = parseInt(d,
            16)) : d = e = c = 0, c = "rgba(" + c + "," + e + "," + d + "," + b + ")";
        else if (c) {
            for (c = a.toString(16); 6 > c.length;) c = "0" + c;
            c = "#" + c
        } else c = a;
        return c
    }

    function Ea() {
        this.fillColor = null;
        this.fillAlpha = 1;
        this.strokeColor = null;
        this.strokeWeight = this.strokeAlpha = 1;
        this.styler = void 0
    }

    function na() {
        Ea.call(this);
        this._prevFill = -1;
        this.hasFill = function() {
            return null != this.fillColor || null != this.specialFill || !!this.fillColors
        }
    }

    function ea() {
        this._fills = {}
    }

    function E() {
        this._stylers = {};
        this.setDefaultStyle({
            fillAlpha: 1,
            strokeAlpha: 1
        });
        this.constructor == E && this.startWaiting()
    }

    function F(a) {
        this.__super__();
        a.addEventListener("change", this.handleDataChange, this);
        this._data = a;
        this.waitFor(a).startWaiting()
    }

    function fa() {}

    function Pa(a) {
        this.getValue = function() {
            return a
        }
    }

    function Fa(a, b) {
        this._data = a;
        this._field = b
    }

    function oa(a, b, c) {
        this._data = a;
        this._func = b;
        this._useCaching = !1 !== c
    }

    function Ga(a, b) {
        this._breaks = a;
        this._values = b
    }

    function R(a, b) {
        this.name = a;
        this._map = b;
        this._ops = []
    }

    function ua(a) {
        this._map = a;
        this._currName = "";
        this.views = {}
    }

    function l(a, b) {
        if (l._extensions) {
            var c = g.getElement(a);
            if (c) {
                var d = c.id;
                if (!d) c.id = d = m.getUniqueName("nytg-map-");
                if (k.getNamespace("nytg.map.containerIds")[d]) {
                    var e = m.getUniqueName(d);
                    g.log("[Map] id collision; Renaming map container from " + d + " to " + e);
                    c.id = d = e
                }
                c.style.overflow = "visible";
                g.makeUnselectable(c);
                this._opts = b;
                this.divId = d;
                this.div = c;
                this.init()
            } else g.log("[Map] Container div not found -- can't continue.")
        } else g.log("[Map] Need to call Map.init() first.")
    }

    function v() {}

    function M() {
        this._symbolId = -1;
        this._baseLyr = null;
        this.type = "hover"
    }

    function n(a) {
        this._opts = a || {}
    }

    function G() {}

    function H(a, b) {
        this._symbols = a;
        this.__super__(b);
        this.type = "bubble"
    }

    function Y() {
        var a = Array.prototype.slice.call(arguments);
        0 == a.length && (j("[ShapeData(...string)] Constructor requires one or more of these types:", s.POLYGONS, s.POLYLINES, s.INNERLINES, s.OUTERLINES), j("  -- using polygons as a default."), a = [s.POLYGONS]);
        this._types = a
    }

    function z(a, b) {
        this._symbols = a;
        var c = a.getShapeTypes(),
            d = b && b.shapeType || null;
        !d &&
            1 == c.length && (d = c[0]);
        if (!d || -1 == m.findInArray(d, c)) j("[ShapeLayer()] Requested type --", d, "-- missing from ShapeData types --", c, "-- using first available type."), d = c[0];
        this._shapeType = d;
        this.__super__(b);
        this.type = "shape";
        this.style = {}
    }

    function Qa(a) {
        this._opts = a || {}
    }

    function aa() {}

    function ba(a) {
        this.__super__(a);
        this.type = "label"
    }

    function va(a, b) {
        var c = document.createElement("script");
        c.type = "text/javascript";
        c.charset = b || "utf-8";
        var d = this,
            e = !!c.readyState;
        if (e) {
            var f = "loaded|complete";
            c.onreadystatechange =
                function() {
                    if (-1 != f.indexOf(c.readyState)) d.startWaiting(), c.onreadystatechange = null
                }
        } else c.onload = function() {
            d.startWaiting()
        };
        g.appendToHead(c);
        var h = c.readyState;
        c.src = a;
        e && c.readyState == h && (f = "loaded");
        this.unload = function() {
            g.removeElement(c)
        }
    }

    function Ra(a, b, c) {
        var d = this,
            e = k.getNamespace("nytg.map.loaderIndex"),
            f = function(a) {
                d.data = a;
                d.startWaiting()
            },
            h = e[b];
        h ? (j("[JsonPLoader] Re-using loader;", b), h.addEventListener("ready", function() {
            f(h.data)
        })) : (e[b] = this, k.exportObject(b, f), a = g.extendUrl(a,
            "callback=" + b), a = new va(a, c || "utf-8"), this.waitFor(a))
    }

    function C(a, b) {
        this.REMOVE = !0;
        this._opts = {
            peg: 0.45,
            offset: 18,
            fixed: !1
        };
        k.copyAllParams(this._opts, b);
        this._callback = a;
        var c;
        this._fixedPosition = this._opts.fixed && !g.ie;
        c = "padding:6px 8px 5px 6px; z-index:50; background-color:white; font-family:Arial, Helvetica;" + (this._fixedPosition ? " position:fixed;" : " position:absolute;");
        c = g.createElement("div", c);
        c.className = "nytg-popup";
        this.container = c;
        this._fitsBelow = this._fitsAbove = !0;
        this._opts.map &&
            this.__initMap(this._opts.map)
    }

    function wa() {}

    function Ha(a) {
        this._baseTable = a;
        this.__super__()
    }

    function S(a, b, c, d, e) {
        this._newProxyIndex = {};
        this.QUEUE_PRIORITY = 999;
        var f = m.getUniqueName("nytg.map.__jscallback_"),
            h = m.getUniqueName("nytg.map.__jsoncallback_"),
            i = this;
        k.exportObject(f, function() {
            i.handleFlashEvent.apply(i, arguments)
        });
        k.exportObject(h, function() {
            i.handleFlashEventJson.apply(i, arguments)
        });
        var f = {
                jsEventHandler: f,
                jsonEventHandler: h,
                initWidth: b,
                initHeight: c
            },
            h = document.getElementById(a),
            a = a + "_swf",
            r = g.createElement("div");
        r.id = a;
        h.appendChild(r);
        this.swfId = a;
        pa.embedSWF(d, a, b ? "" + b : "100%", c ? "" + c : "100%", e, null, f, {
            allowScriptAccess: "always",
            wmode: "opaque"
        })
    }

    function ab() {
        l.prototype.setFallbackImage = function(a) {
            if (!this._flashChannel) {
                var b = this.div,
                    a = g.cacheBustUrl(a);
                b.innerHTML = '<img src="' + a + '"></img>';
                j("[Map flash] setFallbackImage()]", a)
            }
        };
        l.prototype.addLayer = function() {}
    }

    function bb() {
        l.prototype.init = function() {
            this.initMap();
            this.initFlashMap();
            this.mouse && (this.mouse.addEventListener("mouseover",
                this.handleMouseOver, this), this.mouse.addEventListener("mouseout", this.handleMouseOut, this))
        };
        l.prototype.handleMouseOver = function() {
            this.callFlashMethod("allowMouseHover", !0)
        };
        l.prototype.handleMouseOut = function() {
            this.callFlashMethod("allowMouseHover", !1)
        };
        l.prototype.initFlashMap = function() {
            j("%%% Map.initFlashMap()");
            var a = this._opts;
            a.combineLayers = !1;
            var b = a.swfUrl || l.swfUrl || "";
            if (b) {
                var c = isNaN(a.width) ? 0 : a.width,
                    d = isNaN(a.height) ? 0 : a.height,
                    e = new S(this.divId, c, d, b, Sa);
                e.enableFlashChannel(this,
                    "hybrid-map");
                flashOpts = {
                    scrollWheelZoom: a.scrollWheelZoom,
                    dragging: a.dragging,
                    doubleClickZoom: a.doubleClickZoom,
                    limitPanning: a.limitPanning
                };
                flashOpts.width_pixels = this.getWidthInPixels();
                flashOpts.height_pixels = this.getHeightInPixels();
                flashOpts.center = this.getInitialCenterAsLatLng();
                flashOpts.crs = this.getCRS();
                b = this.getInitialBounds();
                flashOpts.width_km = b.width() / 1E3;
                flashOpts.height_km = b.height() / 1E3;
                flashOpts.backgroundColor = a.backgroundColor;
                this.createFlashObject("map", flashOpts);
                e.addEventListener("ready",
                    function() {
                        this.mouse.setMapContainer(e.swf)
                    }, this);
                this.addFlashEventListener("navigate", this.handleMapNavigation)
            } else j("[Map for Flash.init()] Missing swf url; opts:", a)
        };
        l.prototype.handleMapNavigation = function() {
            this.dispatchEvent("navigate")
        };
        l.prototype.display = function() {
            this.callFlashMethod("display");
            this.startWaiting()
        };
        l.prototype.zoom = function(a) {
            this.callFlashMethod("zoom", a)
        };
        l.prototype.__procMouseData = function(a) {
            if (a.mapWidth && a.mapHeight) {
                var b = this.getWidthInPixels(),
                    c = this.getHeightInPixels();
                a.mapX = Math.round(a.mapX * b / a.mapWidth);
                a.mapY = Math.round(a.mapY * c / a.mapHeight)
            }
            this.updateContainerBounds();
            a.pageX = a.mapX + this._leftPix;
            a.pageY = a.mapY + this._topPix
        };
        l.prototype.getZoom = function() {
            return this.callFlashMethod("getZoom")
        };
        l.prototype.getScale = function() {
            return this.callFlashMethod("getScale")
        };
        l.prototype.getCenterAsLatLng = function() {
            return this.callFlashMethod("getCenterAsLatLng")
        };
        v.prototype.hide = function() {
            this._hidden = !0;
            this.callFlashMethod("hide")
        };
        v.prototype.show = function() {
            this._hidden = !1;
            this.callFlashMethod("show")
        };
        v.prototype.initFlashMapLayer = function() {
            this._map._flashChannel.enableFlashChannel(this, "MapLayer_" + m.getUniqueName())
        };
        n.prototype.setHoverById = function(a) {
            this.callFlashMethod("setHoverById", a)
        };
        n.prototype.getSymbolById = function(a) {
            var b = this.callFlashMethod("getSymbolById", a);
            if (!b) return j("[SymbolLayer.getSymbolById()] returned invalid object:", b), {};
            var c = new q;
            c.setBounds(b.left, b.top, b.right, b.bottom);
            c.id = a;
            return c
        };
        n.prototype.clearHover = function() {
            j("[SymbolLayer.clearHover()]");
            this.callFlashMethod("clearHover")
        };
        n.prototype.initFlashSymbolLayer = function() {
            this.addFlashEventListener("click", this.handleMouseEvent);
            this.addFlashEventListener("rollover", this.handleMouseEvent);
            this.addFlashEventListener("rollout", this.handleMouseEvent);
            this.addEventListener("click", this.handleClick, this)
        };
        n.prototype.handleClick = function(a) {
            var b = {
                hitLayer: this,
                hitId: a.data.id
            };
            k.copyAllParams(b, a.data);
            this._map.dispatchEvent("click", b)
        };
        n.prototype.handleMouseEvent = function(a) {
            var b = a.data;
            this._map.__procMouseData(b);
            b.rec = this.getRecordById(a.id) || null;
            b.id = a.id;
            this.dispatchEvent(a.type, b)
        };
        n.prototype.getFlashOptions = function() {
            var a = this._opts,
                b = {};
            b.interactive = !!this._interactive;
            b.hidden = !!this._hidden;
            b.hitHelper = a.hitHelper && a.hitHelper._flashName || "";
            b.hitPriority = a.hitPriority;
            return b
        };
        z.prototype.init = function() {
            this.initFlashMapLayer();
            this.initFlashSymbolLayer();
            this.waitFor(this._symbols)
        };
        z.prototype.handleReadyState = function() {
            var a = this.getFlashOptions();
            a.data =
                this._symbols._utf16Str;
            var b = this._symbols;
            a.projection = b._transform && b._transform.name || "";
            a.shapeType = this._shapeType;
            this.createFlashObject("shapeLayer", a)
        };
        n.prototype.refresh = function() {
            if (this.isReady()) {
                var a = this.getStyle();
                this.callFlashMethod("setInteraction", !!this._interactive);
                this.callFlashMethod("updateStyle", a)
            }
        };
        Qa.prototype.init = function() {
            this.initFlashMapLayer()
        };
        H.prototype.init = function() {
            this.waitFor(this._symbols);
            this.initFlashMapLayer();
            this.initFlashSymbolLayer()
        };
        H.prototype.handleReadyState =
            function() {
                var a = this.getFlashOptions(),
                    b = this._opts;
                a.projection = b.transformer && b.transformer.name || "";
                a.bubbles = this._symbols || void 0;
                this.createFlashObject("bubbleLayer", a)
            }
    }

    function ca(a) {
        this.map = a;
        this.mouse = a.mouse;
        this.mouse.addEventListener("mousemove", this.handleMove, this, -1);
        this.mouse.addEventListener("click", this.handleClick, this, -1);
        this._layers = [];
        this._activeLyr = null
    }

    function xa() {
        this._style = new na;
        this._ext = new V
    }

    function K(a, b) {
        this.ROWS = b || 12;
        this.COLS = a || 16
    }

    function la(a, b) {
        this.__super__(a,
            b)
    }

    function cb() {
        function a(a, c, d) {
            this.id = a;
            this.x = c;
            this.y = d;
            this.sortKey = ""
        }
        G.prototype.getBounds = function() {
            return this._bounds || new q
        };
        G.prototype.importFromDataTable = function(b, c, d, e) {
            var f = function(a, b, c) {
                this.id = a;
                this.x = b;
                this.y = c
            };
            f.prototype = {
                size: 0,
                setDefaultSize: function(a) {
                    f.prototype.size = a
                }
            };
            k.extendPrototype(f, a);
            this._data = b;
            var h = new q,
                i = [];
            this._bubbles = i;
            b.addEventListener("ready", function() {
                for (var a = b.getFieldData(c), o = b.getFieldData(d), B = b.size(), x = Infinity, g = Infinity, j = -Infinity,
                        l = -Infinity, k = 0; k < B; k++) {
                    var m = e.projectLatLngFast(a[k], o[k]),
                        n = m.x,
                        m = m.y;
                    n < x ? x = n : n > j && (j = n);
                    m < g ? g = m : m > l && (l = m);
                    n = new f(k, n, m);
                    i.push(n)
                }
                h.setBounds(x, l, j, g);
                this._bounds = h;
                this._index = new K;
                this._index.init(i, h);
                this.startWaiting()
            }, this);
            return this
        };
        G.prototype.testHitAtXY = function(a, c, d, e) {
            for (var f = 15 * d, h = f, i, r = Infinity, o = -1, B = !1, e = this.getCirclesInBoundingBox((new q).setBounds(a - f, c + f, a + f, c - f), e), f = e.length - 1; 0 <= f; f--) {
                var x = e[f],
                    g = (x.x - a) * (x.x - a) + (x.y - c) * (x.y - c),
                    j = 0.5 * x.size,
                    l = (3 > j ? 3 : j) * d,
                    k = l * l,
                    m = Math.sqrt(g),
                    l = m - l;
                if (g <= k) {
                    if (!B || j < r || j == r && m < i) B = !0, o = x.id, r = j, i = m
                } else if (!B && l < h) h = l, o = x.id
            }
            return o
        };
        G.prototype.updateCircleSizes = function(a, c, d) {
            var d = 1 + (a.scaling || 0) * (d / c - 1),
                e = a.strokeWeight || 0,
                f = a.bubbleSize * d || 0,
                a = a.bubbleSizes,
                h = !!a,
                i = this._bubbles;
            if (i && (h || !(0.5 >= f))) {
                for (var r = O.canvasPixelRatio || 1, o = 0, B = i.length; o < B; o++) h && (f = a[o] * d), i[o].setSize(f * r, (f + e) * c);
                this._index.update(c)
            }
        };
        G.prototype.handleReadyState = function() {};
        G.prototype.getCirclesInBoundingBox = function(b, c) {
            if (!this.isReady()) return [];
            var d = this._index.getSymbolsInBoundingBox(b, c);
            m.sortOnKeyFunction(d, a.prototype.getSortKey);
            return d
        };
        G.prototype.getCircleById = function(a) {
            return this._bubbles[a]
        };
        k.extendPrototype(a, q);
        a.prototype.setSize = function(a, c) {
            var d = 0.5 * c,
                e = this.x,
                f = this.y;
            this.left = e - d;
            this.top = f + d;
            this.right = e + d;
            this.bottom = f - d;
            this.size = a;
            d = 3328 - 5 * a | 0;
            1 > d && (d = 1);
            e = this.id % 3328;
            this.sortKey = String.fromCharCode(d) + String.fromCharCode(e)
        };
        a.prototype.getSortKey = function() {
            return this.sortKey
        };
        a.prototype.draw = function(a,
            c) {
            var d = this.x * c.mx + c.bx,
                e = this.y * c.my + c.by,
                f = this.size || 0;
            0 < f && a.arc(d, e, 0.5 * f, 0, 2 * Math.PI, !0)
        }
    }

    function ga() {
        this._style = new na;
        this._ext = new V;
        this.init()
    }

    function db() {
        function a() {
            this.placementCSS = {
                e: "margin-left:10px; bottom:0.5em;",
                c: "left:-50%; bottom:0.5em;",
                w: "left:-100%; margin-right:8px;bottom:0.5em;",
                n: "left:-50%; bottom:1.6em;",
                s: "left:-50%; margin-top:0.3em;",
                nw: "bottom:1.5em; left:-100%;",
                sw: "margin-top:0.3em; left:-100%;",
                ne: "bottom:1.5em;",
                se: "margin-top:0.4em;"
            }
        }

        function b(a,
            b, e) {
            this.id = a;
            this.x = b;
            this.y = e;
            this.text = "";
            this.dotSize = 0;
            a = g.createElement("div", "position:absolute");
            b = g.createElement("div", "position:relative;");
            a.appendChild(b);
            this.labelDiv = a;
            this.textDiv = b;
            a.className = "nytg-map-label"
        }
        a.dotCSS = {};
        a.getDotCSS = function(a) {
            var b = 0.5 * a,
                e = -b;
            return this.dotCSS[a] || (this.dotCSS[a] = ["position:absolute; left:", e, "px; top:", e, "px; background: #000; width: ", a, "px; height: ", a, "px; -moz-border-radius: ", b, "px; -webkit-border-radius: ", b, "px; border-radius: ", b, "px;"].join(""))
        };
        a.prototype.toString = function() {
            return "[HybridLabelStyle]"
        };
        a.prototype.setId = function(a) {
            var b = this._style || {},
                e = "position:relative; font-family:Arial, Helvetica;";
            this.size && (e += "font-size:" + ("" + (this.haveSizes && b.size[a] || b.size) + "px") + ";");
            if (void 0 !== b.fillColor) var f = 0,
                f = this.haveColors ? b.fillColor[a] : b.fillColor | 0,
                e = e + ("color:" + Z(f) + ";");
            b.useHalo && (e += "text-shadow: 0 0 2px #FFF; ");
            b.bold && (e += "font-weight:bold;");
            f = this.havePlacements && b.placement[a] || b.placement;
            e += this.placementCSS[f] ||
                this.placementCSS.n;
            this.dotSize = "c" == f ? 0 : this.haveDotSizes && b.dotSize[a] || b.dotSize || 0;
            this.css = e;
            this.text = this.haveTexts && b.text[a] || b.text || ""
        };
        a.prototype.updateStyle = function(a) {
            this.havePlacements = m.isArray(a.placement);
            this.haveSizes = m.isArray(a.size);
            this.haveDotSizes = m.isArray(a.dotSize);
            this.haveTexts = m.isArray(a.text);
            this.haveColors = m.isArray(a.fillColor);
            this._style = a
        };
        LabelRenderer = function(b) {
            this.container = b;
            this._labelIndex = {};
            this._style = new a
        };
        LabelRenderer.prototype.updateSymbolStyles =
            function(a, b, e) {
                if (e != this._currZoom) {
                    this._currZoom = e;
                    e = this._style;
                    e.updateStyle(b);
                    for (var b = 0, f = a.length; b < f; b++) {
                        var h = a[b];
                        e.setId(h.id);
                        var i = e.css;
                        e.text != h.text && h.setText(e.text);
                        h.textDiv.style.cssText = i;
                        h.setDotSize(e.dotSize)
                    }
                }
            };
        LabelRenderer.prototype.showLabels = function(a, b, e) {
            this._style.updateStyle(e);
            for (var e = {}, f = this._labelIndex, h = this.container, i = 0, r = a.length; i < r; i++) {
                var o = a[i],
                    B = o.id,
                    g = b.transformXY(o.x, o.y);
                f[B] || (o.attach(h), f[B] = o);
                e[B] = !0;
                o.place(g.x, g.y)
            }
            for (var j in f) e[j] ||
                (f[j].remove(), delete f[j])
        };
        k.inherit(b, q);
        b.prototype.checkElement = function() {
            return this.el
        };
        b.prototype.place = function(a, b) {
            var e = this.labelDiv;
            e.style.left = (a | 0) + "px";
            e.style.top = (b | 0) + "px"
        };
        b.prototype.isAttached = function() {
            return !!this.parent
        };
        b.prototype.setDotSize = function(b) {
            if (b != this.dotSize) {
                if (0 == b) {
                    if (this.dotDiv) this.labelDiv.removeChild(this.dotDiv), this.dotDiv = null
                } else {
                    if (!this.dotDiv) this.dotDiv = g.createElement("div", "position:absolute;"), this.labelDiv.appendChild(this.dotDiv);
                    this.dotDiv.style.cssText = a.getDotCSS(b)
                }
                this.dotSize = b
            }
        };
        b.prototype.setText = function(a) {
            if (a != this.text) this.text = a, this.textDiv.innerHTML = a
        };
        b.prototype.attach = function(a) {
            if (this.parent != a) a.appendChild(this.labelDiv), this.parent = a
        };
        b.prototype.remove = function() {
            if (this.parent) this.parent.removeChild(this.labelDiv), this.parent = null
        };
        aa.prototype.importFromDataTable = function(a, d, e, f) {
            this._data = a;
            new q;
            var h = [];
            this._symbols = h;
            a.addEventListener("ready", function() {
                for (var i = a.getFieldData(d), r =
                        a.getFieldData(e), o = a.size(), B = 0; B < o; B++) {
                    var g = f.projectLatLngFast(i[B], r[B]),
                        g = new b(B, g.x, g.y);
                    h.push(g)
                }
                this.startWaiting()
            }, this)
        };
        aa.prototype.getSymbols = function() {
            return this._symbols || []
        };
        aa.prototype.getSymbolsInBoundingBox = function(a, b) {
            if (!this.isReady()) return [];
            for (var e = !!b, f = this._symbols, h = [], i = 0, r = f.length; i < r; i++) {
                var o = f[i];
                (!e || !1 == b[i]) && a.intersects(o) && h.push(o)
            }
            return h
        };
        aa.prototype.updateSymbolSizes = function(a, b, e) {
            if (this._currZoom !== e) {
                this._currZoom = e;
                for (var a = 10 * b,
                        b = 40 * b, e = this._symbols, f = 0, h = e.length; f < h; f++) {
                    var i = e[f],
                        r = i.x,
                        o = i.y;
                    i.setBounds(r - b, o + a, r + b, o - a)
                }
            }
        };
        ba.prototype.init = function() {
            var a = this._opts;
            a.symbols ? (this._symbols = a.symbols, this.waitFor(this._symbols), this.container = g.createElement("div", "position:absolute; overflow:visible; white-space:nowrap; cursor:default")) : j("[LabelLayer.init()] Missing 'labels' property:", a)
        };
        ba.prototype.getElement = function() {
            return this.container
        }
    }

    function eb() {
        cb();
        Za();
        db();
        l.prototype.initCanvasMap = function() {
            var a =
                this._opts;
            if (a.backgroundColor) this.div.style.backgroundColor = Z(a.backgroundColor);
            this._hitManager = new ca(this);
            this.mouse.setMapContainer(this.getLayerContainer());
            this.mouse.touch || this.mouse.addEventListener("click", this.handleClick, this);
            a = new Ia(this);
            a.addEventListener("navigate", this.handleNavigation, this);
            this.navigation = a
        };
        l.prototype.handleClick = function(a) {
            var b = this._hitManager.getActiveLayer(),
                c = {};
            k.copyAllParams(c, a.data);
            c.hitLayer = b;
            c.hitId = b ? b.getHitId() : -1;
            this.dispatchEvent("click",
                c)
        };
        n.prototype.startInteraction = function() {
            this._hitId = -1;
            this._map._hitManager.manageLayer(this, this._opts.hitPriority)
        };
        n.prototype.setHoverById = function(a) {
            var b = this._map,
                c = this.getSymbolById(a),
                d = c.centerX(),
                c = c.centerY(),
                c = b.convMetersToViewPixels(d, c),
                d = c.x,
                c = c.y,
                b = {
                    id: a,
                    pageX: d + b.getLeftInPixels(),
                    pageY: c + b.getTopInPixels(),
                    mapX: d,
                    mapY: c
                };
            j("[SymbolLayer.setHoverById()] obj:", b);
            this._hitId = a;
            this.triggerRollOver(b)
        };
        n.prototype.clearHover = function() {
            this.triggerRollOut()
        };
        n.prototype.showHoverSymbolById =
            function(a) {
                if (this.isReady()) {
                    var b = this._map,
                        c = b._hoverLyr;
                    if (!c) c = b._hoverLyr = new M, b.addLayer(c);
                    c.attachLayer(this);
                    c.showSymbolById(a)
                } else j("[CanvasTileLayer.initHover()] this lyr not READY")
            };
        n.prototype.handleClick = function(a) {
            var b = this.getHitId(),
                b = {
                    id: b,
                    rec: this.getRecordById(b)
                };
            k.copyAllParams(b, a.data);
            this.dispatchEvent("click", b)
        };
        n.prototype.handleMouseMove = function(a) {
            if (this.isReady()) {
                var b = this._map.mouse,
                    c = b.overMap(),
                    d = b.mouseDown(),
                    b = this._hitId;
                if (!c || d) - 1 != b && !c && this.triggerRollOut();
                else {
                    var c = a.mapX,
                        d = a.mapY,
                        e = this._map.convViewPixelsToMeters(c, d),
                        e = this.testHitAtXY(e.x, e.y);
                    if (e != b) - 1 != b && this.triggerRollOut({
                        id: b
                    }), this._hitId = e, -1 != e && this.triggerRollOver({
                        id: e,
                        pageX: a.pageX,
                        pageY: a.pageY,
                        mapX: c,
                        mapY: d
                    })
                }
            }
        };
        n.prototype.triggerRollOut = function(a) {
            if (-1 != this._hitId) this.showHoverSymbolById(-1), this.dispatchEvent("rollout", a), this._hitId = -1
        };
        n.prototype.triggerRollOver = function(a) {
            var b = a.id;
            a.rec = this.getRecordById(b);
            this.dispatchEvent("rollover", a);
            this.showHoverSymbolById(b)
        };
        n.prototype.testHitAtXY = function() {};
        z.prototype.initCanvasShapeLayer = function() {
            this.startInteraction();
            var a = new Da(this._symbols, this._shapeType);
            this.waitFor(a);
            this._shapes = a;
            this._renderer = new xa
        };
        z.prototype.init = z.prototype.initCanvasShapeLayer;
        z.prototype.testHitAtXY = function(a, b) {
            var c = this._shapes;
            if (c) {
                var d = this._map.getScale(),
                    e = -1,
                    f = Infinity,
                    h = -1,
                    i = Infinity,
                    r = -1,
                    o = 1.4 * d,
                    B = 5 * d,
                    g = new q;
                g.setBounds(a - B, b + B, a + B, b - B);
                c = c.getShapesInBoundingBox(g, this.getHiddenSymbolList());
                for (g = 0; g < c.length; g++) {
                    var j =
                        c[g],
                        l = Math.min(j.width(), j.height()) / d,
                        m = Ta.testPointInPolygon(a, b, j),
                        k = Ta.getDistanceFromPointToShape(a, b, j);
                    if (1.4 > l && (m || k < o)) {
                        if (k < i) i = k, r = j.id
                    } else if (m) e = j.id;
                    else if (k < B && k < f) f = k, h = j.id
                }
                d = -1; - 1 != r ? d = r : -1 != e ? d = e : -1 != h && (d = h);
                return d
            }
        };
        z.prototype.getSymbolById = function(a) {
            return this._shapes.getShapeById(a)
        };
        H.prototype.initCanvasCircleLayer = function() {
            this.startInteraction();
            this._hitHelper = this._opts.hitHelper;
            this.waitFor(this._symbols);
            this._renderer = new ga
        };
        H.prototype.init = H.prototype.initCanvasCircleLayer;
        H.prototype.updateCircleSizes = function(a) {
            var b = this._map,
                c = this._symbols,
                d = b.getScale(),
                b = b._crs.baseScale,
                e = !1,
                f = a.bubbleSizes;
            if (f || this._prevCircleSizes) f != this._prevCircleSizes && (e = !0);
            this._prevCircleSizes = f;
            if (!(!e && d === this._lastUpdateScale || !c || !c.isReady())) this._lastUpdateScale = d, c.updateCircleSizes(a, d, b)
        };
        H.prototype.getSymbolById = function(a) {
            return this._symbols.getCircleById(a)
        };
        H.prototype.testHitAtXY = function(a, b) {
            var c = this._symbols;
            if (c) {
                var d = this._map.getScale(),
                    e = this.getHiddenSymbolList(),
                    c = c.testHitAtXY(a, b, d, e);
                if (-1 == c && this._hitHelper && (d = this._hitHelper.testHitAtXY(a, b), -1 != d && (!e || !0 != e[d]))) c = d;
                return c
            }
        };
        M.prototype.init = function() {
            j("[HoverLayer.init()] stub")
        };
        M.prototype.handleReadyState = function() {};
        M.prototype.attachLayer = function(a) {
            if (this._baseLyr != a) - 1 != this._symbolId && this.clear(), this._baseLyr = a
        };
        M.prototype.convertStyle = function(a) {
            var b = {
                fillColor: a.hoverFillColor,
                fillAlpha: a.hoverFillAlpha,
                strokeWeight: a.hoverStrokeWeight,
                strokeColor: a.hoverStrokeColor,
                strokeAlpha: a.hoverStrokeAlpha
            };
            if (a.matchFillColor) j("[HoverLayer.convertStyle()] matching color"), b.fillColor = a.fillColor, b.hatchColor = a.hatchColor;
            return b
        };
        M.prototype.showSymbolById = function(a) {
            this._symbolId = a; - 1 == a ? this.clear() : this.refresh()
        }
    }

    function fb() {
        function a() {
            if (!1 == f) c.stopTimer();
            else if (!i) {
                var a = b();
                0 >= a || (1 <= a + h && (a = 1, i = !0), c.procTween(a), f ? 1 == a && i && c.stopTimer() : c.stopTimer())
            }
        }

        function b() {
            if (!1 == f) return 1;
            var a = (new Date).getTime() - e - d;
            if (0 > a) return 0;
            a /= r;
            1 < a && (a = 1);
            null != o && (a = o(a));
            return a
        }
        var c = this,
            d = 0,
            e, f, h = 5.0E-4,
            i = !1,
            r, o;
        this.startTimer = function(b, d) {
            f && c.stopTimer();
            r = void 0 == b ? 300 : b;
            o = void 0 == d ? Ua : d;
            e = (new Date).getTime();
            e -= ya.msPerFrame;
            f = !0;
            ya.addEventListener("tickTock", a, this)
        };
        this.setDelay = function(a) {
            a |= 0;
            if (0 < a || 1E4 > a) d = a
        };
        this.busyTweening = function() {
            return f
        };
        this.stopTimer = function() {
            f = !1;
            ya.removeEventListener("tickTock", a, this);
            i = !1
        }
    }

    function Ua(a) {
        return a = 0.5 - Math.cos(a * Math.PI) / 2
    }

    function gb(a) {
        fb.call(this);
        this.start = function(a, c, d, e) {
            e = e || Ua;
            this._bbStart = a;
            this._bbEnd =
                c;
            a = c.width() / a.width();
            this.startTimer(0.6 * d + 0.4 * d * (1 - (1 < a ? 1 / a : a)), e)
        };
        this.procTween = function(b) {
            var c = this._bbStart,
                d = this._bbEnd,
                e = c.width() * (1 - b) + d.width() * b,
                f = c.height() * (1 - b) + d.height() * b,
                h = c.left * (1 - b) + d.left * b,
                c = c.top * (1 - b) + d.top * b,
                e = (new q).setBounds(h, c, h + e, c - f);
            a(e, 1 == b)
        }
    }

    function Va(a) {
        function b(b) {
            if (a.overMap()) {
                b.preventDefault();
                var c = 0;
                b.wheelDelta && (c = 0 < b.wheelDelta ? 1 : -1);
                b.detail && (c = 0 < b.detail ? -1 : 1);
                d = (new Date).getTime();
                e = c
            }
        }
        var c = this,
            d = 0,
            e = 0,
            f = !1;
        void 0 !== window.onmousewheel ?
            g.addEventListener(window, "mousewheel", b, c) : g.addEventListener(window, "DOMMouseScroll", b, c);
        ya.addEventListener("tickTock", function(b) {
            var i = b.time - d;
            0 == e || 140 < i || !a.overMap() ? (e = 0, f = !1) : (b = 1, i -= 80, 0 < i && (b = 1 - Math.pow(1 - (60 - i) / 60, 2)), i = a.getCurrentMouseData(), i.direction = e, i.multiplier = b, f || c.dispatchEvent("mousewheelstart", i), f = !0, c.dispatchEvent("mousewheel", i))
        }, c)
    }

    function Ia(a) {
        this.ZOOM_IN_FACTOR = 2;
        this.ZOOM_IN_TIME = 400;
        var b = a.mouse;
        this._map = a;
        var c = a._opts,
            d = this.ALLOW_TWEEN = !g.touchEnabled,
            e = c.pinchZoom || void 0 === c.pinchZoom,
            f = c.doubleClickZoom || void 0 === c.doubleClickZoom,
            h = c.dragging || void 0 === c.dragging,
            i = c.smoothZoom || void 0 === c.smoothZoom;
        this.USE_ZOOM_TWEEN = d && i;
        this.LIMIT_PANNING = !!c.limitPanning;
        a.addEventListener("resize", this.handleMapResize, this, 999);
        this._currBounds = a.getInitialBounds();
        this._currZoom = a.getZoom();
        var r = this;
        this._boxTween = new gb(function(a) {
            r.setBounds(a)
        });
        b.touch ? (e && b.touch.addEventListener("pinchstart", this.handleMoveStart, this), e && b.touch.addEventListener("pinch",
            this.handleMove, this), h && b.touch.addEventListener("dragstart", this.handleMoveStart, this), h && b.touch.addEventListener("drag", this.handleMove, this), f && b.touch.addEventListener("doubletap", this.handleDoubleTap, this)) : (h && b.addEventListener("dragstart", this.handleMoveStart, this), h && b.addEventListener("drag", this.handleMove, this), f && b.addEventListener("dblclick", this.handleDoubleClick, this));
        c.scrollWheelZoom && (new Va(b)).addEventListener("mousewheel", this.handleMouseWheel, this)
    }

    function T() {
        this._layers = [];
        this.type = "shape"
    }

    function ha(a, b, c, d) {
        this.__super__();
        this.name = "AlbersEqualAreaConic";
        d = this._lat0 = void 0 === d ? 0 : d * this._DEG2RAD;
        b = this._lat1 = void 0 === b ? 0 : b * this._DEG2RAD;
        c = this._lat2 = void 0 === c ? 0 : c * this._DEG2RAD;
        this._lng0 = void 0 === a ? 0 : a * this._DEG2RAD;
        var a = Math.cos(b),
            e = Math.sin(b);
        this._sphN = 0.5 * (e + Math.sin(c));
        this._sphC = a * a + 2 * this._sphN * e;
        this._sphRho0 = Math.sqrt(this._sphC - 2 * this._sphN * Math.sin(d)) / this._sphN;
        var a = this._E,
            e = this.calcAlbersMell(a, b),
            f = this.calcAlbersMell(a, c),
            d = this.calcAlbersQell(a,
                d),
            b = this.calcAlbersQell(a, b),
            c = this.calcAlbersQell(a, c);
        this._ellN = (e * e - f * f) / (c - b);
        this._ellC = e * e + this._ellN * b;
        this._ellRho0 = this._A * Math.sqrt(this._ellC - this._ellN * d) / this._ellN;
        this._ellAuthConst = 1 - (1 - a * a) / (2 * a) * Math.log((1 - a) / (1 + a))
    }

    function hb() {
        var a = new ha(-96, 29.5, 45.5, 37.5);
        a.name = "AlbersUSA";
        return a
    }

    function ia(a, b, c, d) {
        this.__super__();
        this.useEllipsoid = !0;
        this.name = "LambertConformalConic";
        d = this._lat0 = void 0 === d ? 0 : d * this._DEG2RAD;
        b = this._lat1 = void 0 === b ? 0 : b * this._DEG2RAD;
        c = this._lat2 =
            void 0 === c ? 0 : c * this._DEG2RAD;
        this._lng0 = void 0 === a ? 0 : a * this._DEG2RAD;
        this._lambertSphN = Math.log(Math.cos(b) / Math.cos(c)) / Math.log(Math.tan(Math.PI / 4 + c / 2) / Math.tan(Math.PI / 4 + b / 2));
        this._lambertSphF = Math.cos(b) * Math.pow(Math.tan(Math.PI / 4 + b / 2), this._lambertSphN) / this._lambertSphN;
        this._lambertSphRho0 = this._R * this._lambertSphF / Math.pow(Math.tan(Math.PI / 4 + d / 2), this._lambertSphN);
        a = this._E;
        this._lambertEllN = (Math.log(this.calcLambertM(b, a)) - Math.log(this.calcLambertM(c, a))) / (Math.log(this.calcLambertT(b,
            a)) - Math.log(this.calcLambertT(c, a)));
        this._lambertEllF = this.calcLambertM(b, a) / (this._lambertEllN * Math.pow(this.calcLambertT(b, a), this._lambertEllN));
        this._lambertEllRho0 = this._A * this._lambertEllF * Math.pow(this.calcLambertT(d, a), this._lambertEllN)
    }

    function Wa() {
        var a = new ia(-96, 33, 45, 39);
        a.name = "LambertUSA";
        return a
    }

    function Q() {
        this.identity();
        this._p = new I(0, 0)
    }

    function za(a) {
        k.copyNewParams(this, a);
        this._proj = a;
        this._boxes = [];
        this._transforms = [];
        this._projections = []
    }

    function ib(a) {
        a = 2 - a.get("ratings_2012");
        return null == a ? jb : kb[a]
    }

    function lb(a) {
        a = 2 - a.get("ratings_2012");
        return void 0 === a ? mb : nb[a]
    }

    function Ja(a) {
        if ("NE" == a || "ME" == a) a += "_state";
        return _.find(INK.t.states, function(b) {
            return b.postal === a
        })
    }

    function ob(a) {
        a = a.rec.get("postal");
        ja && Ja(ja).close();
        ja = a;
        Ja(a).open()
    }

    function pb() {
        ja && Ja(ja).close();
        ja = null
    }
    var O = this.A || {},
        s = this.C || {},
        m = {
            getUniqueName: function(a) {
                var b = k.getNamespace("nytg.map"),
                    c = b.__unique || 0;
                b.__unique = c + 1;
                return (a || "__id_") + c
            },
            map: function(a, b) {
                for (var c = [], d = 0, e = a.length; d <
                    e; d++) c.push(b(a[d]));
                return c
            },
            isArray: function(a) {
                return a instanceof Array
            },
            isString: function(a) {
                return null != a && a.constructor === String
            },
            findInArray: function(a, b) {
                for (var c = 0, d = b.length || 0; c < d; c++)
                    if (b[c] === a) return c;
                return -1
            },
            getConstructorName: function(a) {
                return (a = ("" + a.constructor).match(/^function ([^(]+)\(/)) && a[1] || ""
            },
            toString: function(a, b) {
                var b = !1 !== b,
                    c, d = typeof a;
                if ("function" == d) c = '"[function]"';
                else if (void 0 === a || null === a) c = "" + a;
                else if (m.isArray(a)) c = "[" + m.map(a, function(a) {
                    return m.toString(a,
                        b)
                }).join(", ") + "]";
                else if (a.constructor == Object) {
                    d = [];
                    for (c in a) d.push('"' + c + '":' + m.toString(a[c], b));
                    c = "{" + d.join(", ") + "}"
                } else a.nodeName ? c = '"[' + a.nodeName + (a.id ? " id=" + a.id : "") + ']"' : "object" == d && a.hasOwnProperty && !a.hasOwnProperty("toString") && !a.constructor.prototype.hasOwnProperty("toString") ? c = '"[' + (m.getConstructorName(a) || "unknown object") + ']"' : (c = "" + a, m.isString(a) && (b ? c = '"' + m.addslashes(c) + '"' : 400 < c.length && (c = c.substr(0, 400) + " ...")));
                return c
            },
            strval: function(a) {
                return m.toString(a, !1)
            },
            serialize: function(a) {
                return m.toString(a, !0)
            },
            addslashes: function(a) {
                return (a + "").replace(/[\\"']/g, "\\$&").replace(/\u0000/g, "\\0")
            }
        },
        k = {
            copyNewParams: function(a, b) {
                k.__copyParams(a, b, !1)
            },
            copyAllParams: function(a, b) {
                k.__copyParams(a, b, !0)
            },
            __copyParams: function(a, b, c) {
                if (!b || !a) O.VERBOSE && j("[Opts.__copyParams()] Missing target or source object; src:", b, "dest:", a);
                else
                    for (var d in b)
                        if (c || void 0 === a[d]) {
                            var e = b[d];
                            Object.prototype[d] !== e && (a[d] = e)
                        }
            },
            extendPrototype: function(a, b) {
                var c = a.prototype,
                    b = b.prototype || b,
                    d = c.__super__;
                if (!d) d = c.__super__ = {};
                for (var e in b) e in c && (d[e] = c[e]), c[e] = b[e];
                c.constructor = a
            },
            inherit: function(a, b) {
                var c = function() {
                    if (this.__super__ == c) this.__super__ = b.prototype.__super__, b.apply(this, arguments), delete this.__super__
                };
                c.prototype = b.prototype;
                a.prototype = new c;
                a.prototype.constructor = a;
                a.prototype.__super__ = c
            },
            getNamespace: function(a) {
                for (var b = window, a = a.split("."), c = 0, d = a.length; c < d; c++) {
                    var e = a[c];
                    e && (b[e] || (b[e] = {}), b = b[e])
                }
                return b
            },
            readParam: function(a,
                b) {
                return void 0 === a ? b : a
            },
            extendNamespace: function(a, b) {
                var c = "string" == typeof a ? k.getNamespace(a) : a;
                k.copyAllParams(c, b)
            },
            exportObject: function(a, b) {
                var c = a.split("."),
                    d = c.pop();
                d && (k.getNamespace(c.join("."))[d] = b)
            }
        };
    qa.prototype.trigger = function(a) {
        if (a) k.copyAllParams(this, a), this.data = a;
        this.callback.call(this.context, this)
    };
    qa.prototype.toString = function() {
        var a = "type:" + this.type + ", target: " + m.strval(this.target);
        this.data && (a += ", data:" + m.strval(this.data));
        return "[BoundEvent]: {" + a + "}"
    };
    D.prototype.dispatchEvent = function(a, b, c) {
        if ("string" != typeof a) j("[dispatchEvent()] requires a string argument; type:", a, "data:", b, "target:", c);
        else {
            (this._firedTypes || (this._firedTypes = {}))[a] = !0;
            var d = this._listeners;
            if (d) {
                for (var e = 0, f = d.length; e < f; e++) {
                    var h = d[e];
                    h.type == a && (!c || h.context == c) && h.trigger(b)
                }
                "ready" == a && this.removeEventListeners(a, null, c)
            }
        }
    };
    D.prototype.eventHasFired = function(a) {
        return !!this._firedTypes && !0 == this._firedTypes[a]
    };
    D.prototype.addEventListener = function(a, b, c, d) {
        c ||
            (c = this);
        b = new qa(a, this, b, c, d || 0);
        if ("ready" == a && this._ready) return b.trigger(), !0;
        for (var d = this._listeners || (this._listeners = []), e = 0, f = 0, h = d.length; f < h; f++) {
            var i = d[f];
            if (i.type == b.type && i.callback == b.callback && i.context == b.context) return j("*** [EventDispatcher.addEventListener()] Found duplicate event, skipping. Type:", a, "ctx:", c, "this:", this), !1;
            b.priority <= i.priority && (e = f + 1)
        }
        d.splice(e, 0, b);
        return !0
    };
    D.prototype.countListeners = function(a) {
        var b = this._listeners;
        if (!a) return b.length;
        for (var c =
                0, d = 0, e = b && b.length || 0; c < e; c++) b[c].type === a && d++;
        return d
    };
    D.prototype.removeEventListener = function(a, b, c) {
        return this.removeEventListeners(a, b, c || this)
    };
    D.prototype.removeEventListeners = function(a, b, c) {
        for (var d = this._listeners, e = [], f = 0, h = 0; d && h < d.length; h++) {
            var i = d[h];
            (!a || a == i.type) && (!b || b == i.callback) && (!c || c == i.context) ? f += 1: e.push(i)
        }
        this._listeners = e;
        return f
    };
    k.inherit(y, D);
    y.prototype._testReady = function() {
        if (!this._ready && !this._waitCount && this._started) this._ready = !0, this.handleReadyState &&
            this.handleReadyState(), this.dispatchEvent("ready")
    };
    y.prototype.callWhenReady = function(a, b, c, d) {
        this.addEventListener("ready", function() {
            a.apply(c, b)
        }, c, d)
    };
    y.prototype._handleDependentReady = function(a) {
        this._waitCount ? (this._waitCount -= 1, this._testReady()) : j("[Waiter.onDependendReady()]", "Counting error. Event: " + m.strval(a) + "; ready? " + this._ready)
    };
    y.prototype.isReady = function() {
        return !0 == this._ready
    };
    y.prototype.waitFor = function(a, b) {
        if (a) {
            if (!a.addEventListener) return j("[Waiter.waitFor()] Need an EventDispatcher; this:",
                this), this
        } else return j("[Waiter.waitFor()] missing object; this:", this), this;
        b || (b = "ready");
        if (this._ready) {
            if ("ready" == b && a.isReady()) return;
            j("[Waiter.waitFor()] already READY; resetting to isReady() == false;");
            this._ready = !1
        }
        this._waitCount = this._waitCount ? this._waitCount + 1 : 1;
        a.addEventListener(b, this._handleDependentReady, this) || (this._waitCount -= 1);
        return this
    };
    y.prototype.startWaiting = function(a, b) {
        "function" == typeof a && this.addEventListener("ready", a, b);
        this._started = !0;
        this._testReady();
        return this
    };
    var j = function() {
            var a = g.getQueryVars();
            null == a.debug || "false" == a.debug || g.trace.apply(this, arguments)
        },
        g = {
            iPhone: !!navigator.userAgent.match(/iPhone/i),
            iPad: !!navigator.userAgent.match(/iPad/i),
            ieEvents: !!window.attachEvent && !window.addEventListener,
            touchEnabled: "ontouchstart" in window,
            canvas: !!document.createElement("canvas").getContext,
            ie: function() {
                var a = document.createElement("div");
                a.innerHTML = "<\!--[if gt IE 5]><i></i><![endif]--\>";
                return !!a.getElementsByTagName("i")[0]
            }(),
            ieVersion: function() {
                var a =
                    /MSIE ([0-9]+)/.exec(navigator.appVersion);
                return a && parseInt(a[1]) || 0
            }(),
            log: function(a) {
                window.console && window.console.log && (console.log.call ? console.log.call(console, a) : console.log(a))
            },
            trace: function() {
                g.log(m.map(arguments, m.strval).join(" "))
            },
            getViewportWidth: function() {
                return document.documentElement.clientWidth
            },
            getViewportHeight: function() {
                return document.documentElement.clientHeight
            },
            createElement: function(a, b, c) {
                a = document.createElement(a);
                if (b) a.style.cssText = b;
                c && k.copyAllParams(a, c);
                return a
            },
            getElement: function(a) {
                var b;
                "string" == typeof a ? ("#" == a.charAt(0) && (a = a.substr(1)), b = document.getElementById(a)) : a && a.tagName && (b = a);
                return b || null
            },
            removeElement: function(a) {
                a && a.parentNode && a.parentNode.removeChild(a)
            },
            elementIsFixed: function(a) {
                for (var b = document.body; a && a != b;) var c = a,
                    a = a.offsetParent;
                return "fixed" == (c && (c.currentStyle || window.getComputedStyle && window.getComputedStyle(c, "")) || {}).position
            },
            getPageXY: function(a) {
                var b = 0,
                    c = 0;
                if (a.getBoundingClientRect) c = a.getBoundingClientRect(),
                    b = c.left - g.pageXToViewportX(0), c = c.top - g.pageYToViewportY(0);
                else {
                    for (var d = g.elementIsFixed(a); a;) b += a.offsetLeft || 0, c += a.offsetTop || 0, a = a.offsetParent;
                    d && (a = -g.pageXToViewportX(0), d = -g.pageYToViewportY(0), b += a, c += d)
                }
                return {
                    x: b,
                    y: c
                }
            },
            __getIEPageElement: function() {
                var a = document.documentElement;
                return a.clientHeight ? a : document.body
            },
            pageXToViewportX: function(a) {
                var b = window.pageXOffset;
                if (void 0 === b) b = g.__getIEPageElement().scrollLeft;
                return a - b
            },
            pageYToViewportY: function(a) {
                var b = window.pageYOffset;
                if (void 0 === b) b = g.__getIEPageElement().scrollTop;
                return a - b
            },
            _nodeIndex: {},
            __findNodeListener: function(a, b, c, d) {
                for (var e = 0, f = a.length; e < f; e++) {
                    var h = a[e];
                    if (h.type == b && h.callback == c && h.context == d) return e
                }
                return -1
            },
            addEventListener: function(a, b, c, d) {
                var e = this.__getNodeListeners(a);
                if (0 < e.length && -1 != this.__findNodeListener(e, b, c, d)) j("[Browser.addEventListener()] event already added; skipping.");
                else {
                    var f = new qa(b, a, c, d),
                        h = d ? function(a) {
                            c.call(d, a)
                        } : c;
                    f.handler = h;
                    e.push(f);
                    this.ieEvents ? a.attachEvent("on" +
                        b, h) : a.addEventListener(b, h, !1)
                }
            },
            removeEventListener: function(a, b, c, d) {
                var e = this.__getNodeListeners(a),
                    c = this.__findNodeListener(e, b, c, d); - 1 == c ? j("[Browser.removeEventListener()] Event not found; ignoring.") : (this.__removeDOMListener(a, b, e[c].handler), e.splice(c, 1))
            },
            __getNodeKey: function(a) {
                if (a) {
                    if (a == window) return "#"
                } else return "";
                return a.__evtid__ || (a.__evtid__ = m.getUniqueName())
            },
            __getNodeListeners: function(a) {
                var a = this.__getNodeKey(a),
                    b = this._nodeIndex;
                return b[a] || (b[a] = [])
            },
            __removeDOMListener: function(a,
                b, c) {
                this.ieEvents ? a.detachEvent("on" + b, c) : a.removeEventListener(b, c, !1)
            },
            removeEventListeners: function(a) {
                for (var b = this.__getNodeListeners(a), c = 0, d = b.length; c < d; c++) {
                    var e = b[c];
                    this.__removeDOMListener(a, e.type, e.handler)
                }
                delete this._nodeIndex[this.__getNodeKey(a)]
            },
            getPageUrl: function() {
                return window.location.href.toString()
            },
            getQueryString: function(a) {
                return (a = /^[^?]+\?(.*)/.exec(a)) && a[1] || ""
            },
            cacheBustUrl: function(a, b) {
                var b = b || 1,
                    c = (new Date).getTime() / 6E4,
                    c = Math.round(c % 10080 / b);
                return a =
                    g.extendUrl(a, "c=" + c)
            },
            extendUrl: function(a, b) {
                return a + (-1 == a.indexOf("?") ? "?" : "&") + b
            },
            getQueryVars: function() {
                for (var a = /([^=&]+)=?([^&]*)/g, b = this.getQueryString(this.getPageUrl()), c = {}; matches = a.exec(b);) c[matches[1]] = unescape(matches[2]);
                return c
            },
            getClassNameRxp: function(a) {
                return RegExp("(^|\\s)" + a + "(\\s|$)")
            },
            hasClass: function(a, b) {
                var c = this.getClassNameRxp(b);
                return a && c.test(a.className)
            },
            addClass: function(a, b) {
                var c = a.className;
                c ? this.hasClass(a, b) || (c = c + " " + b) : c = b;
                a.className = c
            },
            removeClass: function(a,
                b) {
                var c = this.getClassNameRxp(b);
                a.className = a.className.replace(c, "$2")
            },
            replaceClass: function(a, b, c) {
                b = this.getClassNameRxp(b);
                a.className = a.className.replace(b, "$1" + c + "$2")
            },
            mergeCSS: function(a, b) {
                var c = this._cssdiv;
                if (!c) c = this._cssdiv = g.createElement("div");
                c.style.cssText = a + ";" + b;
                return c.style.cssText
            },
            addCSS: function(a, b) {
                a.style.cssText = g.mergeCSS(a.style.cssText, b)
            },
            makeUnselectable: function(a) {
                g.addCSS(a, "-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-moz-user-focus:ignore;-o-user-select:none;user-select: none;");
                a.onselectstart = function() {
                    return !1
                }
            },
            loadStylesheet: function(a) {
                var b = document.createElement("link");
                b.rel = "stylesheet";
                b.type = "text/css";
                b.href = a;
                g.appendToHead(b)
            },
            appendToHead: function(a) {
                document.getElementsByTagName("head")[0].appendChild(a)
            },
            navigateToURL: function(a) {
                window.location.href = a
            }
        };
    k.copyNewParams(s, {
        N: "n",
        E: "e",
        W: "w",
        S: "s",
        NW: "nw",
        NE: "ne",
        SE: "se",
        SW: "sw",
        TOP: "top",
        LEFT: "left",
        RIGHT: "right",
        BOTTOM: "bottom",
        CENTER: "c"
    });
    I.prototype.clone = function() {
        return new I(this.x, this.y)
    };
    I.prototype.toString =
        function() {
            return "{x:" + this.x + ", y:" + this.y + "}"
        };
    I.distance = function(a, b, c, d) {
        return Math.sqrt((a - c) * (a - c) + (b - d) * (b - d))
    };
    P.prototype.clone = function() {
        return new P(this.lat, this.lng)
    };
    P.prototype.toString = function() {
        return "[GeoPoint]: {lat:" + this.lat + ", lng:" + this.lng + "}"
    };
    Ba.prototype.toString = function() {
        return "{l:" + this.left + ", t:" + this.top + ", r:" + this.right + ", b:" + this.bottom + "}"
    };
    k.extendPrototype(q, Ba);
    q.prototype.hasBounds = function() {
        return void 0 !== this.left
    };
    q.prototype.hasSameBounds = function(a) {
        return this.left ==
            a.left && this.top == a.top && this.right == a.right && this.bottom == a.bottom
    };
    q.prototype.width = function() {
        return this.right - this.left | 0
    };
    q.prototype.height = function() {
        return Math.abs(this.top - this.bottom) | 0
    };
    q.prototype.setBounds = function(a, b, c, d) {
        this.left = a;
        this.top = b;
        this.right = c;
        this.bottom = d;
        this._flipped = d > b;
        return this
    };
    q.prototype.getCenterPoint = function() {
        return this.hasBounds() ? new I(this.centerX(), this.centerY()) : new I(0, 0)
    };
    q.prototype.centerX = function() {
        return 0.5 * (this.left + this.right)
    };
    q.prototype.centerY =
        function() {
            return 0.5 * (this.top + this.bottom)
        };
    q.prototype.containsPoint = function(a, b) {
        return a >= this.left && a <= this.right && b <= this.top && b >= this.bottom ? !0 : !1
    };
    q.prototype.containsBufferedPoint = function(a, b, c) {
        return a + c > this.left && a - c < this.right && b - c < this.top && b + c > this.bottom ? !0 : !1
    };
    q.prototype.intersects = function(a) {
        return a.left < this.right && a.right > this.left && a.top > this.bottom && a.bottom < this.top ? !0 : !1
    };
    q.prototype.contains = function(a) {
        return a.left >= this.left && a.top <= this.top && a.right <= this.right &&
            a.bottom >= this.bottom ? !0 : !1
    };
    q.prototype.translate = function(a, b) {
        this.setBounds(this.left + a, this.top + b, this.right + a, this.bottom + b)
    };
    q.prototype.scale = function(a, b) {
        var c = 0.5 * (this.right - this.left),
            d = 0.5 * (this.top - this.bottom),
            e = a - 1,
            f = void 0 === b ? e : b - 1;
        this.left -= c * e;
        this.top += d * f;
        this.right += c * e;
        this.bottom -= d * f
    };
    q.prototype.cloneBounds = function() {
        var a = new q;
        this.hasBounds() && a.setBounds(this.left, this.top, this.right, this.bottom);
        return a
    };
    q.prototype.mergePoint = function(a, b) {
        if (void 0 === this.left) this.setBounds(a,
            b, a, b);
        else {
            if (a < this.left) this.left = a;
            else if (a > this.right) this.right = a;
            if (b < this.bottom) this.bottom = b;
            else if (b > this.top) this.top = b
        }
    };
    q.prototype.mergeBounds = function(a) {
        if (a && a.hasBounds())
            if (this.hasBounds()) {
                if (a.left < this.left) this.left = a.left;
                if (a.right > this.right) this.right = a.right;
                if (a.top > this.top) this.top = a.top;
                if (a.bottom < this.bottom) this.bottom = a.bottom
            } else this.setBounds(a.left, a.top, a.right, a.bottom)
    };
    V.prototype.updateBounds = function(a) {
        var b = this.widthInPixels / (a.right - a.left);
        this.mx =
            b;
        this.my = -b;
        this.bx = -b * a.left;
        this.by = b * a.top;
        this.metersPerPixel = 1 / b
    };
    V.prototype.transformXY = function(a, b) {
        return new I(a * this.mx + this.bx, b * this.my + this.by)
    };
    k.extendPrototype(Ka, D);
    k.inherit(u, D);
    u.prototype.ignoreElement = function(a) {
        a && -1 == m.findInArray(a, this._ignoredElements) && this._ignoredElements.push(a)
    };
    u.prototype.setMapContainer = function(a) {
        if (!this._mapContainer) {
            this._mapContainer = a;
            var b = this;
            if (g.iPhone || g.touchEnabled) {
                var c = new Ka(a, this._boundsOnPage);
                c.addEventListener("touchstart",
                    this.handleTouchStart, this);
                c.addEventListener("touchend", this.handleTouchEnd, this);
                this.touch = c
            }
            g.addEventListener(a, "mouseover", function() {
                b.triggerMouseOver()
            }, this);
            g.addEventListener(a, "dblclick", function(a) {
                b.overMap() && (a = b.getStandardMouseData(a), b.dispatchEvent("dblclick", a))
            }, this)
        }
    };
    u.prototype.overMap = function() {
        return this._overMap
    };
    u.prototype.mouseDown = function() {
        return !!this._mouseDown
    };
    u.prototype.handleTouchStart = function(a) {
        this.triggerMouseOver();
        this.handleMouseMove(a)
    };
    u.prototype.handleTouchEnd =
        function() {
            this.triggerMouseOut()
        };
    u.prototype.handleMouseOut = function(a) {
        for (var a = a.target ? a.target : a.srcElement, b = this._mapContainer; a && "BODY" != a.nodeName;) {
            if (a == b || -1 != m.findInArray(a, this._ignoredElements)) return;
            a = a.parentNode
        }
        this.triggerMouseOut()
    };
    u.prototype.triggerMouseOut = function() {
        if (this._overMap) this._overMap = !1, g.removeEventListener(document.body, "mouseover", this.handleMouseOut, this), this.dispatchEvent("mouseout")
    };
    u.prototype.triggerMouseOver = function() {
        if (!this._overMap) this._overMap = !0, g.addEventListener(document.body, "mouseover", this.handleMouseOut, this), this.dispatchEvent("mouseover")
    };
    u.prototype.updateDragging = function(a) {
        var b = this.overMap(),
            c = this.mouseDown();
        if (this.dragging) c ? (a.shiftX = a.pageX - this._dragStartData.pageX, a.shiftY = a.pageY - this._dragStartData.pageY, a.deltaX = a.pageX - this._prevX, a.deltaY = a.pageY - this._prevY, this.dispatchEvent("drag", a), this._prevX = a.pageX, this._prevY = a.pageY) : (this.dragging = !1, this.dispatchEvent("dragend", a));
        else if (c && b) this._dragStartData =
            a, this.dragging = !0, this._prevX = a.pageX, this._prevY = a.pageY, this.dispatchEvent("dragstart", a)
    };
    u.prototype.handleMouseDown = function(a) {
        this._mouseDown = !0;
        if (this.overMap()) a = this.getStandardMouseData(a), a.downTime = (new Date).getTime(), this._downData = a, this.updateDragging(a)
    };
    u.prototype.handleMouseUp = function(a) {
        this._mouseDown = !1;
        a = this.getStandardMouseData(a);
        this.updateDragging(a);
        var b = this._downData;
        b && this.overMap() && 6 > Math.abs(b.pageX - a.pageX) + Math.abs(b.pageY - a.pageY) && 500 > (new Date).getTime() -
            b.downTime && this.dispatchEvent("click", a)
    };
    u.prototype.updateContainerBounds = function(a, b, c, d) {
        this._boundsOnPage.setBounds(a, b, c, d)
    };
    u.prototype.getStandardMouseData = function(a) {
        var a = this.standardizeMouseEvent(a),
            b = a.pageX,
            a = a.pageY,
            c = this._boundsOnPage;
        return {
            pageX: b,
            pageY: a,
            mapX: b - c.left,
            mapY: a - c.bottom,
            centerX: c.centerX(),
            centerY: c.centerY(),
            deltaX: 0,
            deltaY: 0,
            deltaScale: 1
        }
    };
    u.prototype.getCurrentMouseData = function() {
        var a = {};
        this._moveData && k.copyAllParams(a, this._moveData);
        return a
    };
    u.prototype.standardizeMouseEvent =
        function(a) {
            if (a && void 0 !== a.pageX) return a;
            a = a || window.event;
            return {
                pageX: a.pageX || a.clientX + document.body.scrollLeft + document.documentElement.scrollLeft,
                pageY: a.pageY || a.clientY + document.body.scrollTop + document.documentElement.scrollTop
            }
        };
    u.prototype.throttledMouseMove = function(a) {
        var b = (new Date).getTime();
        if (40 < b - (this._prevMoveTime || 0)) this._prevMoveTime = b, this.handleMouseMove(a)
    };
    u.prototype.handleMouseMove = function(a) {
        this._moveData = this.getStandardMouseData(a);
        this.triggerMouseMove()
    };
    u.prototype.triggerMouseMove =
        function() {
            var a = this._moveData;
            if (a) {
                var b = this._boundsOnPage.containsPoint(a.pageX, a.pageY) && this._overMap;
                if (!this._mapContainer) {
                    var c = this._overMap;
                    b && !c ? this.triggerMouseOver() : !b && c && this.triggerMouseOut()
                }
                b && this.dispatchEvent("mousemove", a);
                this.updateDragging(a)
            }
        };
    m.sum = function() {
        var a = arguments.length;
        if (0 == a || isNaN(arguments[0])) return j("[Utils.sum()] requires a list of one or more numeric arguments; len:", a, "args:", arguments), 0;
        for (var b = 0, c = 0; c < a; c++) b += arguments[c];
        return b
    };
    m.average =
        function() {
            var a = m.sum.apply(null, arguments);
            return 0 == a ? 0 : a / arguments.length
        };
    m.invertIndex = function(a) {
        var b = {},
            c;
        for (c in a) b[a[c]] = c;
        return b
    };
    m.getKeys = function(a) {
        var b = [],
            c;
        for (c in a) a.hasOwnProperty(c) && b.push(c);
        return b
    };
    m.filter = function(a, b) {
        for (var c = [], d = 0, e = a.length; d < e; d++) {
            var f = a[d];
            b(f) && c.push(f)
        }
        return c
    };
    m.arrayToIndex = function(a, b) {
        for (var c = {}, d = !!b, e = 0; e < a.length; e++) c[a[e]] = d ? b[e] : !0;
        return c
    };
    m.forEach = function(a, b, c) {
        for (var d = 0, e = a.length; d < e; d++) b.call(c, a[d])
    };
    m.createRandomArray =
        function(a, b) {
            var c = b.length;
            return m.createArray(a, function() {
                return b[Math.floor(Math.random() * c)]
            })
        };
    m.createArray = function(a, b) {
        var c = Array(a);
        if (null != b)
            for (var d = "function" == typeof b, e = 0; e < a; e++) c[e] = d ? b() : b;
        return c
    };
    m.sortOnKeyFunction = function(a, b) {
        if (a && 0 != a.length) {
            var c = a[0].constructor.prototype,
                d = c.toString;
            c.toString = b;
            a.sort();
            c.toString = d
        }
    };
    m.sortOn = function(a, b, c, d, e, f, h) {
        c = "return a." + b + (c ? ">" : "<") + "b." + b;
        if (d) {
            var i = "";
            f && (i = " || a." + d + " == b." + d + " && a." + f + (h ? ">" : "<") + "b." + f);
            c += " || a." + b + " == b." + b + " && (a." + d + (e ? ">" : "<") + "b." + d + i + ")"
        }
        b = new Function("a", "b", c + " ? 1 : -1");
        a.sort(b)
    };
    k.copyAllParams(s, {
        INTEGER: "integer",
        STRING: "string",
        DOUBLE: "double",
        OBJECT: "object"
    });
    k.inherit(p, y);
    p.validateFieldType = function(a) {
        var a = a.toLowerCase(),
            b = s.STRING;
        switch (a) {
            case "string":
            case "str":
                b = s.STRING;
                break;
            case "int":
            case "integer":
                b = s.INTEGER;
                break;
            case "double":
            case "decimal":
            case "number":
                b = s.DOUBLE
        }
        return b
    };
    p.prototype.handleReadyState = function() {
        this._indexedField && this.indexOnField(this._indexedField)
    };
    p.prototype.size = function() {
        return this.length
    };
    p.prototype.joinTableByKey = function() {
        return this.importTableByKey.apply(this, arguments)
    };
    p.prototype.importTableByKey = function(a, b, c) {
        this.waitFor(b);
        this.addEventListener("ready", function() {
            La(this, a, b, c)
        }, this, 999);
        return this
    };
    p.prototype.importData = function(a, b, c) {
        a.addEventListener("ready", function() {
            var d = b.parse(a.data);
            if (c) {
                var e = new p;
                e.populate(d.data, d.schema);
                var f = c.getIds(e),
                    e = e.getFilteredCopy(f);
                d.data = e.data;
                d.schema = e.schema
            }
            this.populate(d.data,
                d.schema)
        }, this);
        return this
    };
    p.prototype.__initEmptyTable = function(a) {
        this.data = {};
        this.length = 0;
        this.schema = {};
        this._rec = new A(this, -1);
        this._index = {};
        for (var b in a)
            if (a.hasOwnProperty(b)) {
                var c = p.validateFieldType(a[b]);
                c ? (this.schema[b] = c, this.data[b] = []) : j("[DataTable.__initEmptyTable()] invalid type for field: ", b, ":", a[b])
            }
    };
    p.prototype.populate = function(a, b) {
        if (b) {
            if (a)
                if (m.isArray(a)) {
                    this.__initEmptyTable(b);
                    for (var c = 0, d = a.length; c < d; c++) this.appendRecordData(a[c])
                } else {
                    d = 0;
                    for (c in b)
                        if (b.hasOwnProperty(c))
                            if (a)
                                if (this.schema[c] =
                                    p.validateFieldType(b[c]), a[c]) {
                                    var e = a[c].length;
                                    this.data[c] = a[c];
                                    0 < d && e != d ? j("[DataTable.populate()] Warning: inconsistent field length. Expected length:", d, "Field name:", c, "Field length:", e) : d = e
                                } else j("[DataTable.populate()] Missing data for field:", c, "schema:", b);
                    else this.data[c] = [];
                    this.length = d
                } else this.__initEmptyTable(b);
            this.isReady() ? (this._indexedField && this.indexOnField(this._indexedField), this.dispatchEvent("change")) : this.startWaiting();
            return this
        }
        j("[DataTable.populate()] Missing schema, can't initialize.")
    };
    p.prototype.getRecordById = function(a) {
        this._rec.id = a;
        return this._rec
    };
    p.prototype.fieldExists = function(a) {
        return !(!this.schema || !this.schema[a])
    };
    p.prototype.getFieldType = function(a) {
        return this.schema[a]
    };
    p.prototype.getIndexedRecord = function(a) {
        a = this._index[a];
        void 0 === a && (a = -1);
        this._rec.id = a;
        return this._rec
    };
    p.prototype.indexOnField = function(a) {
        this._indexedField = a;
        if (this.isReady()) {
            for (var b = {}, a = this.data[a], c = 0, d = this.size(); c < d; c++) b[a[c]] = c;
            return this._index = b
        }
        j("[DataTable.indexOnField()] Table not READY; deferring indexing.]")
    };
    p.prototype.getFieldData = function(a) {
        return (a = this.data[a]) ? a : []
    };
    p.prototype.insertFieldData = function(a, b, c) {
        b = p.validateFieldType(b);
        this.schema[a] = b;
        this.data[a] = c
    };
    p.prototype.appendRecordData = function(a) {
        var b = this.data,
            c = this._indexedField || "",
            d;
        for (d in b) {
            var e = a[d];
            b[d].push(e);
            if (d === c) this._index[e] = this.length
        }
        this.length += 1
    };
    p.prototype.insertMappedValues = function(a, b, c) {
        for (var d = [], e = this._rec, f = 0, h = this.size(); f < h; f++) e.id = f, d.push(c(e));
        this.insertFieldData(a, b, d)
    };
    p.prototype.insertMappedFields =
        function(a, b, c) {
            for (var d = a.length, e = m.createArray(d, Array), f = this._rec, h = [], i = 0, r = this.size(); i < r; i++) {
                f.id = i;
                c(f, h);
                for (var o = 0; o < d; o++) e[o].push(h[o])
            }
            b = m.arrayToIndex(a, b);
            this.populate(m.arrayToIndex(a, e), b)
        };
    p.prototype.getRecordSet = function(a) {
        if (a) a = a.getIds(this);
        else
            for (var a = [], b = 0, c = this.size(); b < c; b++) a[b] = b;
        return new Ma(this, a)
    };
    p.prototype.getMatchingRecord = function(a, b, c, d, e, f) {
        a = this.getMatchingRecordSet(a, b, c, d, e, f);
        return a.hasNext() ? a.nextRecord : new A(null, -1)
    };
    p.prototype.getFilteredCopy =
        function(a) {
            var b = {},
                c = {};
            k.copyAllParams(c, this.schema);
            var d = a.length,
                e = this.data,
                f;
            for (f in e)
                if (e.hasOwnProperty(f)) {
                    var h = e[f],
                        i = [];
                    b[f] = i;
                    for (var r = 0; r < d; r++) i.push(h[a[r]])
                }
            a = new p;
            a.populate(b, c);
            return a
        };
    p.prototype.getMatchingRecordSet = function(a, b, c, d, e, f) {
        if (!this.fieldExists(a)) return j("[DataTable.getMatchingRecordSet()] Missing field:", a), this.getRecordSet();
        for (var h = this.fieldExists(c), i = this.fieldExists(e), r = m.isArray(b), o = h && m.isArray(d), g = i && m.isArray(f), a = this.getFieldData(a),
                c = h ? this.getFieldData(c) : null, e = i ? this.getFieldData(e) : null, x, l = [], k = 0, n = this.size(); k < n; k++)
            if (x = a[k], r && -1 !== m.findInArray(x, b) || x === b) {
                if (h) {
                    x = c[k];
                    if (!(o && -1 !== m.findInArray(x, d) || x === d)) continue;
                    if (i && (x = e[k], !(g && -1 !== m.findInArray(x, f) || x === f))) continue
                }
                l.push(k)
            }
        return new Ma(this, l)
    };
    A.prototype.toString = function() {
        return "[Record" + m.strval(this.getDataAsObject()) + "]"
    };
    A.prototype.getValue = function(a) {
        return (a = this._data[a]) ? a[this.id] : null
    };
    A.prototype.isNull = function() {
        return 0 > this.id
    };
    A.prototype.clone = function() {
        return new A(this._table, this.id)
    };
    A.prototype.getString = function(a) {
        return (a = this._data[a]) && a[this.id] || ""
    };
    A.prototype.getNumber = function(a) {
        a = this._data[a];
        return 1 * (a && a[this.id])
    };
    A.prototype.getInteger = function(a) {
        a = this._data[a];
        return (a && a[this.id]) << 0
    };
    A.prototype.get = function(a) {
        return (a = this._data[a]) && a[this.id] || null
    };
    A.prototype.insertObject = function(a, b) {
        var c = this._table.getFieldData(a);
        c && (c[this.id] = b)
    };
    A.prototype.getDataAsObject = function(a) {
        var a =
            a || {},
            b;
        for (b in this._data) a[b] = this.getValue(b);
        return a
    };
    Ca.prototype.size = function() {
        return this.ids.length
    };
    Ca.prototype.hasNext = function() {
        var a = this._idx;
        if (a >= this.ids.length) return this._idx = 0, !1;
        this.nextId = this.ids[a];
        this._idx = a + 1;
        return !0
    };
    k.inherit($, y);
    $.prototype.handleReadyState = function() {
        this._data.indexOnField(this._dataKey)
    };
    $.prototype.handleDataChange = function() {
        j("[LinkedDataSource.handleDataChange()] data changed");
        this.isReady() && this.dispatchEvent("change")
    };
    $.prototype.getRecordById =
        function(a) {
            return !this._ready ? (j("[LinkedDataSource.getRecordById()] not READY"), null) : this._data.getIndexedRecord(this._geo.getRecordById(a).get(this._geoKey))
        };
    $.prototype.size = function() {
        return this._geo.size()
    };
    $.prototype.getFieldData = function(a) {
        var b = [];
        if (!this._ready) return j("[LinkedDataSource.getDataArray()] not READY"), b;
        for (var c = this._geo.size(), d = 0; d < c; d++) {
            var e = this.getRecordById(d).get(a);
            b.push(e)
        }
        return b
    };
    var qb = new function() {
        var a = [];
        this.start = function() {
            a.push((new Date).getTime())
        };
        this.stop = function(b) {
            var c = a.pop(),
                c = (new Date).getTime() - c + "ms";
            0 < a.length && (c += " (nested " + a.length + " deep).");
            b && (c = b + " " + c);
            j(c);
            return c
        }
    };
    k.extendPrototype(W, q);
    W.prototype.addPartData = function(a) {
        this.parts.push(a);
        this.mergeBounds(a)
    };
    W.prototype.drawPath = function(a, b) {
        for (var c = this.parts.length, d = 0; d < c; d++) this.parts[d].draw(a, b)
    };
    W.prototype.getSortKey = function() {
        return this.sortKey
    };
    ka.prototype = new q;
    ka.prototype.size = function() {
        return this._size
    };
    ka.prototype.hasNext = function() {
        var a =
            this._idx;
        if (a >= this._size) return this._idx = 0, !1;
        this.nextX = this._xx[a];
        this.nextY = this._yy[a];
        this._idx = a + 1;
        return !0
    };
    ka.prototype.draw = function(a, b) {
        for (var c, d, e = b.mx, f = b.my, h = b.bx, i = b.by, r = !0; this.hasNext();) c = this.nextX * e + h, d = this.nextY * f + i, r ? (r = !1, a.moveTo(c, d)) : a.lineTo(c, d)
    };
    ta.prototype.readByte = function() {
        var a;
        this._aligned ? (a = this.readUnsignedShort(!0), this._offByte = a & 255, a >>= 8, this._aligned = !1) : (a = this._offByte, this._aligned = !0);
        return a
    };
    ta.prototype.readUnsignedShort = function(a) {
        var b =
            this._str.charCodeAt(this._idx++),
            c;
        55295 <= b && 57343 >= b && (55295 == b ? b = 0 : (c = this._str.charCodeAt(this._idx++), b = 1024 * (b - 55296) + (c - 56320)));
        !0 === this._aligned ? c = b : (c = this._offByte << 8 | b >> 8, this._offByte = b & 255);
        !a && !this._useBE && (c = (c & 255) << 8 | c >> 8);
        return c
    };
    ta.prototype.readDouble = function() {
        var a, b = this.readByte(),
            c = this.readByte(),
            d = this.readByte(),
            e = this.readByte();
        a = this.readByte();
        var f = this.readByte(),
            h = this.readByte(),
            i = this.readByte(),
            r = 0 < (i & 128),
            i = ((i & 127) << 4) + ((h & 240) >> 4),
            o = i - 1023,
            g = 16777216,
            b = b + (c << 8) + (d << 16) + e * g,
            g = 256 * g,
            b = b + a * g,
            g = 256 * g,
            b = b + f * g,
            b = b + (h & 15) * 256 * g;
        2047 == i ? a = 0 != b ? NaN : r ? -Infinity : Infinity : (b *= Math.pow(2, -52), 0 < i && (b += 1), a = b * Math.pow(2, o), r && (a *= -1));
        return a
    };
    k.copyNewParams(s, {
        POLYGONS: "polygons",
        POLYLINES: "polylines",
        OUTERLINES: "outerlines",
        INNERLINES: "innerlines"
    });
    X.prototype = new q;
    X.prototype.addPart = function(a, b, c, d) {
        if (a && !(2 > a.length)) {
            var e = this._size;
            this._parts += 1;
            var f = this.xx,
                h = this.yy,
                i = this.zz;
            d && (a = a.concat().reverse(), b = b.concat().reverse(), c = c.concat().reverse());
            0 == e ? (this.xx = a, this.yy = b, this.zz = c) : (f.pop(), h.pop(), i.push(99), f.push.apply(f, a), h.push.apply(h, b), i.push.apply(i, c));
            this._size = this.xx.length
        }
    };
    X.prototype.calcBounds = function() {
        var a = this._size;
        if (0 != a) {
            for (var b = this.xx, c = this.yy, d = b[0], e = c[0], f = d, h = e, i = 1; i < a; i++) {
                var r = b[i],
                    o = c[i];
                r > d ? d = r : r < f && (f = r);
                o > e ? e = o : o < h && (h = o)
            }
            this.setBounds(f, e, d, h)
        }
    };
    X.prototype.draw = function(a, b) {
        var c = b.mx,
            d = b.my,
            e = b.bx,
            f = b.by,
            h = this.xx,
            i = this.yy,
            r = this.zz,
            o = this._scale.level,
            g = this._size - 1;
        if (!(1 > g)) {
            var j = h[0] *
                c + e,
                l = i[0] * d + f;
            a.moveTo(j, l);
            for (var k = 1; k <= g; k++)
                if (r[k - 1] >= o || k == g) j = h[k] * c + e, l = i[k] * d + f, a.lineTo(j, l)
        }
    };
    X.prototype.hasNext = function() {
        var a = this._idx,
            b = this._size - 1;
        if (a >= this._size) return this._idx = 0, !1;
        var c = this._scale.level;
        if (0 < c && 0 < a)
            for (var d = this.zz; a < b && !(d[a - 1] >= c);) a++;
        this.nextX = this.xx[a];
        this.nextY = this.yy[a];
        this._idx = a + 1;
        return !0
    };
    X.prototype.size = function() {
        return this._size
    };
    da.prototype.initLines = function(a, b) {
        for (var c = a == s.INNERLINES, d = a == s.OUTERLINES, e = this._vectorScale,
                f = [], h = this._xx, i = this._yy, r = this._zz, o = h.length, g = 0, j = 0; j < o; j++)
            if (!(c && !b[j] || d && !0 === b[j])) {
                var l = new X(e);
                l.addPart(h[j], i[j], r[j]);
                l.calcBounds();
                l = new W(g, l);
                f.push(l);
                g += 1
            }
        return f
    };
    da.prototype.parseHeader = function(a) {
        var b = {
                topology: !0
            },
            c = a.readByte(),
            d = a.readByte();
        b.shp_type = d;
        if (5 != d && 3 != d) return j("[MshpParser.parseHeader()]", "unsupported shape type, stopping: " + d + " format:", c), null;
        b.num_arcs = a.readUnsignedInt();
        64 <= c && (a.readUnsignedInt(), a.readUnsignedInt(), a.readUnsignedInt());
        b.minx =
            a.readDouble();
        b.miny = a.readDouble();
        b.maxx = a.readDouble();
        b.maxy = a.readDouble();
        b.m_pack = a.readDouble();
        b.bx_pack = a.readDouble();
        b.by_pack = a.readDouble();
        b.bit_precision = a.readByte();
        b.bitShift = 1 << b.bit_precision - 1;
        b.simplified_levels = a.readByte();
        b.level_resolution = a.readByte();
        b.level_one_precision = a.readByte();
        b.extract_levels = 0;
        b.min_available_level = 0;
        if (3 == c) b.extract_levels = a.readByte(), b.min_available_level = b.simplified_levels - b.extract_levels + 1;
        b.mUnpack = 1 / b.m_pack;
        b.bxUnpack = -b.bx_pack *
            b.mUnpack;
        b.byUnpack = -b.by_pack * b.mUnpack;
        return b
    };
    da.prototype.extractProjectedShapes = function(a) {
        var b;
        if (a == s.POLYGONS) b = this._polygonShapes;
        else if (a == s.POLYGONS) b = this._lineShapes;
        else if (a == s.INNERLINES) b = this._innerShapes;
        else if (a == s.OUTERLINES) b = this._outerShapes;
        if (!b || 0 == b.length) j("[MshpParser.extractProjectedShapes()] Shapes are not available for type:", a), b = [];
        return {
            bounds: this._layerBounds.cloneBounds(),
            polygons: a == s.POLYGONS,
            shapes: b,
            vectorScaler: this._vectorScale
        }
    };
    da.prototype.parseTopologyData =
        function(a, b, c) {
            var d = [],
                e, f = [],
                h = a.readUnsignedInt(),
                i = 0;
            new q;
            for (var g = 0; g < h; g++) {
                e = a.readByte();
                1 == e && i++;
                var o = i - 1,
                    l = a.readUnsignedShort(),
                    k = 0 === a.readByte();
                c && !0 === k && (f[l] = !0);
                b && (e = d[o], e || (e = new X(this._vectorScale), d[o] = e), e.addPart(this._xx[l], this._yy[l], this._zz[l], k))
            }
            if (c) this._sharedArcIndex = f;
            if (!b) return null;
            b = a.readUnsignedInt();
            c = 0;
            f = [];
            for (h = 0; h < b; h++) {
                o = !1;
                do e = a.readByte(), i = a.readUnsignedShort(), a.readByte(), 1 == e && c++, g = c - 1, 65535 == i ? (j("[MshpParser.parseTopologyData()] Found null shape; part id:",
                    h), f[g] = new W(h)) : o = !0; while (!o);
                (e = d[i]) ? (e.calcBounds(), (i = f[g]) ? i.addPartData(e) : (i = new W(g, e), f[g] = i)) : j("@@@ Missing ring:", i, "in MshpParser.unpackShapes(). skipping")
            }
            return f
        };
    da.prototype.parseVectors = function(a, b, c) {
        this._xx = [];
        this._yy = [];
        this._zz = [];
        var d = Infinity,
            e = -Infinity,
            f = Infinity,
            h = -Infinity;
        new ka([], []);
        for (var i, g, o, j, l = c.num_arcs, k = c.bitShift, m = c.mUnpack, n = c.bxUnpack, s = c.byUnpack, p = 0; p < l; p++) {
            var N = a.readUnsignedShort(),
                u = 2 > N ? 0 : N - 2,
                u = 0 < c.simplified_levels ? u : 0,
                y = Array(N),
                v = Array(N);
            if (0 < N) {
                o = a.readUnsignedShort();
                j = a.readUnsignedShort();
                o = o * m + n;
                j = j * m + s;
                b ? (g = b.transformXY(o, j), i = g.x, g = g.y) : (i = o, g = j);
                y[0] = i;
                v[0] = g;
                for (var N = N - 1, A = 1; A <= N; A++) i = a.readUnsignedShort() - k, g = a.readUnsignedShort() - k, o += i * m, j += g * m, null !== b ? (g = b.transformXY(o, j), i = g.x, g = g.y) : (i = o, g = j), i < d ? d = i : i > e && (e = i), g < f ? f = g : g > h && (h = g), y[A] = i, v[A] = g
            }
            o = Array(u);
            for (j = 0; j < u; j++) o[j] = a.readByte();
            0 < y.length ? (this._xx.push(y), this._yy.push(v), this._zz.push(o)) : (this._xx.push(null), this._yy.push(null), this._zz.push(null))
        }
        return (new q).setBounds(d,
            h, e, f)
    };
    var Da;
    L.prototype.projectLatLng = function(a, b) {
        return this.projectLatLngFast(a, b).clone()
    };
    L.prototype.unprojectXY = function(a, b) {
        return this.unprojectXYFast(a, b).clone()
    };
    L.prototype.getProjectionTransform = function() {
        var a = {};
        k.copyAllParams(a, this);
        this.transformXY = function(a, c) {
            return this.projectLatLngFast(c, a)
        };
        return a
    };
    L.prototype.setFalseEastingNorthing = function(a, b) {
        this._x0 = a;
        this._y0 = b
    };
    L.prototype.setScaleFactor = function(a) {
        this._k0 = a
    };
    L.prototype.toString = function() {
        return this.name ?
            this.name + (this.useEllipsoid ? "_ell" : "_sph") : ""
    };
    L.prototype.isSame = function(a) {
        return a && this.toString() == a.toString()
    };
    L.prototype.findApproxEllLatLong = function(a, b) {
        (this._x0 || this._y0) && j("[ProjectionBase.findApproxEllLatLong()]", "Warning: function doesn't work with false easting, northing.");
        var c = this.useEllipsoid;
        this.useEllipsoid = !1;
        var d = this.unprojectXYFast(a, b);
        this.useEllipsoid = !0;
        var e = this.projectLatLngFast(d.lat, d.lng);
        this.useEllipsoid = !1;
        var f = 2 * a - e.x,
            e = 2 * b - e.y,
            d = this.unprojectXYFast(f,
                e);
        this.useEllipsoid = !0;
        var h = this.projectLatLngFast(d.lat, d.lng),
            d = h.x - a,
            h = h.y - b;
        this.useEllipsoid = !1;
        d = this.unprojectXY(f - d, e - h);
        this.useEllipsoid = c;
        return d
    };
    k.inherit(ma, L);
    ma.prototype.projectLatLngFast = function(a, b) {
        var a = a * this._DEG2RAD,
            b = b * this._DEG2RAD,
            c = this._xy;
        if (this.useEllipsoid) {
            var d = this._E;
            c.x = this._A * (b - this._lng0);
            c.y = this._A * Math.log(Math.tan(0.25 * Math.PI + 0.5 * a) * Math.pow((1 - d * Math.sin(a)) / (1 + d * Math.sin(a)), 0.5 * d))
        } else c.x = this._R * (b - this._lng0), c.y = this._R * Math.log(Math.tan(0.25 *
            Math.PI + 0.5 * a));
        return c
    };
    ma.prototype.unprojectXYFast = function(a, b) {
        var a = a - this._x0,
            b = b - this._y0,
            c = this._ll;
        if (this.useEllipsoid) {
            var d = this._E,
                e = a / this._A + this._lng0,
                f = 0.5 * d,
                h = Math.exp(-(b / this._A) / this._k0),
                i = 1.5707963267948966 - 2 * Math.atan(h),
                g = 10,
                o;
            do o = d * Math.sin(i), o = 1.5707963267948966 - 2 * Math.atan(h * Math.pow((1 - o) / (1 + o), f)) - i, i += o; while (1.0E-8 < Math.abs(o) && 0 < --g);
            c.lng = e;
            c.lat = i
        } else c.lng = a / this._R + this._lng0, c.lat = 0.5 * Math.PI - 2 * Math.atan(Math.exp(-b / this._R));
        c.lat *= this._RAD2DEG;
        c.lng *=
            this._RAD2DEG;
        return c
    };
    J.prototype.setBaseZoom = function(a) {
        this.baseZoom = a
    };
    J.prototype.setBaseScale = function(a) {
        this.baseScale = a
    };
    J.prototype.getTileBounds = function(a, b, c) {
        var d = this.convZoomToScale(c),
            e = this.tileHeightInPixels * d,
            d = this.tileWidthInPixels * d,
            c = 1 << c,
            a = a * d - 0.5 * c * d,
            b = 0.5 * c * e - b * e;
        return (new q).setBounds(a, b, a + d, b - e)
    };
    J.prototype.getLevelOneScale = function() {
        var a = 156543.03515625;
        this.baseScale && (a = this.baseScale * (1 << this.baseZoom));
        return a
    };
    J.prototype.getCustomScaleRatio = function() {
        return this.baseScale ?
            256 * this.getLevelOneScale() / 40075017 : 1
    };
    J.prototype.convScaleToZoom = function(a, b) {
        var c = Math.log(this.getLevelOneScale() / a) / Math.log(2),
            d = Math.round(c),
            e = Math.abs(c - d);
        if (b || void 0 === b || 1.0E-6 > e) c = d;
        return c
    };
    J.prototype.convZoomToScale = function(a) {
        return this.getLevelOneScale() / Math.pow(2, a)
    };
    var $a = /#?([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})$/i;
    Ea.prototype = {
        hasStroke: function() {
            return 0 < this.strokeWeight && null !== this.strokeColor && 0 != this.strokeAlpha
        },
        hasFill: function() {
            return !!this.fillAlpha &&
                null != this.fillColor && !1 !== this.fillColor
        },
        setFill: function(a, b) {
            this.fillColor = a;
            this.fillAlpha = b
        },
        setStroke: function(a, b, c) {
            this.strokeWeight = a;
            this.strokeColor = b;
            this.strokeAlpha = c
        },
        setId: function() {},
        beginDrawing: function(a) {
            if (null !== this.strokeColor) a.strokeStyle = 1 > this.strokeAlpha ? Z(this.strokeColor, this.strokeAlpha) : Z(this.strokeColor), a.lineWidth = this.strokeWeight;
            if (this.specialFill) a.fillStyle = this.specialFill;
            else if (this.fillAlpha)
                if (1 > this.fillAlpha) a.fillStyle = Z(this.fillColor, this.fillAlpha);
                else if (null !== this.fillColor) a.fillStyle = Z(this.fillColor)
        }
    };
    k.extendPrototype(na, Ea);
    na.prototype.setId = function(a) {
        var b = this.fillColors,
            c = this.fillAlphas,
            d = 0 < this.strokeWeight ? "" + this.strokeWeight : "";
        if (b) b = b[a], d += String.fromCharCode(b & 255) + String.fromCharCode(b >> 16 & 15), this.fillColor = b;
        if (c) this.fillAlpha = c[a], d += String.fromCharCode(255 * this.fillAlpha | 0);
        if (this.strokeAlphas) this.strokeAlpha = this.strokeAlphas[a];
        this.fillStyler && (d += this.fillStyler.getSortCode(a), this.fillStyler.updateStyle(a,
            this));
        this.sortKey = d
    };
    na.prototype.updateStyle = function(a) {
        this.sortKey = "";
        if (a.strokeWeight) {
            this.setStroke(a.strokeWeight, a.strokeColor, a.strokeAlpha);
            var b = a.strokeAlpha;
            this.strokeAlphas = m.isArray(b) ? b : null
        } else this.strokeWeight = 0;
        a.fillAlpha ? (b = a.fillAlpha, m.isArray(b) ? this.fillAlphas = b : (this.fillAlpha = b, this.fillAlphas = null), b = a.fillColor, m.isArray(b) ? this.fillColors = b : (this.fillColor = b, this.fillColors = null)) : this.fillColors = this.fillColor = this.fillAlpha = this.fillAlphas = null;
        if (a.hatchColor) {
            if (!this.fillStyler) this.fillStyler =
                new ea(a);
            this.fillStyler.update(a)
        }
        this.compositing = a.compositing || ""
    };
    ea.prototype.update = function(a) {
        a = a.hatchColor;
        m.isArray(a) ? this.hatchColors = a : this.hatchColor = a || void 0
    };
    ea.prototype.getSortCode = function(a) {
        var b = this.hatchColors;
        return b ? "" + (b[a] || "") : "xx"
    };
    ea.prototype.updateStyle = function(a, b) {
        var c = this.hatchColor || this.hatchColors[a] || null;
        if (c && b.fillAlpha) {
            var d = Z(b.fillColor, b.fillAlpha),
                c = Z(c, b.fillAlpha);
            b.specialFill = this.getDiagonalFill(d, c)
        } else b.specialFill = null
    };
    ea.prototype.getEmptyCanvas =
        function(a, b) {
            var c = document.createElement("canvas");
            c.setAttribute("width", a);
            c.setAttribute("height", b);
            return c
        };
    ea.prototype.getDiagonalFill = function(a, b) {
        var c = a + b;
        index = this._fills;
        if (!index[c]) {
            var d = this.getEmptyCanvas(4, 4),
                e = d.getContext("2d");
            e.lineWidth = 1.5;
            e.fillStyle = a;
            e.fillRect(0, 0, 4, 4);
            e.strokeStyle = b;
            e.moveTo(0, 5);
            e.lineTo(5, 0);
            e.moveTo(-1, 2);
            e.lineTo(2, -1);
            e.stroke();
            index[c] = e.createPattern(d, "repeat")
        }
        return index[c]
    };
    k.inherit(E, y);
    E.prototype.getAttributeStyler = function(a) {
        return this._stylers[a] ||
            null
    };
    E.prototype.styleAttributeByZoom = function(a, b, c) {
        this._stylers[a] = new Ga(b, c)
    };
    E.prototype.getStyle = function() {
        return this._defaultStyle || {}
    };
    E.prototype.invalidate = function() {
        for (var a in this._stylers) this._stylers[a].invalidate()
    };
    E.prototype.setDefaultStyle = function(a) {
        var b = this._defaultStyle || {};
        k.copyAllParams(b, a);
        this._defaultStyle = b
    };
    E.prototype.setAttributeStyle = function(a, b) {
        this._stylers[a] = new Pa(b)
    };
    E.prototype.getAttributeDataAtZoom = function(a, b) {
        var c = this._stylers[a];
        return c ?
            (c.setZoom(b), c.getValue()) : null
    };
    E.getClassId = function(a, b) {
        var c = b.length,
            d = -1;
        if (!isNaN(a))
            for (var e = d = 0; e < c && !(a < b[e]); e++) d = e + 1;
        return d
    };
    k.inherit(F, E);
    F.prototype.handleDataChange = function() {
        j("[DataStyler.handleDataChange()] invalidating style");
        this.invalidate()
    };
    F.prototype.getDataTable = function() {
        return this._data
    };
    F.prototype.setAttributeStyler = function(a, b, c) {
        var d = typeof b;
        if ("string" == d) b = new Fa(this._data, b);
        else if ("function" == d) b = new oa(this._data, b, c);
        else {
            j("[DataStyler.setAttributeStyler()] invalid filter:",
                b);
            return
        }
        this._stylers[a] = b
    };
    F.prototype.calcCircleSizes = function(a, b) {
        this.setAttributeStyler("bubbleSizes", function(c) {
            c = c.getNumber(a);
            return Math.sqrt(c * b)
        })
    };
    F.prototype.calcFillsByRange = function(a, b, c) {
        this.setAttributeStyler("fillColor", F.getChoroplethStyler(a, b, c))
    };
    F.prototype.calcIndexedFills = function(a, b) {
        this.setAttributeStyler("fillColor", function(c) {
            return b[c.get(a)]
        })
    };
    F.prototype.setLinkedAttributeStyler = function(a, b, c, d) {
        this.waitFor(c);
        this._stylers[a] = new oa(c, b, d)
    };
    F.getRandomStyler =
        function(a) {
            return function() {
                var b = Math.floor(Math.random() * a.length);
                return a[b]
            }
        };
    F.getChoroplethStyler = function(a, b, c) {
        var d = E.getClassId;
        return function(e) {
            e = e.getNumber(a);
            e = d(e, b);
            return c[e]
        }
    };
    E.prototype.getStyleAtZoom = function(a) {
        var b = {};
        k.copyAllParams(b, this._defaultStyle);
        var c = this._stylers,
            d;
        for (d in c) {
            var e = c[d];
            e.setZoom(a);
            b[d] = e.getValue()
        }
        return b
    };
    fa.prototype.setZoom = function(a) {
        this._zoom = a
    };
    fa.prototype.invalidate = function() {
        this._needsUpdate = !0
    };
    k.extendPrototype(Pa, fa);
    k.extendPrototype(Fa, fa);
    Fa.prototype.getValue = function() {
        return this._data.getFieldData(this._field)
    };
    k.extendPrototype(oa, fa);
    oa.prototype.invalidate = function() {
        this._cached = null;
        this._needsUpdate = !0
    };
    oa.prototype.getValue = function() {
        if (!1 === this._needsUpdate && this._useCaching) return this._cached;
        for (var a = this._func, b = this._data, c = [], d = 0, e = b.size(); d < e; d++) {
            var f = b.getRecordById(d),
                f = a(f, this._zoom);
            c.push(f)
        }
        this._cached = c;
        this._needsUpdate = !1;
        return c
    };
    k.extendPrototype(Ga, fa);
    Ga.prototype.getValue =
        function() {
            return this._values[E.getClassId(this._zoom, this._breaks)]
        };
    R.prototype.setLayerStyler = function(a, b) {
        this.getLayerObject(a).styler = b;
        return this
    };
    R.prototype.setFallbackImage = function(a) {
        this._imageUrl = a;
        return this
    };
    R.prototype.setLayerStyle = function(a, b) {
        var c = new E;
        c.setDefaultStyle(b);
        this.setLayerStyler(a, c);
        return this
    };
    R.prototype.getLayerObject = function(a) {
        var b = this._ops,
            c;
        for (c in b)
            if (b[c].layer === a) return b[c];
        a = {
            layer: a
        };
        b.push(a);
        return a
    };
    R.prototype.hideLayer = function(a) {
        this.getLayerObject(a).hidden = !0;
        return this
    };
    R.prototype.setLayerInteraction = function(a, b) {
        this.getLayerObject(a).interactive = b;
        return this
    };
    R.prototype.clear = function() {};
    R.prototype.apply = function() {
        var a = this._map,
            b = a.isReady();
        this._imageUrl && a.setFallbackImage(this._imageUrl);
        for (var a = this._ops, c = 0; c < a.length; c++) {
            var d = a[c],
                e = d.layer;
            d.hidden ? e.isHidden() || e.hide() : (e.isHidden() && e.show(), d.styler && e.setStyler(d.styler));
            e.setInteraction(!!d.interactive)
        }
        b && this._map.refreshLayers()
    };
    ua.prototype.getCurrentView = function() {
        return this.getView(this._currName)
    };
    ua.prototype.getView = function(a) {
        if (a) return this.views[a] || (this.views[a] = new R(a, this._map));
        j("[ViewSwitcher.getView()] Called without view name.")
    };
    ua.prototype.setView = function(a) {
        if (this.views[a]) {
            var b = this._currName;
            a == b ? j("[ViewSwitcher.setView()] Trying to set view to the current view:", a) : (b && this.getView(b).clear(), this._currName = a, this.getView(a).apply())
        } else j("[ViewSwitcher.setView()] Missing view name:", a)
    };
    k.inherit(l, y);
    l.init = function(a) {
        if (!l._extensions) a.preferFlash || !g.canvas ?
            a.flashUrl ? (l.swfUrl = a.flashUrl, l.useFlashExtensions ? (l.useFlashExtensions(), l._extensions = "flash") : g.log("[Map.init] Missing Flash extensions.")) : g.log("[Map.init(params)] Missing flashUrl parameter. You need to give the url of a Flash component.") : l.useHTML5Extensions ? (l.useHTML5Extensions(), l._extensions = "html5") : j("[Map.init] Missing HTML5 extensions.")
    };
    l.prototype.init = function() {
        this.initMap()
    };
    l.prototype.addOverlay = function(a) {
        a.style.zIndex = 10;
        this.div.appendChild(a)
    };
    l.prototype.initMap =
        function() {
            var a = this._opts;
            if (!a.center || !a.crs || !a.width || !a.height || !a.widthKm && !a.zoom) j("[Map] missing one or more required parameters:", "center, crs, width, height, widthKm|zoom");
            else {
                if (!a.zoom) a.zoom = 1;
                this.views = new ua(this);
                var b = a.crs || new Oa;
                this.mouse = new u;
                b.setBaseZoom(a.zoom);
                this._crs = b;
                this.projection = b.projection;
                this.updateContainerBounds();
                window.onorientationchange && g.addEventListener(window, "orientationchange", this.updateContainerBounds, this);
                g.addEventListener(window, "resize",
                    this.updateContainerBounds, this);
                this.mouse.addEventListener("mouseover", this.updateContainerBounds, this);
                g.addEventListener(window, "scroll", this.handleWindowScroll, this);
                this._layers = []
            }
        };
    l.prototype.handleWindowScroll = function() {
        var a = this._leftPix,
            b = this._topPix,
            c = this._viewportTop,
            d = this._viewportLeft;
        if (void 0 !== b) {
            this.updatePagePosition();
            var e = this._viewportLeft,
                f = this._viewportTop,
                h = this._leftPix,
                i = this._topPix;
            this.dispatchEvent("scroll", {
                pageX: h,
                pageY: i,
                viewX: e,
                viewY: f,
                deltaPageX: h - a,
                deltaPageY: i -
                    b,
                deltaViewX: e - d,
                deltaViewY: f - c
            })
        }
    };
    l.prototype.updatePagePosition = function() {
        var a = g.getPageXY(this.div),
            b = a.x,
            a = a.y;
        this._leftPix = b;
        this._topPix = a;
        this._viewportTop = g.pageYToViewportY(a);
        this._viewportLeft = g.pageXToViewportX(b);
        this.mouse.updateContainerBounds(b, a + this._heightPix, b + this._widthPix, a)
    };
    l.prototype.updateContainerBounds = function() {
        var a = this._opts,
            b = a.width || 0,
            c = a.height || 0,
            d = a.spacing || 0,
            e = this.div;
        b && c ? (d = b, b = c) : (d = e.offsetWidth, b = e.offsetHeight);
        c = d != this._widthPix || b != this._heightPix;
        this._widthPix = d;
        this._heightPix = b;
        this.updatePagePosition();
        b = a.widthKm;
        d = this.getSpacing();
        if (b) {
            var e = this.getWidthInPixels(),
                b = b * e / (e - (d.left + d.right)),
                f = 1E3 * b / e;
            if (a = a.heightKm) {
                var h = this.getHeightInPixels(),
                    a = a * h / (h - (d.top + d.bottom));
                e / h > b / a && (f = 1E3 * a / h)
            }
            this.getCRS().setBaseScale(f)
        }
        c && this.dispatchEvent("resize")
    };
    l.prototype.getContainer = function() {
        return this.div
    };
    l.prototype.getLayers = function() {
        return this._layers
    };
    l.prototype.convViewPixelsToLatLng = function(a, b) {
        var c = this.convViewPixelsToMeters(a,
            b);
        return this.projection.unprojectXY(c.x, c.y)
    };
    l.prototype.convViewPixelsToMeters = function(a, b) {
        var c = this.getCenterAsLatLng(),
            c = this.projection.projectLatLng(c.lat, c.lng),
            d = this.getScale(),
            e = this.getWidthInPixels(),
            f = this.getHeightInPixels();
        return new I(c.x - -(a - 0.5 * e) * d, c.y - (b - 0.5 * f) * d)
    };
    l.prototype.convMetersToViewPixels = function(a, b) {
        return this.getVisibleExtent().transformXY(a, b)
    };
    l.prototype.setFallbackImage = function() {};
    l.prototype.getSpacing = function() {
        if (!this._spacing) {
            var a = this._opts,
                b = a.spacing || 0;
            this._spacing = {
                left: isNaN(a.spacingLeft) ? b : a.spacingLeft + 0,
                top: isNaN(a.spacingTop) ? b : a.spacingTop + 0,
                right: isNaN(a.spacingRight) ? b : a.spacingRight + 0,
                bottom: isNaN(a.spacingBottom) ? b : a.spacingBottom + 0
            }
        }
        return this._spacing
    };
    l.prototype.getCenterAsLatLng = function() {
        j("[Map.getCenterAsLatLng()] stub")
    };
    l.prototype.getInitialCenterAsLatLng = function() {
        var a = this._opts.center,
            b = this.getSpacing();
        if (b.left == b.right && b.top == b.bottom) return a;
        var c = this.getInitialScale(),
            d = 0.5 * (b.right - b.left) *
            c,
            b = 0.5 * (b.top - b.bottom) * c,
            a = this.projection.projectLatLng(a.lat, a.lng);
        return this.projection.unprojectXY(a.x + d, a.y + b).clone()
    };
    l.prototype.getZoom = function() {};
    l.prototype.addLayer = function(a) {
        var b = this._layers;
        if ("shape" == a.type || "bubble" == a.type) a._opts.hitPriority = k.readParam(a._opts.hitPriority, 0.01 * b.length);
        for (var c = 0, d = b.length; c < d; c++) a.waitFor(b[c]);
        b.push(a);
        a.setMap(this);
        this.isReady() ? j("[Map.addLayer() flash] Warning: adding a layer after map is ready:", a) : this.waitFor(a)
    };
    l.prototype.refreshLayers =
        function() {
            for (var a = this.getLayers(), b = 0; b < a.length; b++) {
                var c = a[b];
                !c.isHidden() && c.refresh()
            }
        };
    l.prototype.handleMouseMove = function() {
        j("[Map.handleMouseMove()] stub")
    };
    l.prototype.getCRS = function() {
        return this._crs
    };
    l.prototype.getScale = function() {
        return this._crs.convZoomToScale(this.getZoom())
    };
    l.prototype.getTopInPixels = function() {
        return this._topPix
    };
    l.prototype.getLeftInPixels = function() {
        return this._leftPix
    };
    l.prototype.getWidthInPixels = function() {
        return this._widthPix
    };
    l.prototype.getHeightInPixels =
        function() {
            return this._heightPix
        };
    l.prototype.__getBounds = function(a, b) {
        var c = this.projection.projectLatLng(a.lat, a.lng),
            d = 0.5 * this.getWidthInPixels(),
            e = 0.5 * this.getHeightInPixels();
        return (new q).setBounds(c.x - d * b, c.y + e * b, c.x + d * b, c.y - e * b)
    };
    l.prototype.getVisibleBounds = function() {
        return this.__getBounds(this.getCenterAsLatLng(), this.getScale())
    };
    l.prototype.getInitialBounds = function() {
        return this.__getBounds(this.getInitialCenterAsLatLng(), this.getInitialScale())
    };
    l.prototype.getVisibleExtent = function() {
        var a =
            new V(this.getWidthInPixels(), this.getHeightInPixels()),
            b = this.getVisibleBounds();
        a.updateBounds(b);
        return a
    };
    l.prototype.getInitialScale = function() {
        return this._crs.convZoomToScale(this._opts.zoom)
    };
    l.prototype.display = function() {
        this.startWaiting()
    };
    l.prototype.handleReadyState = function() {
        this.refreshLayers()
    };
    l.prototype.resize = function(a, b) {
        if (!a || !b) j("[Map.resize()] requires a width and a height.");
        else {
            var c = this._opts;
            c.width = a;
            c.height = b;
            this.updateContainerBounds()
        }
    };
    l.prototype.showHover =
        function() {};
    l.prototype.hideHover = function() {};
    l.prototype.zoomIn = function() {
        var a = this.getVisibleBounds();
        a.scale(0.5);
        this.zoom({
            bounds: a
        })
    };
    l.prototype.zoomOut = function() {
        j("Map.zoomOut(); center:", this.getCenterAsLatLng(), "scale:", this.getScale());
        j("  ... visible:", this.getVisibleBounds());
        var a = this.getVisibleBounds();
        a.scale(2);
        this.zoom({
            bounds: a
        })
    };
    l.prototype.zoom = function() {
        j("[Map.zoom()] stub; need to override.")
    };
    v.prototype = new y;
    v.prototype.setMap = function(a) {
        this._map = a;
        this.init();
        this.startWaiting()
    };
    v.prototype.getElement = function() {
        j("[MapLayer.getElement()] stub; need to override.")
    };
    v.prototype.hide = function() {};
    v.prototype.show = function() {};
    v.prototype.isHidden = function() {
        return !!this._hidden
    };
    k.inherit(M, v);
    k.inherit(n, v);
    n.prototype.setStyle = function(a) {
        var b = new E;
        b.setDefaultStyle(a);
        this.setStyler(b);
        return this
    };
    n.prototype.setStyler = function(a) {
        this.styler = a;
        this.waitFor(a)
    };
    n.prototype.getStyle = function() {
        var a = this.style;
        this.styler && (a = this.styler.getStyleAtZoom(this._map.getZoom()));
        return a
    };
    n.prototype.getHitId = function() {
        return void 0 === this._hitId ? -1 : this._hitId
    };
    n.prototype.showHoverSymbolById = function() {
        j("[SymbolLayer.showHoverSymbolById()] stub")
    };
    n.prototype.getRecordById = function(a) {
        var b = null;
        this.styler && this.styler.getDataTable && (b = this.styler.getDataTable().getRecordById(a));
        return b
    };
    n.prototype.setHoverById = function() {};
    n.prototype.clearHover = function() {};
    v.prototype.init = function() {
        j("[MapLayer.init()] stub")
    };
    v.prototype.clear = function() {
        j("[MapLayer.clear()] stub")
    };
    v.prototype.refresh = function() {
        j("[MapLayer.refresh()] stub")
    };
    n.prototype.getHiddenSymbolList = function() {
        return this.styler && this.styler.getAttributeDataAtZoom("hidden", this._map.getZoom())
    };
    n.prototype.refreshStyleProperty = function(a) {
        a && this.styler && this.styler.updateStyleProperty(a);
        this.refresh()
    };
    n.prototype.isInteractive = function() {
        return !1 == this.isHidden() && !!this._interactive
    };
    n.prototype.setInteraction = function(a) {
        this._interactive = !!a
    };
    k.inherit(G, y);
    k.inherit(H, n);
    k.inherit(Y, y);
    Y.prototype.importData =
        function(a, b) {
            a.addEventListener("ready", function() {
                this.importFromString(a.data, b)
            }, this);
            return this
        };
    Y.prototype.getShapeTypes = function() {
        return this._types
    };
    Y.prototype.importFromString = function(a, b) {
        this._utf16Str = a;
        this._transform = b ? b.transform : null;
        this.startWaiting();
        return this
    };
    k.inherit(z, n);
    k.inherit(Qa, v);
    k.inherit(aa, y);
    k.inherit(ba, n);
    k.inherit(va, y);
    k.inherit(Ra, y);
    C.prototype.__initMap = function(a) {
        if (!this._map && a && a.mouse) a.mouse.ignoreElement(this.container), a.mouse.addEventListener("mousemove",
            this.moveHandler, this), a.addEventListener("scroll", this.handleScroll, this), this._map = a
    };
    C.prototype.setLayer = function(a) {
        a.addEventListener("rollover", this.displayHandler, this);
        a.addEventListener("rollout", this.hideHandler, this)
    };
    C.getDivHTML = function(a, b) {
        return '<div class="' + b + '">' + a + "</div>\n"
    };
    C.getTitle = function(a) {
        return this.getDivHTML(a, "nytg-popup-title")
    };
    C.getSubtitle = function(a) {
        return this.getDivHTML(a, "nytg-popup-subtitle")
    };
    C.getText = function(a) {
        return this.getDivHTML(a, "nytg-popup-text")
    };
    C.getTail = function(a) {
        return this.getDivHTML(a, "nytg-popup-tail")
    };
    C.prototype.getElement = function() {
        return this.container
    };
    C.prototype.displayRecord = function(a) {
        var b = this.container;
        if (a = this._callback(a)) {
            b.innerHTML = a;
            a = this._attachToMap ? this._map.div : document.body;
            b.parentNode != a && a.appendChild(b);
            if (!this.REMOVE) this.container.style.visibility = "visible";
            this.containerWidth = b.offsetWidth;
            this.containerHeight = b.offsetHeight;
            this.pageWidth = g.getViewportWidth();
            this.viewportX = g.pageXToViewportX(0);
            this._visible = !0
        } else this.hide()
    };
    C.prototype.hide = function() {
        this._visible = !1;
        this.container.parentNode ? this.REMOVE ? this.container.parentNode.removeChild(this.container) : this.container.style.visibility = "hidden" : j("[HTMLPopup.hide()] Not attached to DOM.")
    };
    C.prototype.moveHandler = function(a) {
        this._visible && this.movePopupToXY(a)
    };
    C.prototype.movePopupToXY = function(a, b) {
        var c = a.pageX || 0,
            d = a.pageY || 0,
            e = this.containerWidth,
            f = this.containerHeight,
            h = d - f - this._opts.offset,
            d = d + this._opts.offset + 8;
        if (b) this._fitsAbove =
            0 <= g.pageYToViewportY(h), this._fitsBelow = g.pageYToViewportY(d + f) <= g.getViewportHeight();
        c -= e * this._opts.peg;
        h = this._fitsBelow ? d : h;
        0 > c ? c = 0 : c + e > this.pageWidth && (c = this.pageWidth - e);
        this._fixedPosition && (c = g.pageXToViewportX(c), h = g.pageYToViewportY(h));
        this.setXY(c, h)
    };
    C.prototype.handleScroll = function(a) {
        this._visible && (this._fixedPosition ? 0 != a.deltaViewY && this.setXY(this._x + a.deltaViewX, this._y + a.deltaViewY) : 0 != a.deltaPageY && this.setXY(this._x + a.deltaPageX, this._y + a.deltaPageY))
    };
    C.prototype.setXY =
        function(a, b) {
            a = Math.round(a);
            b = Math.round(b);
            this._x = a;
            this._y = b;
            var c = this.container;
            c.style.left = a + "px";
            c.style.top = b + "px"
        };
    C.prototype.displayHandler = function(a) {
        this.__initMap(a.target._map);
        var b = a.rec;
        b ? (this.displayRecord(b), this.movePopupToXY(a, !0)) : j("[HTMLPopup.displayHandler()] missing record")
    };
    C.prototype.hideHandler = function() {
        this.hide()
    };
    wa.leftPad = function(a, b, c) {
        for (b -= a.length; 0 < b--;) a = c + a;
        return a
    };
    wa.trim = function(a) {
        return a.replace(/^\s+|\s+$/g, "")
    };
    wa.formatNumber = function(a,
        b, c, d) {
        b = b || 0;
        c = c || "";
        d = d || !1;
        if (a == !a || Infinity == a || -Infinity == a) return c;
        var e = c = "",
            f = 0;
        if (0 < b) {
            e = Math.pow(10, b);
            f = Math.round(Math.abs(a) * e + 1.0E-7);
            c = "" + Math.floor(f / e);
            for (e = "" + f % e; e.length < b;) e = "0" + e;
            e = "." + e
        } else f = Math.round(Math.abs(a)), c = "" + f;
        if ("0" == c && !e) return "0";
        a = 0 > a ? "-" : d ? "+" : "";
        if (3 < c.length) {
            b = c.length;
            for (d = ""; 3 < b;) d = "," + c.substr(b - 3, 3) + d, b -= 3;
            c = c.substr(0, b) + d
        }
        return a + c + e
    };
    k.inherit(Ha, p);
    Ha.prototype.joinTable = function(a, b, c) {
        var d = this._baseTable;
        d.isReady() && b.isReady() ? (La(d,
            a, b, c), this.populate(d.data, d.schema)) : (d = (new y).waitFor(d).waitFor(b), d.addEventListener("ready", function() {
            this.joinTable(a, b, c)
        }, this), d.startWaiting());
        return this
    };
    var Aa = {
        ALBERS_US_WIDTH_KM: 4650,
        ALBERS_US_HEIGHT_KM: 2940,
        ALBERS_US_CENTER: new P(38.7, -96.6)
    };
    k.extendNamespace("nytg.map", {
        C: s,
        A: O,
        trace: j,
        Opts: k,
        Utils: m,
        Waiter: y,
        Map: l,
        GeoPoint: P,
        MapCRS: J,
        GoogleCRS: Oa,
        Mercator: ma,
        SphericalMercator: Na,
        CircleData: G,
        CircleLayer: H,
        ShapeData: Y,
        ShapeLayer: z,
        LabelLayer: ba,
        LabelData: aa,
        MatchFilter: function(a,
            b) {
            this.getIds = function(c) {
                for (var d = [], e = c.getFieldData(a), f = 0, h = c.size(); f < h; f++) e[f] === b && d.push(f);
                0 == d.length && j("[MatchFilter.getIds()] Filter removed all table rows. Field:", a, "value:", b, "type:", c.getFieldType(a));
                return d
            }
        },
        TabDataParser: function() {
            function a(a) {
                var b, c;
                d = a.length;
                for (var i = 0; i < d; i++) {
                    var g = a[i];
                    c = s.STRING;
                    b = void 0; - 1 == g.indexOf(":") ? b = g : (g = g.split(":"), b = g[0], c = p.validateFieldType(g[1]) || c);
                    e[b] = i;
                    f[i] = c;
                    h[i] = []
                }
            }

            function b(a) {
                var b = a.length;
                if (!(0 == b || "#" === a[0].charAt(0))) {
                    for (var c =
                            0; c < d; c++) {
                        var e = c >= b ? "" : a[c],
                            g = f[c];
                        g == s.DOUBLE ? e = parseFloat(e) : g == s.INTEGER && (e = parseInt(e, 10));
                        h[c].push(e)
                    }
                    i++
                }
            }

            function c() {
                var a = {},
                    b = {},
                    c;
                for (c in e)
                    if (e.hasOwnProperty(c)) {
                        var d = e[c];
                        a[c] = f[d];
                        b[c] = h[d]
                    }
                return {
                    schema: a,
                    data: b,
                    length: i
                }
            }
            var d, e = {},
                f = [],
                h = [],
                i = 0;
            this.parse = this.procString = function(d) {
                var d = d.split(/\r?\n/g),
                    e = d.length,
                    f = d[0].split("\t");
                a(f);
                for (f = 1; f < e; f++) {
                    var h = d[f];
                    0 !== h.length && (h = h.split("\t"), b(h))
                }
                return c()
            };
            this.procArrayData = function(d, e) {
                a(d);
                for (var f = e.length,
                        h = 0; h < f; h++) b(e[h]);
                return c()
            }
        },
        JsonPLoader: Ra,
        LinkedDataSource: $,
        JoinedTable: Ha,
        SymbolStyler: E,
        DataStyler: F,
        Browser: g,
        HTMLPopup: C,
        DataTable: p,
        TextUtils: wa,
        MapOpts: Aa
    });
    var pa = function() {
            function a() {
                if (!J) {
                    try {
                        var a = w.getElementsByTagName("body")[0].appendChild(w.createElement("span"));
                        a.parentNode.removeChild(a)
                    } catch (b) {
                        return
                    }
                    J = !0;
                    for (var a = C.length, c = 0; c < a; c++) C[c]()
                }
            }

            function b(a) {
                J ? a() : C[C.length] = a
            }

            function c(a) {
                if (typeof v.addEventListener != p) v.addEventListener("load", a, !1);
                else if (typeof w.addEventListener !=
                    p) w.addEventListener("load", a, !1);
                else if (typeof v.attachEvent != p) m(v, "onload", a);
                else if ("function" == typeof v.onload) {
                    var b = v.onload;
                    v.onload = function() {
                        b();
                        a()
                    }
                } else v.onload = a
            }

            function d() {
                var a = w.getElementsByTagName("body")[0],
                    b = w.createElement(u);
                b.setAttribute("type", y);
                var c = a.appendChild(b);
                if (c) {
                    var d = 0;
                    (function() {
                        if (typeof c.GetVariable != p) {
                            var f = c.GetVariable("$version");
                            if (f) f = f.split(" ")[1].split(","), t.pv = [parseInt(f[0], 10), parseInt(f[1], 10), parseInt(f[2], 10)]
                        } else if (10 > d) {
                            d++;
                            setTimeout(arguments.callee,
                                10);
                            return
                        }
                        a.removeChild(b);
                        c = null;
                        e()
                    })()
                } else e()
            }

            function e() {
                var a = D.length;
                if (0 < a)
                    for (var b = 0; b < a; b++) {
                        var c = D[b].id,
                            d = D[b].callbackFn,
                            e = {
                                success: !1,
                                id: c
                            };
                        if (0 < t.pv[0]) {
                            var j = k(c);
                            if (j)
                                if (n(D[b].swfVersion) && !(t.wk && 312 > t.wk)) {
                                    if (s(c, !0), d) e.success = !0, e.ref = f(c), d(e)
                                } else if (D[b].expressInstall && h()) {
                                e = {};
                                e.data = D[b].expressInstall;
                                e.width = j.getAttribute("width") || "0";
                                e.height = j.getAttribute("height") || "0";
                                if (j.getAttribute("class")) e.styleclass = j.getAttribute("class");
                                if (j.getAttribute("align")) e.align =
                                    j.getAttribute("align");
                                for (var o = {}, j = j.getElementsByTagName("param"), l = j.length, m = 0; m < l; m++) "movie" != j[m].getAttribute("name").toLowerCase() && (o[j[m].getAttribute("name")] = j[m].getAttribute("value"));
                                i(e, o, c, d)
                            } else g(j), d && d(e)
                        } else if (s(c, !0), d) {
                            if ((c = f(c)) && typeof c.SetVariable != p) e.success = !0, e.ref = c;
                            d(e)
                        }
                    }
            }

            function f(a) {
                var b = null;
                if ((a = k(a)) && "OBJECT" == a.nodeName) typeof a.SetVariable != p ? b = a : (a = a.getElementsByTagName(u)[0]) && (b = a);
                return b
            }

            function h() {
                return !M && n("6.0.65") && (t.win || t.mac) &&
                    !(t.wk && 312 > t.wk)
            }

            function i(a, b, c, d) {
                M = !0;
                L = d || null;
                P = {
                    success: !1,
                    id: c
                };
                var e = k(c);
                if (e) {
                    "OBJECT" == e.nodeName ? (I = o(e), K = null) : (I = e, K = c);
                    a.id = A;
                    if (typeof a.width == p || !/%$/.test(a.width) && 310 > parseInt(a.width, 10)) a.width = "310";
                    if (typeof a.height == p || !/%$/.test(a.height) && 137 > parseInt(a.height, 10)) a.height = "137";
                    w.title = w.title.slice(0, 47) + " - Flash Player Installation";
                    d = t.ie && t.win ? "ActiveX" : "PlugIn";
                    d = "MMredirectURL=" + v.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + d + "&MMdoctitle=" + w.title;
                    b.flashvars = typeof b.flashvars != p ? b.flashvars + ("&" + d) : d;
                    if (t.ie && t.win && 4 != e.readyState) d = w.createElement("div"), c += "SWFObjectNew", d.setAttribute("id", c), e.parentNode.insertBefore(d, e), e.style.display = "none",
                        function() {
                            4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
                        }();
                    j(a, b, c)
                }
            }

            function g(a) {
                if (t.ie && t.win && 4 != a.readyState) {
                    var b = w.createElement("div");
                    a.parentNode.insertBefore(b, a);
                    b.parentNode.replaceChild(o(a), b);
                    a.style.display = "none";
                    (function() {
                        4 == a.readyState ? a.parentNode.removeChild(a) :
                            setTimeout(arguments.callee, 10)
                    })()
                } else a.parentNode.replaceChild(o(a), a)
            }

            function o(a) {
                var b = w.createElement("div");
                if (t.win && t.ie) b.innerHTML = a.innerHTML;
                else if (a = a.getElementsByTagName(u)[0])
                    if (a = a.childNodes)
                        for (var c = a.length, d = 0; d < c; d++) !(1 == a[d].nodeType && "PARAM" == a[d].nodeName) && 8 != a[d].nodeType && b.appendChild(a[d].cloneNode(!0));
                return b
            }

            function j(a, b, c) {
                var d, e = k(c);
                if (t.wk && 312 > t.wk) return d;
                if (e) {
                    if (typeof a.id == p) a.id = c;
                    if (t.ie && t.win) {
                        var f = "",
                            h;
                        for (h in a)
                            if (a[h] != Object.prototype[h]) "data" ==
                                h.toLowerCase() ? b.movie = a[h] : "styleclass" == h.toLowerCase() ? f += ' class="' + a[h] + '"' : "classid" != h.toLowerCase() && (f += " " + h + '="' + a[h] + '"');
                        h = "";
                        for (var i in b) b[i] != Object.prototype[i] && (h += '<param name="' + i + '" value="' + b[i] + '" />');
                        e.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + f + ">" + h + "</object>";
                        F[F.length] = a.id;
                        d = k(a.id)
                    } else {
                        i = w.createElement(u);
                        i.setAttribute("type", y);
                        for (var g in a) a[g] != Object.prototype[g] && ("styleclass" == g.toLowerCase() ? i.setAttribute("class", a[g]) :
                            "classid" != g.toLowerCase() && i.setAttribute(g, a[g]));
                        for (f in b) b[f] != Object.prototype[f] && "movie" != f.toLowerCase() && (a = i, h = f, g = b[f], c = w.createElement("param"), c.setAttribute("name", h), c.setAttribute("value", g), a.appendChild(c));
                        e.parentNode.replaceChild(i, e);
                        d = i
                    }
                }
                return d
            }

            function l(a) {
                var b = k(a);
                if (b && "OBJECT" == b.nodeName) t.ie && t.win ? (b.style.display = "none", function() {
                    if (4 == b.readyState) {
                        var c = k(a);
                        if (c) {
                            for (var d in c) "function" == typeof c[d] && (c[d] = null);
                            c.parentNode.removeChild(c)
                        }
                    } else setTimeout(arguments.callee,
                        10)
                }()) : b.parentNode.removeChild(b)
            }

            function k(a) {
                var b = null;
                try {
                    b = w.getElementById(a)
                } catch (c) {}
                return b
            }

            function m(a, b, c) {
                a.attachEvent(b, c);
                H[H.length] = [a, b, c]
            }

            function n(a) {
                var b = t.pv,
                    a = a.split(".");
                a[0] = parseInt(a[0], 10);
                a[1] = parseInt(a[1], 10) || 0;
                a[2] = parseInt(a[2], 10) || 0;
                return b[0] > a[0] || b[0] == a[0] && b[1] > a[1] || b[0] == a[0] && b[1] == a[1] && b[2] >= a[2] ? !0 : !1
            }

            function q(a, b, c, d) {
                if (!t.ie || !t.mac) {
                    var e = w.getElementsByTagName("head")[0];
                    if (e) {
                        c = c && "string" == typeof c ? c : "screen";
                        d && (O = G = null);
                        if (!G || O !=
                            c) d = w.createElement("style"), d.setAttribute("type", "text/css"), d.setAttribute("media", c), G = e.appendChild(d), t.ie && t.win && typeof w.styleSheets != p && 0 < w.styleSheets.length && (G = w.styleSheets[w.styleSheets.length - 1]), O = c;
                        t.ie && t.win ? G && typeof G.addRule == u && G.addRule(a, b) : G && typeof w.createTextNode != p && G.appendChild(w.createTextNode(a + " {" + b + "}"))
                    }
                }
            }

            function s(a, b) {
                if (Q) {
                    var c = b ? "visible" : "hidden";
                    J && k(a) ? k(a).style.visibility = c : q("#" + a, "visibility:" + c)
                }
            }

            function N(a) {
                return null != /[\\\"<>\.;]/.exec(a) &&
                    typeof encodeURIComponent != p ? encodeURIComponent(a) : a
            }
            var p = "undefined",
                u = "object",
                y = "application/x-shockwave-flash",
                A = "SWFObjectExprInst",
                v = window,
                w = document,
                z = navigator,
                E = !1,
                C = [function() {
                    E ? d() : e()
                }],
                D = [],
                F = [],
                H = [],
                I, K, L, P, J = !1,
                M = !1,
                G, O, Q = !0,
                t = function() {
                    var a = typeof w.getElementById != p && typeof w.getElementsByTagName != p && typeof w.createElement != p,
                        b = z.userAgent.toLowerCase(),
                        c = z.platform.toLowerCase(),
                        d = c ? /win/.test(c) : /win/.test(b),
                        c = c ? /mac/.test(c) : /mac/.test(b),
                        b = /webkit/.test(b) ? parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,
                            "$1")) : !1,
                        e = !+"\u000b1",
                        f = [0, 0, 0],
                        h = null;
                    if (typeof z.plugins != p && typeof z.plugins["Shockwave Flash"] == u) {
                        if ((h = z.plugins["Shockwave Flash"].description) && !(typeof z.mimeTypes != p && z.mimeTypes[y] && !z.mimeTypes[y].enabledPlugin)) E = !0, e = !1, h = h.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), f[0] = parseInt(h.replace(/^(.*)\..*$/, "$1"), 10), f[1] = parseInt(h.replace(/^.*\.(.*)\s.*$/, "$1"), 10), f[2] = /[a-zA-Z]/.test(h) ? parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0
                    } else if (typeof v.ActiveXObject != p) try {
                        var i = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                        if (i && (h = i.GetVariable("$version"))) e = !0, h = h.split(" ")[1].split(","), f = [parseInt(h[0], 10), parseInt(h[1], 10), parseInt(h[2], 10)]
                    } catch (g) {}
                    return {
                        w3: a,
                        pv: f,
                        wk: b,
                        ie: e,
                        win: d,
                        mac: c
                    }
                }();
            (function() {
                t.w3 && ((typeof w.readyState != p && "complete" == w.readyState || typeof w.readyState == p && (w.getElementsByTagName("body")[0] || w.body)) && a(), J || (typeof w.addEventListener != p && w.addEventListener("DOMContentLoaded", a, !1), t.ie && t.win && (w.attachEvent("onreadystatechange", function() {
                    "complete" == w.readyState && (w.detachEvent("onreadystatechange",
                        arguments.callee), a())
                }), v == top && function() {
                    if (!J) {
                        try {
                            w.documentElement.doScroll("left")
                        } catch (b) {
                            setTimeout(arguments.callee, 0);
                            return
                        }
                        a()
                    }
                }()), t.wk && function() {
                    J || (/loaded|complete/.test(w.readyState) ? a() : setTimeout(arguments.callee, 0))
                }(), c(a)))
            })();
            (function() {
                t.ie && t.win && window.attachEvent("onunload", function() {
                    for (var a = H.length, b = 0; b < a; b++) H[b][0].detachEvent(H[b][1], H[b][2]);
                    a = F.length;
                    for (b = 0; b < a; b++) l(F[b]);
                    for (var c in t) t[c] = null;
                    t = null;
                    for (var d in pa) pa[d] = null;
                    pa = null
                })
            })();
            return {
                registerObject: function(a,
                    b, c, d) {
                    if (t.w3 && a && b) {
                        var e = {};
                        e.id = a;
                        e.swfVersion = b;
                        e.expressInstall = c;
                        e.callbackFn = d;
                        D[D.length] = e;
                        s(a, !1)
                    } else d && d({
                        success: !1,
                        id: a
                    })
                },
                getObjectById: function(a) {
                    if (t.w3) return f(a)
                },
                embedSWF: function(a, c, d, e, f, g, o, l, k, r) {
                    var m = {
                        success: !1,
                        id: c
                    };
                    t.w3 && !(t.wk && 312 > t.wk) && a && c && d && e && f ? (s(c, !1), b(function() {
                        d += "";
                        e += "";
                        var b = {};
                        if (k && typeof k === u)
                            for (var x in k) b[x] = k[x];
                        b.data = a;
                        b.width = d;
                        b.height = e;
                        x = {};
                        if (l && typeof l === u)
                            for (var q in l) x[q] = l[q];
                        if (o && typeof o === u)
                            for (var t in o) x.flashvars = typeof x.flashvars !=
                                p ? x.flashvars + ("&" + t + "=" + o[t]) : t + "=" + o[t];
                        if (n(f)) q = j(b, x, c), b.id == c && s(c, !0), m.success = !0, m.ref = q;
                        else {
                            if (g && h()) {
                                b.data = g;
                                i(b, x, c, r);
                                return
                            }
                            s(c, !0)
                        }
                        r && r(m)
                    })) : r && r(m)
                },
                switchOffAutoHideShow: function() {
                    Q = !1
                },
                ua: t,
                getFlashPlayerVersion: function() {
                    return {
                        major: t.pv[0],
                        minor: t.pv[1],
                        release: t.pv[2]
                    }
                },
                hasFlashPlayerVersion: n,
                createSWF: function(a, b, c) {
                    if (t.w3) return j(a, b, c)
                },
                showExpressInstall: function(a, b, c, d) {
                    t.w3 && h() && i(a, b, c, d)
                },
                removeSWF: function(a) {
                    t.w3 && l(a)
                },
                createCSS: function(a, b, c, d) {
                    t.w3 &&
                        q(a, b, c, d)
                },
                addDomLoadEvent: b,
                addLoadEvent: c,
                getQueryParamValue: function(a) {
                    var b = w.location.search || w.location.hash;
                    if (b) {
                        /\?/.test(b) && (b = b.split("?")[1]);
                        if (null == a) return N(b);
                        for (var b = b.split("&"), c = 0; c < b.length; c++)
                            if (b[c].substring(0, b[c].indexOf("=")) == a) return N(b[c].substring(b[c].indexOf("=") + 1))
                    }
                    return ""
                },
                expressInstallCallback: function() {
                    if (M) {
                        var a = k(A);
                        if (a && I) {
                            a.parentNode.replaceChild(I, a);
                            if (K && (s(K, !0), t.ie && t.win)) I.style.display = "block";
                            L && L(P)
                        }
                        M = !1
                    }
                }
            }
        }(),
        U;
    U || (U = {});
    (function() {
        function a(a) {
            return 10 >
                a ? "0" + a : a
        }

        function b(a) {
            e.lastIndex = 0;
            return e.test(a) ? '"' + a.replace(e, function(a) {
                var b = i[a];
                return "string" === typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            }) + '"' : '"' + a + '"'
        }

        function c(a, d) {
            var e, i, j, l, k = f,
                m, n = d[a];
            n && "object" === typeof n && "function" === typeof n.toJSON && (n = n.toJSON(a));
            "function" === typeof g && (n = g.call(d, a, n));
            switch (typeof n) {
                case "string":
                    return b(n);
                case "number":
                    return isFinite(n) ? "" + n : "null";
                case "boolean":
                case "null":
                    return "" + n;
                case "object":
                    if (!n) return "null";
                    f += h;
                    m = [];
                    if ("[object Array]" === Object.prototype.toString.apply(n)) {
                        l = n.length;
                        for (e = 0; e < l; e += 1) m[e] = c(e, n) || "null";
                        j = 0 === m.length ? "[]" : f ? "[\n" + f + m.join(",\n" + f) + "\n" + k + "]" : "[" + m.join(",") + "]";
                        f = k;
                        return j
                    }
                    if (g && "object" === typeof g) {
                        l = g.length;
                        for (e = 0; e < l; e += 1) "string" === typeof g[e] && (i = g[e], (j = c(i, n)) && m.push(b(i) + (f ? ": " : ":") + j))
                    } else
                        for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (j = c(i, n)) && m.push(b(i) + (f ? ": " : ":") + j);
                    j = 0 === m.length ? "{}" : f ? "{\n" + f + m.join(",\n" + f) + "\n" + k + "}" : "{" + m.join(",") +
                        "}";
                    f = k;
                    return j
            }
        }
        if ("function" !== typeof Date.prototype.toJSON) Date.prototype.toJSON = function() {
            return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + a(this.getUTCMonth() + 1) + "-" + a(this.getUTCDate()) + "T" + a(this.getUTCHours()) + ":" + a(this.getUTCMinutes()) + ":" + a(this.getUTCSeconds()) + "Z" : null
        }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
            return this.valueOf()
        };
        var d = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
            e = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
            f, h, i = {
                "\u0008": "\\b",
                "\t": "\\t",
                "\n": "\\n",
                "\u000c": "\\f",
                "\r": "\\r",
                '"': '\\"',
                "\\": "\\\\"
            },
            g;
        if ("function" !== typeof U.stringify) U.stringify = function(a, b, d) {
            var e;
            h = f = "";
            if ("number" === typeof d)
                for (e = 0; e < d; e += 1) h += " ";
            else "string" === typeof d && (h = d);
            if ((g = b) && "function" !== typeof b && ("object" !== typeof b || "number" !== typeof b.length)) throw Error("JSON.stringify");
            return c("", {
                "": a
            })
        };
        if ("function" !== typeof U.parse) U.parse = function(a, b) {
            function c(a, d) {
                var e, f, h = a[d];
                if (h && "object" === typeof h)
                    for (e in h) Object.prototype.hasOwnProperty.call(h, e) && (f = c(h, e), void 0 !== f ? h[e] = f : delete h[e]);
                return b.call(a, d, h)
            }
            var e, a = "" + a;
            d.lastIndex = 0;
            d.test(a) && (a = a.replace(d, function(a) {
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            }));
            if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
                    "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return e = eval("(" + a + ")"), "function" === typeof b ? c({
                "": e
            }, "") : e;
            throw new SyntaxError("JSON.parse");
        }
    })();
    k.exportObject("nytg.map.trace", j);
    var rb = {
        getFlashChannel: function() {
            return this._flashChannel || null
        },
        flashEnabled: function() {
            return !!this._flashChannel
        },
        createFlashObject: function(a, b) {
            this._flashChannel.createFlashObject(this._flashName, a, b)
        },
        addFlashEventListener: function(a, b) {
            this._flashChannel.addEventListener(a, b, this)
        },
        callFlashMethod: function(a,
            b) {
            return this._flashChannel.callFlashMethod(this._flashName, a, b)
        }
    };
    k.inherit(S, y);
    S.prototype.enableFlashChannel = function(a, b) {
        k.copyAllParams(a, rb);
        a._flashName = b;
        a._flashChannel = this;
        this._newProxyIndex[b] = a;
        a.isReady() ? j("**** [FlashChannel.enableFlashChannel()] object already READY") : a.waitFor(this)
    };
    S.prototype.validateCallArgs = function(a, b) {
        var b = b | 0,
            c = typeof a;
        if ("object" != c && "function" != c || m.isArray(a)) return a;
        var c = {},
            d;
        for (d in a) {
            var e = a[d],
                f = typeof e;
            if ("function" != f && a.hasOwnProperty(d)) {
                if ("object" ==
                    f) {
                    if (m.isArray(e) && 0 < e.length && "object" == typeof e[0]) continue;
                    if (1 < b) continue;
                    e = this.validateCallArgs(e, b + 1)
                }
                c[d] = e
            }
        }
        return c
    };
    S.prototype.callFlashMethod = function(a, b, c) {
        if (this.isReady()) try {
            c = this.validateCallArgs(c);
            qb.start();
            var d = null == c ? void 0 : U.stringify(c),
                e = this.swf.callJsonMethod(a, b, d);
            return U.parse(e)
        } catch (f) {
            j("[FlashChannel.callFlashMethod()] Exception: " + f), j("[] ... oname:", a, "fname:", b, "opts:", c)
        } else j("[FlashChannel.callFlashMethod()] Called before swf is READY; object:", a,
            "fname:", b), this.callWhenReady(this.callFlashMethod, arguments, this, this.QUEUE_PRIORITY)
    };
    S.prototype.createFlashObject = function(a, b, c) {
        if (this.isReady()) {
            try {
                c = this.validateCallArgs(c)
            } catch (d) {
                j("[FlashChannel.createFlashObject()] Error validating arguments:", d);
                return
            }
            try {
                this.swf.createObject(a, b, c) || j("[FlashChannel.createFlashObject()] Failed to create: " + a)
            } catch (e) {
                j("[FlashChannel.createFlashObject()] Exception:", "" + e, "oname:", a, "type:", b, "opts:", c)
            }
        } else j("[FlashChannel.createFlashObject()] Called before swf is READY; name: " +
            a + " type: " + b), this.callWhenReady(this.createFlashObject, arguments, this, this.QUEUE_PRIORITY)
    };
    S.prototype.handleFlashEventJson = function(a, b, c) {
        try {
            var d;
            null != c && (d = U.parse(c));
            this.handleFlashEvent(a, b, d)
        } catch (e) {
            j("[FlashChannel.handleFlashEventJson()] Error parsing json:", c)
        }
    };
    S.prototype.handleFlashEvent = function(a, b, c) {
        var d = this._newProxyIndex[a];
        "ready" == b && "swf" == a ? this.startWaiting() : this.dispatchEvent(b, c, d)
    };
    S.prototype.handleReadyState = function() {
        j("%%%% FlashChannel.handleReadyState()");
        (this.swf = document.getElementById(this.swfId)) || j("[FlashChannel.handleReadyState()] Missing swf; swfId:", this.swfId)
    };
    var Sa = "10.0.0";
    l.useFlashExtensions = function() {
        pa.hasFlashPlayerVersion(Sa) ? (j("[map-core-flash.js] useFlashExtensions()"), bb()) : ab();
        aa.prototype.importFromDataTable = function(a, b, c) {
            this.table = a;
            this.latField = b;
            this.lngField = c;
            this.waitFor(a);
            this.startWaiting()
        };
        ba.prototype.init = function() {
            this.waitFor(this._opts.symbols);
            this.initFlashMapLayer("labelLayer");
            this.initFlashSymbolLayer()
        };
        ba.prototype.handleReadyState = function() {};
        ba.prototype.refresh = function() {};
        G.prototype.importFromDataTable = function(a, b, c, d) {
            this.projection = d;
            a.addEventListener("ready", function() {
                this.latitude = a.getFieldData(b);
                this.longitude = a.getFieldData(c);
                this.startWaiting()
            }, this)
        };
        return this
    };
    k.inherit(ca, D);
    ca.prototype.handleClick = function(a) {
        this.handleMove(a);
        var b = this._activeLyr;
        b && b.handleClick(a)
    };
    ca.prototype.getActiveLayer = function() {
        return this._activeLyr
    };
    ca.prototype.handleMove = function(a) {
        for (var b =
                this._layers, c = -1, d = 0, e = b.length; d < e; d++) {
            var f = b[d];
            if (f.isInteractive() && (f.getHitId(), this.dispatchEvent("mousemove", a.data, f), c = f.getHitId(), -1 != c)) break
        }
        if (-1 == c) this._activeLyr = null
    };
    ca.prototype.manageLayer = function(a, b) {
        var c = this._layers; - 1 != m.findInArray(a, c) ? j("[HitManager.addLayer()] Layer is already being monitored.", a) : (a._hitPriority = b || c.length, c.push(a), m.sortOn(c, "_hitPriority", !1), this.addEventListener("mousemove", a.handleMouseMove, a), this.mouse.addEventListener("mouseout", a.handleMouseMove,
            a), a.addEventListener("rollover", this.handleRollOver, this, 9999))
    };
    ca.prototype.handleRollOver = function(a) {
        var a = a.target,
            b = this._activeLyr;
        if (b && b != a) {
            var c = b.getHitId(); - 1 != c && b.triggerRollOut({
                id: c
            })
        }
        this._activeLyr = a
    };
    var Ta = new function() {
        this.testPointInPolygon = function(a, b, c) {
            if (isNaN(a) || isNaN(b)) return !1;
            for (var c = c.parts, d = 0, e = 0; e < c.length; e++) {
                var f = a,
                    h = b,
                    i = c[e];
                i.hasNext();
                for (var g = i.nextX, j = i.nextY, l = 0; i.hasNext();) {
                    var k = i.nextX,
                        m = i.nextY;
                    f < g && f < k || f > g && f > k || h > j && h > m || (h < j && h < m || g ==
                        k ? l++ : j + (f - g) * (m - j) / (k - g) > h && l++);
                    g = k;
                    j = m
                }
                1 == l % 2 && d++
            }
            return 1 == d % 2
        };
        this.getDistanceFromPointToShape = function(a, b, c) {
            if (isNaN(a) || isNaN(b)) return Infinity;
            for (var c = c.parts, d = Infinity, e = 0; e < c.length; e++) {
                var f;
                f = a;
                var h = b,
                    i = c[e];
                i.hasNext();
                for (var g = i.nextX, j = i.nextY, l = Infinity, k = void 0, m = void 0, n = void 0, n = (f - g) * (f - g) + (h - j) * (h - j); i.hasNext();) {
                    var p = i.nextX,
                        q = i.nextY,
                        s = (f - p) * (f - p) + (h - q) * (h - q),
                        k = (g - p) * (g - p) + (j - q) * (j - q),
                        g = (p - g) * (j - h) - (g - f) * (q - j),
                        g = g * g / k;
                    n > s ? (m = n, n = s) : m = s;
                    k = m - g < k ? g : n;
                    k < l && (l = k);
                    g =
                        p;
                    j = q;
                    n = s
                }
                f = l;
                f < d && (d = f)
            }
            return Math.sqrt(d)
        }
    };
    xa.prototype.queueTile = function(a, b, c, d) {
        if (!this._queue) this._queue = [];
        var e = this._queue,
            f = this;
        e.push(function() {
            f.drawTile(a, b, c, d)
        });
        1 == e.length && setTimeout(function() {
            f.procQueue()
        }, 80)
    };
    xa.prototype.procQueue = function() {
        var a = this._queue;
        0 < a.length && (a.shift()(), this.procQueue())
    };
    xa.prototype.drawTile = function(a, b, c, d) {
        var e = a.length;
        if (0 != e) {
            var f = this._style;
            f.updateStyle(d);
            for (d = 0; d < e; d++) {
                var h = a[d];
                f.setId(h.id);
                h.sortKey = f.sortKey
            }
            m.sortOnKeyFunction(a,
                W.prototype.getSortKey);
            var g = new V(b.width, b.height);
            g.updateBounds(c);
            b = b.getContext("2d");
            if (f.compositing) b.globalCompositeOperation = f.compositing;
            for (var c = f.hasStroke(), j = f.hasFill(), k = null, d = 0; d < e; d++) {
                h = a[d];
                if (h.sortKey !== k) 0 < d && (j && b.fill(), c && b.stroke()), k = h.sortKey, f.setId(h.id), b.beginPath(), f.beginDrawing(b);
                h.drawPath(b, g)
            }
            j && b.fill();
            c && b.stroke();
            if (f.compositing) b.globalCompositeOperation = "source-over"
        }
    };
    K.prototype.getCellIdFromRowCol = function(a, b) {
        return a * this.COLS + b
    };
    K.prototype.getColFromCellId =
        function(a) {
            return a % this.COLS
        };
    K.prototype.getRowFromCellId = function(a) {
        return a / this.COLS | 0
    };
    K.prototype.update = function(a) {
        this.initCellBounds();
        for (var b = this._bins, c = 0, d = b.length; c < d; c++) {
            for (var e = 0, f = b[c], h = f.length - 1; 0 <= h; h--) {
                var g = f[h];
                if (g.size > e) e = g.size
            }
            e = 0.5 * (e + 2) * a;
            f = this._boxes[c];
            f.setBounds(f.left - e, f.top + e, f.right + e, f.bottom - e)
        }
    };
    K.prototype.getSymbolsInBoundingBox = function(a, b) {
        for (var c = this._boxes, d = this._bins, e = [], f = [], h = !!b, g = 0, j = c.length; g < j; g++) {
            var k = c[g];
            if (a.left < k.right &&
                a.right > k.left && a.top > k.bottom && a.bottom < k.top) {
                var l = d[g];
                if (!h && a.contains(k)) f = f.concat(l);
                else
                    for (var k = 0, m = l.length; k < m; k++) {
                        var n = l[k];
                        (!h || !1 == b[n.id]) && n.right >= a.left && n.left <= a.right && n.top >= a.bottom && n.bottom <= a.top && e.push(n)
                    }
            }
        }
        return e.concat(f)
    };
    K.prototype.initCellBounds = function() {
        for (var a = this._bounds, b = a.width() / this.COLS, c = a.height() / this.ROWS, d = a.left, a = a.bottom, e = this._boxes, f = 0, h = this.ROWS * this.COLS; f < h; f++) {
            var g = this.getColFromCellId(f),
                j = this.getRowFromCellId(f),
                g = d + b * g,
                j = a + c * j;
            e[f].setBounds(g, j + c, g + b, j)
        }
    };
    K.prototype.getSymbolCol = function(a) {
        return (a.x - this._bx) / this._cellWidth | 0
    };
    K.prototype.getSymbolRow = function(a) {
        return (a.y - this._by) / this._cellHeight | 0
    };
    K.prototype.init = function(a, b) {
        b = b.cloneBounds();
        b.scale(1.0001);
        var c = b.width() / this.COLS,
            d = b.height() / this.ROWS,
            e = b.left,
            f = b.bottom;
        this._bounds = b;
        this._cellWidth = c;
        this._cellHeight = d;
        this._bx = e;
        this._by = f;
        c = [];
        d = [];
        e = this.ROWS * this.COLS;
        for (f = 0; f < e; f++) c.push(new q), d.push([]);
        for (var f = 0, h = a.length; f < h; f++) {
            var g =
                a[f];
            if (g) {
                var k = this.getSymbolCol(g),
                    l = this.getSymbolRow(g),
                    m = this.getCellIdFromRowCol(l, k);
                0 > m || m >= e || isNaN(m) ? j("[SymbolIndex.init()] index id out-of-range; id:", m, "CELLS:", e, "c:", k, "r:", l, "sym.x:", g.x, "sym.y:", g.y, "symid:", g.id) : d[m].push(g)
            } else j("[SymbolIndex.init()] Null symbol; id:", f)
        }
        this._boxes = c;
        this._bins = d
    };
    k.inherit(la, K);
    la.prototype.getSymbolCol = function(a) {
        return (0.5 * (a.left + a.right) - this._bx) / this._cellWidth | 0
    };
    la.prototype.getSymbolRow = function(a) {
        return (0.5 * (a.top + a.bottom) -
            this._by) / this._cellHeight | 0
    };
    la.prototype.init = function(a, b) {
        K.prototype.init.call(this, a, b);
        for (var c = this._bins, d = 0, e = c.length; d < e; d++) {
            for (var f = new q, g = c[d], i = g.length - 1; 0 <= i; i--) f.mergeBounds(g[i]);
            this._boxes[d] = f
        }
    };
    ga.prototype.init = function() {};
    ga.prototype.drawTile = function(a, b, c, d) {
        var e = this._style;
        e.updateStyle(d);
        d = new V(b.width, b.height);
        d.updateBounds(c);
        for (var b = b.getContext("2d"), c = a.length, f = e.hasStroke(), g = e.hasFill(), i = 0; i < c; i++) {
            var j = a[i];
            e.setId(j.id);
            this.drawCircle(b, d,
                j, e, f, g)
        }
    };
    ga.prototype.drawVectorCircle = function(a, b, c, d, e, f) {
        a.beginPath();
        d.beginDrawing(a);
        c.draw(a, b);
        f && a.fill();
        e && a.stroke()
    };
    ga.prototype.drawCircle = ga.prototype.drawVectorCircle;
    var ya = new function() {
        k.copyAllParams(this, D.prototype);
        var a, b = 0,
            c = 0.8 * this.msPerFrame;
        setInterval(function() {
            e.frameCount++;
            var f = (new Date).getTime();
            a && f >= b && (a(), a = null);
            f - d < c || (d = f, e.dispatchEvent("tickTock", {
                time: f
            }))
        }, this.msPerFrame);
        var d = 0;
        this.framesPerSecond = 40;
        this.msPerFrame = Math.round(1E3 / this.framesPerSecond);
        this.frameCount = 0;
        var e = this;
        this.postpone = function(c, d) {
            !a && !isNaN(d) && (a = c, b = (new Date).getTime() + d)
        }
    };
    k.inherit(Va, D);
    Ia.prototype = {
        handleMapResize: function() {
            var a = this._currZoom,
                b = this._map.getCRS().convZoomToScale(a),
                a = 0.5 * this._map.getWidthInPixels() * b,
                b = 0.5 * this._map.getHeightInPixels() * b,
                c = this._currBounds.centerX(),
                d = this._currBounds.centerY();
            this._currBounds.setBounds(c - a, d + b, c + a, d - b);
            this.dispatchEvent("navigate")
        },
        handleMoveStart: function() {
            this.__startNavigation()
        },
        handleDoubleTap: function(a) {
            a.deltaScale =
                this.ZOOM_IN_FACTOR;
            this.USE_ZOOM_TWEEN ? this._boxTween.start(this._currBounds, this.getDestinationBounds(a), this.ZOOM_IN_TIME) : this.handleMove(a)
        },
        handleDoubleClick: function(a) {
            a.deltaScale = this.ZOOM_IN_FACTOR;
            this.navigateToBounds(this.getDestinationBounds(a), {
                tween: this.USE_ZOOM_TWEEN
            })
        },
        handleMouseWheel: function(a) {
            var b = 1 + 0.055 * a.multiplier;
            a.deltaScale = 0 < a.direction ? b : 1 / b;
            this.navigateToBounds(this.getDestinationBounds(a))
        },
        handleMove: function(a) {
            if (!(this._blockedTouchId && this._blockedTouchId ===
                    a.touchId)) {
                var b = this.navigateToBounds(this.getDestinationBounds(a));
                if (a.touchEvent)
                    if (b) a.touchEvent.preventDefault();
                    else if (1 != a.zoomRatio) this._blockedTouchId = a.touchId, j(">>> blocking touch id:", a.touchId)
            }
        },
        zoomToFullExtent: function(a) {
            this.zoomToBounds(this._map.getInitialBounds(), a)
        },
        zoomToBounds: function(a, b) {
            var b = b || {},
                c = null;
            if (b.spacing) c = b.spacing, c = new Ba(c, c, c, c);
            a = this.getEnclosingBounds(a, c);
            this.navigateToBounds(a, b)
        },
        getEnclosingBounds: function(a, b) {
            this._map.getVisibleBounds();
            var c = this._map.getHeightInPixels(),
                d = this._map.getWidthInPixels(),
                e = d;
            b && (c -= b.top + b.bottom, e -= b.left + b.right);
            d = a.cloneBounds();
            c = a.height() / c;
            e = a.width() / e;
            c > e ? d.scale(c / e, 1) : d.scale(1, e / c);
            return d
        },
        getDestinationBounds: function(a) {
            var b = this._currBounds,
                c = this._map.getWidthInPixels();
            this._map.getHeightInPixels();
            var d = b.cloneBounds(),
                b = b.width() / c,
                e = a.deltaScale || 1;
            if (1 != e) {
                var f = this._map._opts.maxZoom,
                    g = this._map._opts.minZoom,
                    i = this._map.getCRS(),
                    j = b / e;
                f && (f = i.convZoomToScale(f), f > j && (e *=
                    j / f));
                g && (g = i.convZoomToScale(g), j > g && (e *= g / j))
            }
            d.scale(1 / e);
            j = d.width() / c;
            g = c = 0;
            1 != e && (e = a.pageY - a.centerY, c = -(a.pageX - a.centerX) * (j - b), g = e * (j - b));
            d.translate(-j * a.deltaX + c, j * a.deltaY + g);
            return d
        },
        navigateToBounds: function(a, b) {
            this.LIMIT_PANNING && this.__adjustBounds(a, this._map.getInitialBounds());
            if (this._currBounds && a.hasSameBounds(this._currBounds)) return !1;
            if (b && "undefined" != typeof b.tween ? b.tween : this.USE_ZOOM_TWEEN) {
                var c = b && b.time || this.ZOOM_IN_TIME;
                this._boxTween.setDelay(b.delay || 0);
                this._boxTween.start(this._currBounds,
                    a, c)
            } else this.setBounds(a);
            return !0
        },
        setBounds: function(a) {
            var b = this._currBounds;
            if (!b || !a.hasSameBounds(b)) this._currBounds = a, this._currZoom = this._map.getZoom(), this.dispatchEvent("navigate")
        },
        handleMoveEnd: function(a) {
            j("[Nav.handleMoveEnd()] data:", a.data)
        },
        getBounds: function() {
            return this._currBounds.cloneBounds()
        },
        __startNavigation: function() {
            this._startingBounds = this.getBounds()
        },
        __adjustBounds: function(a, b) {
            if (a.width() > b.width()) a.setBounds(b.left, b.top, b.right, b.bottom);
            else {
                var c = 0,
                    d =
                    0;
                a.left < b.left ? c = b.left - a.left : a.right > b.right && (c = b.right - a.right);
                a.top > b.top ? d = b.top - a.top : a.bottom < b.bottom && (d = b.bottom - a.bottom);
                a.translate(c, d)
            }
        }
    };
    k.extendPrototype(Ia, D);
    k.inherit(T, n);
    T.prototype.addLayer = function(a) {
        this._layers.push(a);
        this.isReady() && this.__initLayer(a)
    };
    T.prototype.refresh = function() {
        if (this.isReady()) {
            if (!this.isHidden()) {
                this.clear();
                for (var a = this._layers, b = 0, c = a.length; b < c; b++) a[b].refresh()
            }
        } else j("[SymbolLayerGroup.refresh()] Called before READY")
    };
    T.prototype.__hide =
        function() {
            this._hidden = !0
        };
    T.prototype.__show = function() {
        this._hidden = !1
    };
    T.prototype.__initLayer = function(a) {
        a.clear = function() {};
        a.show = this.__show;
        a.hide = this.__hide;
        a._canvas = this._canvas
    };
    T.prototype.init = function() {
        this.initNoTilesSymbolLayer()
    };
    T.prototype.handleReadyState = function() {
        this.clear();
        for (var a = 0, b = this._layers.length; a < b; a++) this.__initLayer(this._layers[a])
    };
    l.useHTML5Extensions = function() {
        eb();
        O.devicePixelRatio = 2 == window.devicePixelRatio ? 2 : 1;
        O.canvasPixelRatio = 1;
        l.prototype.init =
            function() {
                this.initMap();
                this.initNoTilesMap();
                this.initCanvasMap()
            };
        l.prototype.__updateMask = function() {
            var a = "height:" + this.getHeightInPixels() + "px;width:" + this.getWidthInPixels() + "px;";
            g.addCSS(this.layerContainer, a)
        };
        l.prototype.initNoTilesMap = function() {
            this._renderLayers = [];
            var a;
            a = g.createElement("div", "position:relative; overflow:hidden;-webkit-tap-highlight-color: rgba(0,0,0,0)");
            this.getContainer().appendChild(a);
            this.layerContainer = a;
            this.__updateMask()
        };
        l.prototype.__resize = l.prototype.resize;
        l.prototype.resize = function(a, b) {
            this.__resize(a, b);
            this.__updateMask()
        };
        l.prototype.zoom = function(a) {
            var b = this.navigation;
            b && (a.bounds ? b.zoomToBounds(a.bounds, a) : a.zoom && 1 >= a.zoom && b.zoomToFullExtent(a))
        };
        l.prototype.refreshLayers = function() {
            for (var a = this._renderLayers, b = 0; b < a.length; b++) {
                var c = a[b];
                !c.isHidden() && c.refresh()
            }
        };
        l.prototype.__addLayer = l.prototype.addLayer;
        l.prototype.addLayer = function(a) {
            this.__addLayer.call(this, a);
            if (!1 !== this._opts.combineLayers && ("shape" == a.type || "bubble" ==
                    a.type)) {
                var b = this._layerGroup;
                if (!b) b = this._layerGroup = new T, b.setMap(this), this.__addRenderLayer(b);
                b.addLayer(a)
            } else this.__addRenderLayer(a)
        };
        l.prototype.__addRenderLayer = function(a) {
            this._renderLayers.push(a);
            var b = a.getElement();
            if ("hover" == a.type) b.style.zIndex = 1;
            else if ("label" == a.type) b.style.zIndex = 2;
            this.getLayerContainer().appendChild(b)
        };
        l.prototype.getLayerContainer = function() {
            return this.layerContainer
        };
        l.prototype.getCenterAsLatLng = function() {
            if (!this.navigation) return this.getInitialCenterAsLatLng();
            var a = this.navigation.getBounds().getCenterPoint();
            return this.projection.unprojectXY(a.x, a.y)
        };
        l.prototype.handleNavigation = function() {
            this.refreshLayers();
            this.dispatchEvent("navigate")
        };
        l.prototype.getZoom = function() {
            var a = this.getCRS(),
                b = a.baseZoom;
            if (!this.navigation) return b;
            b = this.navigation.getBounds().width() / this.getWidthInPixels();
            return a.convScaleToZoom(b, !1)
        };
        n.prototype.initNoTilesSymbolLayer = function() {
            var a = g.createElement("canvas", "position:absolute;");
            a.width = a.height = 0;
            if (1 != O.canvasPixelRatio) {
                var b =
                    1 / O.canvasPixelRatio;
                a.style.webkitTransform = "scale3D(" + b + ", " + b + ", 1) translate3D(-50%, -50%, 0px)"
            }
            this._canvas = a
        };
        n.prototype.getElement = function() {
            this._canvas || j("[SymbolLayer notiles].getElement() missing canvas element; this:", this);
            return this._canvas
        };
        n.prototype.hide = function() {
            var a = this.getElement();
            a && (a.style.display = "none");
            this._hidden = !0
        };
        n.prototype.show = function() {
            var a = this.getElement();
            a && (a.style.display = "block");
            this._hidden = !1
        };
        n.prototype.__updateCanvasSize = function() {
            var a =
                this._map.getWidthInPixels(),
                b = this._map.getHeightInPixels(),
                c = this._canvas,
                a = a * O.canvasPixelRatio,
                b = b * O.canvasPixelRatio;
            return a != this._canvasWidth || b != this._canvasHeight ? (c.width = this._canvasWidth = a, c.height = this._canvasHeight = b, !0) : !1
        };
        n.prototype.clear = function() {
            if (!this.__updateCanvasSize()) {
                var a = this._canvas;
                a.getContext("2d").clearRect(0, 0, a.width, a.height)
            }
        };
        z.prototype.init = function() {
            this.initNoTilesSymbolLayer();
            this.initCanvasShapeLayer()
        };
        z.prototype.handleReadyState = function() {};
        z.prototype.refresh = function() {
            var a = this._shapes;
            if (!a || !a._ready) j("[ShapeLayer.refresh()] Missing shapes or shapes not READY");
            else if (!this.isHidden()) {
                this.clear();
                var b = this._map,
                    c = b.getVisibleBounds(),
                    d = a.getShapesInBoundingBox(c, this.getHiddenSymbolList()),
                    b = new V(b.getWidthInPixels(), b.getHeightInPixels());
                b.updateBounds(c);
                b = b.metersPerPixel;
                a.updateContentSize(a.getBounds().width() / b, a.getBounds().height() / b);
                a = this.getStyle();
                this._renderer.drawTile(d, this._canvas, c, a)
            }
        };
        H.prototype.init =
            function() {
                this.initNoTilesSymbolLayer();
                this.initCanvasCircleLayer()
            };
        H.prototype.handleReadyState = function() {};
        H.prototype.refresh = function() {
            var a = this._map,
                b = this._symbols;
            if (!b || !b._ready) j("[CircleLayer.drawTile()] Missing symbol data or data not READY");
            else if (!this.isHidden()) {
                this.clear();
                var c = this.getStyle();
                this.updateCircleSizes(c);
                var d = this.getHiddenSymbolList(),
                    a = a.getVisibleBounds();
                this._renderer.drawTile(b.getCirclesInBoundingBox(a, d), this._canvas, a, c)
            }
        };
        k.extendPrototype(M, n);
        M.prototype.init = function() {
            this.initNoTilesSymbolLayer()
        };
        M.prototype.refresh = function() {
            var a = this._symbolId,
                b = this._baseLyr;
            if (-1 == a || !b || !b.isReady()) O.VERBOSE && j("[HoverLayer.drawTile()] missing something; symId:", a, "baseLyr:", b);
            else {
                var a = b.getSymbolById(a),
                    c = this._map.getVisibleBounds();
                if (!1 != c.intersects(a)) {
                    var d = b._renderer,
                        b = this.convertStyle(b.getStyle());
                    this.clear();
                    d.drawTile([a], this._canvas, c, b)
                }
            }
        }
    };
    k.inherit(ha, L);
    ha.prototype.projectLatLngFast = function(a, b) {
        var a = a * this._DEG2RAD,
            b = b * this._DEG2RAD,
            c, d;
        if (this.useEllipsoid) {
            var e = this.calcAlbersQell(this._E, a);
            c = this._A * Math.sqrt(this._ellC - this._ellN * e) / this._ellN;
            d = this._ellN * (b - this._lng0);
            this._xy.x = c * Math.sin(d);
            this._xy.y = this._ellRho0 - c * Math.cos(d)
        } else c = Math.sqrt(this._sphC - 2 * this._sphN * Math.sin(a)) / this._sphN, d = this._sphN * (b - this._lng0), e = c * Math.sin(d), c = this._sphRho0 - c * Math.cos(d), this._xy.x = e * this._R, this._xy.y = c * this._R;
        return this._xy
    };
    ha.prototype.unprojectXYFast = function(a, b) {
        var a = a - this._x0,
            b = b - this._y0,
            c,
            d;
        if (this.useEllipsoid) {
            d = Math.atan(a / (this._ellRho0 - b));
            d = this._lng0 + d / this._ellN;
            var e = this._E * this._E,
                f = e * e,
                g = f * e;
            c = Math.sqrt(a * a + (this._ellRho0 - b) * (this._ellRho0 - b));
            c = Math.asin((this._ellC - c * c * this._ellN * this._ellN / (this._A * this._A)) / this._ellN / this._ellAuthConst);
            c = c + Math.sin(2 * c) * (e / 3 + 31 * f / 180 + 517 * g / 5040) + Math.sin(4 * c) * (23 * f / 360 + 251 * g / 3780) + 761 * Math.sin(6 * c) * g / 45360
        } else a /= this._R, b /= this._R, c = Math.sqrt(a * a + (this._sphRho0 - b) * (this._sphRho0 - b)), d = Math.atan(a / (this._sphRho0 - b)), c = Math.asin(0.5 *
            (this._sphC - c * c * this._sphN * this._sphN) / this._sphN), d = d / this._sphN + this._lng0;
        e = this._ll;
        e.lat = c * this._RAD2DEG;
        e.lng = d * this._RAD2DEG;
        return e
    };
    ha.prototype.calcAlbersQell = function(a, b) {
        var c = Math.sin(b);
        return (1 - a * a) * (c / (1 - a * a * c * c) - 0.5 / a * Math.log((1 - a * c) / (1 + a * c)))
    };
    ha.prototype.calcAlbersMell = function(a, b) {
        var c = Math.sin(b);
        return Math.cos(b) / Math.sqrt(1 - a * a * c * c)
    };
    k.inherit(ia, L);
    ia.prototype.projectLatLngFast = function(a, b) {
        var a = a * this._DEG2RAD,
            b = b * this._DEG2RAD,
            c, d, e = this._xy;
        this.useEllipsoid ? (c =
            this.calcLambertT(a, this._E), c = this._A * this._lambertEllF * Math.pow(c, this._lambertEllN), d = this._lambertEllN * (b - this._lng0), e.x = c * Math.sin(d), e.y = this._lambertEllRho0 - c * Math.cos(d)) : (c = this._R * this._lambertSphF / Math.pow(Math.tan(Math.PI / 4 + a / 2), this._lambertSphN), d = this._lambertSphN * (b - this._lng0), e.x = c * Math.sin(d), e.y = this._lambertSphRho0 - c * Math.cos(d));
        return e
    };
    ia.prototype.unprojectXYFast = function(a, b) {
        var a = a - this._x0,
            b = b - this._y0,
            c = this._ll;
        if (this.useEllipsoid) return c = this.findApproxEllLatLong(a,
            b);
        var d = this._lambertSphRho0,
            e = Math.sqrt(a * a + (d - b) * (d - b));
        0 > this._lambertSphN && (e = -e);
        d = Math.atan(a / (d - b));
        e = 2 * Math.atan(Math.pow(this._R * this._lambertSphF / e, 1 / this._lambertSphN)) - 0.5 * Math.PI;
        d = d / this._lambertSphN + this._lng0;
        c.lat = e * this._RAD2DEG;
        c.lng = d * this._RAD2DEG;
        return c
    };
    ia.prototype.calcLambertT = function(a, b) {
        var c = Math.sin(a);
        return Math.tan(Math.PI / 4 - a / 2) / Math.pow((1 - b * c) / (1 + b * c), b / 2)
    };
    ia.prototype.calcLambertM = function(a, b) {
        var c = Math.sin(a);
        return Math.cos(a) / Math.sqrt(1 - b * b * c * c)
    };
    Q.prototype.identity =
        function() {
            this.a = 1;
            this.b = this.tx = this.c = 0;
            this.d = 1;
            this.ty = 0
        };
    Q.prototype.transformXY = function(a, b) {
        var c = this._p;
        c.x = a * this.a + b * this.c + this.tx;
        c.y = a * this.b + b * this.d + this.ty;
        return c
    };
    Q.prototype.clone = function() {
        var a = new Q;
        k.copyAllProperties(a, this)
    };
    Q.prototype.translate = function(a, b) {
        this.tx += a;
        this.ty += b
    };
    Q.prototype.rotate = function(a, b, c) {
        var b = b || 0,
            c = c || 0,
            d = Math.cos(a),
            a = Math.sin(a);
        this.a = d;
        this.c = -a;
        this.b = a;
        this.d = d;
        this.tx += b - b * d + c * a;
        this.ty += c - b * a - c * d
    };
    Q.prototype.scale = function(a,
        b) {
        this.a *= a;
        this.c *= a;
        this.b *= b;
        this.d *= b
    };
    Q.prototype.getDeterminant = function() {
        return this.a * this.d - this.c * this.b
    };
    Q.prototype.invert = function() {
        var a = this.getDeterminant();
        if (0 == a || isNaN(a)) j("[Matrix2D.invert()] matrix is not invertible.");
        else {
            var b = this.clone();
            this.a = b.d / a;
            this.b = -b.b / a;
            this.c = -b.c / a;
            this.d = b.a / a;
            this.tx = (b.c * b.ty - b.d * b.tx) / a;
            this.ty = (b.b * b.tx - b.a * b.ty) / a
        }
    };
    za.prototype.addFrame = function(a, b, c, d, e, f, g) {
        var a = a || null,
            i = this._proj,
            b = i.projectLatLng(b.lat, b.lng).clone(),
            c = i.projectLatLng(c.lat,
                c.lng).clone(),
            i = new q;
        i.setBounds(b.x - 0.5 * d, b.y + 0.5 * e, b.x + 0.5 * d, b.y - 0.5 * e);
        this._boxes.push(i);
        d = new Q;
        g && d.rotate(Math.PI * g / 180, b.x, b.y);
        f && d.scale(f, f);
        f = d.transformXY(b.x, b.y);
        d.translate(c.x - f.x, c.y - f.y);
        this._transforms.push(d);
        this._projections.push(a)
    };
    za.prototype.projectLatLngFast = function(a, b) {
        var c = this._proj.projectLatLngFast(a, b);
        return this.transformXY(c.x, c.y)
    };
    za.prototype.transformXY = function(a, b) {
        var c = this._boxes,
            d = c.length,
            e;
        for (e = 0; e < d; e++) {
            var f = c[e];
            if (a >= f.left && a <= f.right &&
                b <= f.top && b >= f.bottom) {
                c = this._transforms[e];
                if (e = this._projections[e]) d = this._proj.unprojectXYFast(a, b), e = e.projectLatLngFast(d.lat, d.lng), a = e.x, b = e.y;
                return e = c.transformXY(a, b)
            }
        }
        e = this._xy;
        e.x = a;
        e.y = b;
        return e
    };
    l.init({
        flashUrl: "http://graphics8.nytimes.com/packages/flash/newsgraphics/projects/election_2012/primary_maps/hybrid_map_01.swf",
        preferFlash: !1
    });
    var sb = new va("http://graphics8.nytimes.com/packages/js/newsgraphics/projects/election_2012/ratings_map/data-bundle.js"),
        tb = new va("http://graphics8.nytimes.com/packages/js/newsgraphics/projects/election_2012/ratings_map/shape-bundle-utf16.js",
            "utf-16be"),
        Xa = new function() {
            var a = new za(new hb);
            a.addFrame(new Wa, new P(63, -152), new P(27, -115), 6E6, 3E6, 0.31, 29.2);
            a.addFrame(new Wa, new P(20.9, -157), new P(28.2, -106.6), 2E6, 4E6, 0.9, 40);
            a.name = "AlbersUSASpecial";
            return a
        };
    (new y).waitFor(sb).waitFor(tb).startWaiting(function() {
        var a = g.getElement("eg2012-electoral-map");
        a.style.background = "none";
        var b = {
                width: 240,
                height: 149,
                center: Aa.ALBERS_US_CENTER,
                widthKm: Aa.ALBERS_US_WIDTH_KM,
                heightKm: Aa.ALBERS_US_HEIGHT_KM,
                crs: new J(Xa),
                limitPanning: !0,
                scrollWheelZoom: !1,
                doubleClickZoom: !1,
                dragging: !1,
                pinchZoom: !1
            },
            a = new l(a, b),
            b = new p(nytg.data.states_albers),
            c = {
                postal: s.STRING,
                ratings_2012: s.INTEGER,
                state_name: s.STRING,
                electoral_votes: s.STRING
            },
            c = (new p).populate(nytg.electoralMapRatings, c);
        c.insertMappedValues("postal", s.STRING, function(a) {
            a = a.get("postal");
            "ME_state" == a ? a = "ME" : "NE_state" == a && (a = "NE");
            return a
        });
        b.joinTableByKey("STATE", c, "postal");
        var c = (new Y(s.POLYGONS, s.INNERLINES)).importFromString(nytg.data.states_albers_mshp_utf16, {
                transform: Xa
            }),
            d = new z(c, {
                shapeType: s.POLYGONS
            });
        d.setInteraction(!0);
        stateShapeStyler = new F(b);
        stateShapeStyler.setDefaultStyle({
            fillColor: 14869218,
            fillAlpha: 1,
            hoverStrokeWeight: 1,
            hoverStrokeColor: 0,
            hoverStrokeAlpha: 1
        });
        stateShapeStyler.setAttributeStyler("fillColor", lb);
        stateShapeStyler.setAttributeStyler("hatchColor", ib);
        d.addEventListener("rollover", ob);
        d.addEventListener("rollout", pb);
        d.setStyler(stateShapeStyler);
        a.addLayer(d);
        b = new z(c, {
            shapeType: s.INNERLINES
        });
        b.setStyle({
            fillAlpha: 0,
            strokeWeight: 1,
            strokeColor: 16777215
        });
        a.addLayer(b);
        a.display()
    });
    var nb = [4216469, 10007250, 15521114, 15568267, 11808816],
        kb = [void 0, 11191776, 16377482, 16359324, void 0],
        mb = 14935011,
        jb = null,
        ja
})();

var nytg = nytg || {};
nytg.electoralMapRatings = [{"x":190,"y":165,"nyt_name":"Neb.","ratings_2008":-2,"state_name":"Nebraska Statewide","fips":"","ev":2,"mapy":154.0,"mapx":329.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":2,"postal":"NE_state","results_2004":-1,"results_2008":-1,"results_2000":-1},{"x":200,"y":175,"nyt_name":"Neb. 1","ratings_2008":-2,"state_name":"Nebraska District 1","fips":"","ev":1,"mapy":151.0,"mapx":348.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":1,"postal":"NE_1","results_2004":-1,"results_2008":-1,"results_2000":-1},{"x":204,"y":180,"nyt_name":"Neb. 2","ratings_2008":-2,"state_name":"Nebraska District 2","fips":"","ev":1,"mapy":167.0,"mapx":348.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":1,"postal":"NE_2","results_2004":-1,"results_2008":1,"results_2000":-1},{"x":208,"y":185,"nyt_name":"Neb. 3","ratings_2008":-2,"state_name":"Nebraska District 3","fips":"","ev":1,"mapy":173.0,"mapx":326.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":1,"postal":"NE_3","results_2004":-1,"results_2008":-1,"results_2000":-1},{"x":700,"y":0,"nyt_name":"Me.","ratings_2008":2,"state_name":"Maine Statewide","fips":"","ev":2,"mapy":15.0,"mapx":762.0,"results_1996":1,"ratings_2012":2,"electoral_votes":2,"postal":"ME_state","results_2004":1,"results_2008":1,"results_2000":1},{"x":700,"y":0,"nyt_name":"Me. 1","ratings_2008":2,"state_name":"Maine District 1","fips":"","ev":1,"mapy":2.0,"mapx":781.0,"results_1996":1,"ratings_2012":2,"electoral_votes":1,"postal":"ME_1","results_2004":1,"results_2008":1,"results_2000":1},{"x":700,"y":0,"nyt_name":"Me. 2","ratings_2008":2,"state_name":"Maine District 2","fips":"","ev":1,"mapy":18.0,"mapx":781.0,"results_1996":1,"ratings_2012":1,"electoral_votes":1,"postal":"ME_2","results_2004":1,"results_2008":1,"results_2000":1},{"region":"S","x":381,"y":313,"nyt_name":"Ala.","ratings_2008":-2,"state_name":"Alabama","fips":"01","ev":9,"mapy":294.0,"mapx":494.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":9,"postal":"AL","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":0,"y":446,"nyt_name":"Alaska","ratings_2008":-2,"state_name":"Alaska","fips":"02","ev":3,"mapy":383.0,"mapx":215.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":3,"postal":"AK","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":127,"y":214,"nyt_name":"Ariz.","ratings_2008":-2,"state_name":"Arizona","fips":"04","ev":11,"mapy":208.0,"mapx":271.0,"results_1996":1,"ratings_2012":-1,"electoral_votes":11,"postal":"AZ","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"S","x":330,"y":266,"nyt_name":"Ark.","ratings_2008":-2,"state_name":"Arkansas","fips":"05","ev":6,"mapy":248.0,"mapx":444.0,"results_1996":1,"ratings_2012":-2,"electoral_votes":6,"postal":"AR","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":0,"y":214,"nyt_name":"Calif.","ratings_2008":2,"state_name":"California","fips":"06","ev":55,"mapy":239.0,"mapx":189.0,"results_1996":1,"ratings_2012":2,"electoral_votes":55,"postal":"CA","results_2004":1,"results_2008":1,"results_2000":1},{"region":"W","x":186,"y":215,"nyt_name":"Colo.","ratings_2008":1,"state_name":"Colorado","fips":"08","ev":9,"mapy":206.0,"mapx":321.0,"results_1996":-1,"ratings_2012":0,"electoral_votes":9,"postal":"CO","results_2004":-1,"results_2008":1,"results_2000":-1},{"region":"NE","x":666,"y":134,"nyt_name":"Conn.","ratings_2008":2,"state_name":"Connecticut","fips":"09","ev":7,"mapy":132.0,"mapx":743.0,"results_1996":1,"ratings_2012":2,"electoral_votes":7,"postal":"CT","results_2004":1,"results_2008":1,"results_2000":1},{"region":"NE","x":629,"y":202,"nyt_name":"Del.","ratings_2008":2,"state_name":"Delaware","fips":"10","ev":3,"mapy":186.0,"mapx":703.0,"results_1996":1,"ratings_2012":2,"electoral_votes":3,"postal":"DE","results_2004":1,"results_2008":1,"results_2000":1},{"region":"NE","x":629,"y":234,"nyt_name":"D.C.","ratings_2008":2,"state_name":"District of Columbia","fips":"11","ev":3,"mapy":214.0,"mapx":703.0,"results_1996":1,"ratings_2012":2,"electoral_votes":3,"postal":"DC","results_2004":1,"results_2008":1,"results_2000":1},{"region":"S","x":434,"y":390,"nyt_name":"Fla.","ratings_2008":0,"state_name":"Florida","fips":"12","ev":29,"mapy":381.0,"mapx":559.0,"results_1996":1,"ratings_2012":0,"electoral_votes":29,"postal":"FL","results_2004":-1,"results_2008":1,"results_2000":-1},{"region":"S","x":434,"y":320,"nyt_name":"Ga.","ratings_2008":-1,"state_name":"Georgia","fips":"13","ev":16,"mapy":307.0,"mapx":548.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":16,"postal":"GA","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":82,"y":446,"nyt_name":"Hawaii","ratings_2008":2,"state_name":"Hawaii","fips":"15","ev":4,"mapy":383.0,"mapx":180.0,"results_1996":1,"ratings_2012":2,"electoral_votes":4,"postal":"HI","results_2004":1,"results_2008":1,"results_2000":1},{"region":"W","x":137,"y":134,"nyt_name":"Idaho","ratings_2008":-2,"state_name":"Idaho","fips":"16","ev":4,"mapy":126.0,"mapx":272.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":4,"postal":"ID","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"MW","x":296,"y":188,"nyt_name":"Ill.","ratings_2008":2,"state_name":"Illinois","fips":"17","ev":20,"mapy":194.0,"mapx":429.0,"results_1996":1,"ratings_2012":2,"electoral_votes":20,"postal":"IL","results_2004":1,"results_2008":1,"results_2000":1},{"region":"MW","x":376,"y":195,"nyt_name":"Ind.","ratings_2008":0,"state_name":"Indiana","fips":"18","ev":11,"mapy":191.0,"mapx":490.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":11,"postal":"IN","results_2004":-1,"results_2008":1,"results_2000":-1},{"region":"MW","x":246,"y":163,"nyt_name":"Iowa","ratings_2008":1,"state_name":"Iowa","fips":"19","ev":6,"mapy":160.0,"mapx":376.0,"results_1996":1,"ratings_2012":0,"electoral_votes":6,"postal":"IA","results_2004":-1,"results_2008":1,"results_2000":1},{"region":"MW","x":239,"y":266,"nyt_name":"Kan.","ratings_2008":-2,"state_name":"Kansas","fips":"20","ev":6,"mapy":248.0,"mapx":363.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":6,"postal":"KS","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"S","x":434,"y":269,"nyt_name":"Ky.","ratings_2008":-2,"state_name":"Kentucky","fips":"21","ev":8,"mapy":253.0,"mapx":539.0,"results_1996":1,"ratings_2012":-2,"electoral_votes":8,"postal":"KY","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"S","x":284,"y":314,"nyt_name":"La.","ratings_2008":-2,"state_name":"Louisiana","fips":"22","ev":8,"mapy":293.0,"mapx":406.0,"results_1996":1,"ratings_2012":-2,"electoral_votes":8,"postal":"LA","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"NE","x":573,"y":202,"nyt_name":"Md.","ratings_2008":2,"state_name":"Maryland","fips":"24","ev":10,"mapy":196.0,"mapx":664.0,"results_1996":1,"ratings_2012":2,"electoral_votes":10,"postal":"MD","results_2004":1,"results_2008":1,"results_2000":1},{"region":"NE","x":666,"y":75,"nyt_name":"Mass.","ratings_2008":2,"state_name":"Massachusetts","fips":"25","ev":11,"mapy":85.0,"mapx":748.0,"results_1996":1,"ratings_2012":2,"electoral_votes":11,"postal":"MA","results_2004":1,"results_2008":1,"results_2000":1},{"region":"MW","x":393,"y":125,"nyt_name":"Mich.","ratings_2008":2,"state_name":"Michigan","fips":"26","ev":16,"mapy":134.0,"mapx":511.0,"results_1996":1,"ratings_2012":1,"electoral_votes":16,"postal":"MI","results_2004":1,"results_2008":1,"results_2000":1},{"region":"MW","x":240,"y":105,"nyt_name":"Minn.","ratings_2008":1,"state_name":"Minnesota","fips":"27","ev":10,"mapy":111.0,"mapx":370.0,"results_1996":1,"ratings_2012":1,"electoral_votes":10,"postal":"MN","results_2004":1,"results_2008":1,"results_2000":1},{"region":"S","x":335,"y":316,"nyt_name":"Miss.","ratings_2008":-2,"state_name":"Mississippi","fips":"28","ev":6,"mapy":290.0,"mapx":449.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":6,"postal":"MS","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"MW","x":240,"y":209,"nyt_name":"Mo.","ratings_2008":0,"state_name":"Missouri","fips":"29","ev":10,"mapy":203.0,"mapx":370.0,"results_1996":1,"ratings_2012":-2,"electoral_votes":10,"postal":"MO","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":176,"y":105,"nyt_name":"Mont.","ratings_2008":-1,"state_name":"Montana","fips":"30","ev":3,"mapy":101.0,"mapx":302.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":3,"postal":"MT","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":107,"y":170,"nyt_name":"Nev.","ratings_2008":1,"state_name":"Nevada","fips":"32","ev":6,"mapy":163.0,"mapx":261.0,"results_1996":1,"ratings_2012":1,"electoral_votes":6,"postal":"NV","results_2004":-1,"results_2008":1,"results_2000":-1},{"region":"NE","x":699,"y":37,"nyt_name":"N.H.","ratings_2008":1,"state_name":"New Hampshire","fips":"33","ev":4,"mapy":43.0,"mapx":767.0,"results_1996":1,"ratings_2012":0,"electoral_votes":4,"postal":"NH","results_2004":1,"results_2008":1,"results_2000":-1},{"region":"NE","x":572,"y":137,"nyt_name":"N.J.","ratings_2008":2,"state_name":"New Jersey","fips":"34","ev":14,"mapy":143.0,"mapx":668.0,"results_1996":1,"ratings_2012":2,"electoral_votes":14,"postal":"NJ","results_2004":1,"results_2008":1,"results_2000":1},{"region":"W","x":198,"y":269,"nyt_name":"N.M.","ratings_2008":1,"state_name":"New Mexico","fips":"35","ev":5,"mapy":248.0,"mapx":325.0,"results_1996":1,"ratings_2012":1,"electoral_votes":5,"postal":"NM","results_2004":-1,"results_2008":1,"results_2000":1},{"region":"NE","x":572,"y":44,"nyt_name":"N.Y.","ratings_2008":2,"state_name":"New York","fips":"36","ev":29,"mapy":72.0,"mapx":681.0,"results_1996":1,"ratings_2012":2,"electoral_votes":29,"postal":"NY","results_2004":1,"results_2008":1,"results_2000":1},{"region":"S","x":525,"y":256,"nyt_name":"N.C.","ratings_2008":0,"state_name":"North Carolina","fips":"37","ev":15,"mapy":252.0,"mapx":627.0,"results_1996":-1,"ratings_2012":-1,"electoral_votes":15,"postal":"NC","results_2004":-1,"results_2008":1,"results_2000":-1},{"region":"MW","x":208,"y":105,"nyt_name":"N.D.","ratings_2008":-1,"state_name":"North Dakota","fips":"38","ev":3,"mapy":101.0,"mapx":331.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":3,"postal":"ND","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"MW","x":433,"y":195,"nyt_name":"Ohio","ratings_2008":0,"state_name":"Ohio","fips":"39","ev":18,"mapy":198.0,"mapx":549.0,"results_1996":1,"ratings_2012":0,"electoral_votes":18,"postal":"OH","results_2004":-1,"results_2008":1,"results_2000":-1},{"region":"S","x":283,"y":266,"nyt_name":"Okla.","ratings_2008":-2,"state_name":"Oklahoma","fips":"40","ev":7,"mapy":249.0,"mapx":403.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":7,"postal":"OK","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":60,"y":166,"nyt_name":"Ore.","ratings_2008":2,"state_name":"Oregon","fips":"41","ev":7,"mapy":161.0,"mapx":221.0,"results_1996":1,"ratings_2012":2,"electoral_votes":7,"postal":"OR","results_2004":1,"results_2008":1,"results_2000":1},{"region":"NE","x":494,"y":118,"nyt_name":"Pa.","ratings_2008":1,"state_name":"Pennsylvania","fips":"42","ev":20,"mapy":131.0,"mapx":604.0,"results_1996":1,"ratings_2012":1,"electoral_votes":20,"postal":"PA","results_2004":1,"results_2008":1,"results_2000":1},{"region":"NE","x":713,"y":134,"nyt_name":"R.I.","ratings_2008":2,"state_name":"Rhode Island","fips":"44","ev":4,"mapy":127.0,"mapx":780.0,"results_1996":1,"ratings_2012":2,"electoral_votes":4,"postal":"RI","results_2004":1,"results_2008":1,"results_2000":1},{"region":"S","x":504,"y":328,"nyt_name":"S.C.","ratings_2008":-2,"state_name":"South Carolina","fips":"45","ev":9,"mapy":306.0,"mapx":603.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":9,"postal":"SC","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"MW","x":208,"y":139,"nyt_name":"S.D.","ratings_2008":-2,"state_name":"South Dakota","fips":"46","ev":3,"mapy":129.0,"mapx":331.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":3,"postal":"SD","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"S","x":375,"y":255,"nyt_name":"Tenn.","ratings_2008":-2,"state_name":"Tennessee","fips":"47","ev":11,"mapy":243.0,"mapx":490.0,"results_1996":1,"ratings_2012":-2,"electoral_votes":11,"postal":"TN","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"S","x":176,"y":310,"nyt_name":"Tex.","ratings_2008":-2,"state_name":"Texas","fips":"48","ev":38,"mapy":314.0,"mapx":335.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":38,"postal":"TX","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"W","x":152,"y":170,"nyt_name":"Utah","ratings_2008":-2,"state_name":"Utah","fips":"49","ev":6,"mapy":163.0,"mapx":299.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":6,"postal":"UT","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"NE","x":666,"y":43,"nyt_name":"Vt.","ratings_2008":2,"state_name":"Vermont","fips":"50","ev":3,"mapy":45.0,"mapx":737.0,"results_1996":1,"ratings_2012":2,"electoral_votes":3,"postal":"VT","results_2004":1,"results_2008":1,"results_2000":1},{"region":"S","x":508,"y":196,"nyt_name":"Va.","ratings_2008":1,"state_name":"Virginia","fips":"51","ev":13,"mapy":194.0,"mapx":611.0,"results_1996":-1,"ratings_2012":0,"electoral_votes":13,"postal":"VA","results_2004":-1,"results_2008":1,"results_2000":-1},{"region":"W","x":75,"y":105,"nyt_name":"Wash.","ratings_2008":1,"state_name":"Washington","fips":"53","ev":12,"mapy":113.0,"mapx":227.0,"results_1996":1,"ratings_2012":2,"electoral_votes":12,"postal":"WA","results_2004":1,"results_2008":1,"results_2000":1},{"region":"NE","x":484,"y":269,"nyt_name":"W.Va.","ratings_2008":-1,"state_name":"West Virginia","fips":"54","ev":5,"mapy":249.0,"mapx":579.0,"results_1996":1,"ratings_2012":-2,"electoral_votes":5,"postal":"WV","results_2004":-1,"results_2008":-1,"results_2000":-1},{"region":"MW","x":296,"y":132,"nyt_name":"Wis.","ratings_2008":1,"state_name":"Wisconsin","fips":"55","ev":10,"mapy":134.0,"mapx":419.0,"results_1996":1,"ratings_2012":0,"electoral_votes":10,"postal":"WI","results_2004":1,"results_2008":1,"results_2000":1},{"region":"W","x":175,"y":137,"nyt_name":"Wyo.","ratings_2008":-2,"state_name":"Wyoming","fips":"56","ev":3,"mapy":129.0,"mapx":302.0,"results_1996":-1,"ratings_2012":-2,"electoral_votes":3,"postal":"WY","results_2004":-1,"results_2008":-1,"results_2000":-1}];