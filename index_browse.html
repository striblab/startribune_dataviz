<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="StribLab: Data-driven storytelling, maps, charts and more | Startribune.com">
  <meta name="author" content="Frey Hargarten - StarTribune">
  <meta name="generator" content="BBEdit 10.5" />

  <meta property="og:title" content="StribLab"/>
  <meta property="og:image" content="http://striblab.github.io/startribune_dataviz/img/dataviz_banner.png"/>
  <meta property="og:site_name" content="StribLab"/>
  <meta property="og:description" content="Data-driven storytelling, maps, charts and more | Startribune.com" />

  <title>StribLab: Data-driven storytelling, maps, charts and more | Startribune.com</title>
   <style>
/*PRIMARY*/
      ::selection { background: #ddd; }
      body { font-family:Helvetica; overflow-x:hidden; }
      #leftPane { float:right !important; width:630px !important; }      
      #testDiv { height:400px; background-color:#ddd; width:85%; float:right; }
      h1 { font-family:"Benton Sans",Helvetica,Arial,sans-serif; font-weight:900; font-size:2.5em; margin-bottom:10px; }
      h3 { margin-top:15px; padding-bottom:5px; border-bottom:solid 1px #ddd; }
      .l-container { text-align:left !important; width:970px; margin-left:auto; margin-right:auto; }
      .l-container:nth-child(2) { width:100%; }
      .l-container { text-align:left !important; width:970px; margin-left:auto; margin-right:auto; }
      .breaker { clear:both; margin:7px; padding:0; }
      .tools { display:none; }
      a { color: #87C944; text-decoration: none; }
      a:hover { color:#333 !important; color:inherit !important; }
      .link a:hover { text-decoration:none !important; color: #87C944 !important; }
      .masthead  a { color:#000 !important; }
      .masthead { font-weight:900; font-family:Helvetica; /*letter-spacing:20px;*/ text-align:left !important; font-size:1.5em; }
      p { font-family:Helvetica; }
      #wrapper { width:800px;; margin-right:auto; margin-left:auto; }
      h1 { font-family:"Avant Garde",Avantgarde,"Century Gothic",CenturyGothic,AppleGothic,sans-serif; text-align:left; letter-spacing:20px; }
      #sidebar { width:170px; text-align:center; float:left; }
      #content { width:596px; text-align:left; float:right; }
      button:focus { outline:0 !important; }
      :focus { outline:0; }
      a h3 { color:#000 !important; font-family:"Avant Garde",Avantgarde,"Century Gothic",CenturyGothic,AppleGothic,sans-serif; text-align:left; }
      h4 { color:#333; text-align:center; margin:0; padding:10px 0 0; }

/*HEADER*/
      .starlogo { float:left; margin:15px; }
      #logo_container { width:208px; }
      .datalab-logo { float:left; margin:10px; width:100%;}
      #top { padding:3px; margin-bottom:10px; }
      #viewSwitch { display:none; }
      .dash { display:none; }
      .main { text-align:center; }
      .resume_icon { text-align:center; padding:25px; }
      .resume_icon img { width:90px; }
      .section h1 { text-align:center; }
      .icon { width:100%; display:block; }
      .breaker { clear:both; margin:10px; }
      .icon img { margin:10px; width:64px; }
      .icon:hover { cursor:pointer; opacity:.8; }
      .selected { background-color:#ddd !important; margin:0 !important; }
      .linkage { text-align:left; }
      #overall { text-align:left !important; }
      div#at4-share { display:none !important; }
      .tagline { text-align:left !important; }
      .at-icon { background-color:#87C944 !important; }
      #topmenu { text-align:center; }
      .topbutton { display:inline-block; font-size:1em; font-weight:900; padding:15px; text-align:center; background-color:#fff; border:1px solid black; width:24.5%; border-radius:0; }
      .topbutton:hover { opacity:.8; cursor:pointer; }
      .this { background-color:#ddd; border:1px solid #ddd; }
      #socialmenu { text-align:center; }
      #socialmenu div { width:24.55%; display:inline-block; text-align:center; }
      #socialmenu img { width:33%; }
      #socialmenu img:hover { opacity:.8; }

/*ENTRIES*/
      #articlePane { display:inline-block !important;  }
      .articleName{ color: #333; font-family: "Benton Sans",Helvetica,Arial,sans-serif; font-size: 23px; line-height: 120%; margin: 10px 0 15px 0; }
      .byline { font-family: "Benton Sans",Helvetica,Arial,sans-serif; font-size: .7em; color:#333; }
      .articleEntry { margin:20px; }
      .articlePhoto img { border: 1px solid #000; padding:1px; width:100%; max-width:100%;  }
      .byline { font-weight:bold; float:left; } 
      .more { font-size:18px; display:block; text-align:center; }
      .date { float:right; font-family: "Benton Sans",Helvetica,Arial,sans-serif; font-size: .7em; color:#333; }

/*SOCIAL*/
    .social_icons img { width:100px !important; margin:9px !important; }
    .social_icons img:hover { opacity:0.8; }
    .social_icons { text-align:center !important; }
    ul.share-buttons { list-style:none; padding:0 !important; }
    ul.share-buttons li { display:inline !important; }
    ul.share-buttons li:hover { opacity:0.8; cursor:pointer; }
    #sharing { text-align:center; margin-left:auto; margin-right:auto; padding:20px; }
    .follow { padding:15px; }

/*SIDEBAR*/
      #dataSidebar { float:left !important; display:inline-block !important; width:30% !important; border: 1px solid #ddd; }
      .sectionBox { margin:7px; }
      .creditBox { width:32%; height:auto; float:left; }
      #articleHeader { margin-top:40px; }
      .articleName a { color: #333; text-decoration: none; }
      .article-share { position:relative !important; float:left !important; margin-left:0 !important; }
      #team { font-weight:bold; clear:both; }
      .links { text-align:center; }
      .link { width:100%; font-size:1.3em; border-top: 1px solid #ddd; padding:10px; font-weight:bold; vertical-align:middle; }
      li.sort-link { text-align:left !important; }
      #github { padding:15px; font-size:14px; }
      .gitlogo, .bloglogo { width:40px; display:inline-block; margin:3px; vertical-align:middle; }   
      .git { font-size: 11px; background-color:transparent; -moz-border-radius:16px; -webkit-border-radius:16px; text-align:right; border-radius:0; border:0; display:inline-block; cursor:pointer; font-family:"Benton Sans",Helvetica,Arial,sans-serif; padding:8px; text-decoration:none; font-weight:bold; width:100%; margin-bottom:7px; }
      .git:hover { cursor:pointer; background-color:#fff !important; }
      .striblogo { width:100% !important; }
      #allProjects .count { font-weight:900; }
      .count { float:right; }
      #links_m { display:none; }
      #contribs { display:none; }
      #contributorsBlock { display:none; }
      .linkSelect { background-color:#ddd !important; }

/*DROPDOWN*/
/*      *, *:after, *:before { box-sizing:border-box; margin:0; moz-box-sizing:border-box; padding:0; webkit-box-sizing:border-box; }
      ::-moz-selection { background:transparent; }*/
      .wrapper-demo { font-weight:400; zoom:1; z-index:999; display:inline-block; width:100%; }
      .wrapper-demo:after { clear:both; content:""; display:table; }
      .wrapper-dropdown-1 { display:inline-block;font-family:"Benton Sans",Helvetica,Arial,sans-serif;z-index:900;background:#ddd;color:#333;cursor:pointer;font-weight:bold;outline:none;padding:8px;position:relative;width:200px;border:1px solid #aaa;box-shadow:0 2px 1px rgba(0, 0, 0, 0.10);font-size:14px; width:100%; }
      .wrapper-dropdown-1:after { border-color:transparent #333; border-style:solid; border-width:6px 0 6px 6px; content:""; height:0; margin-top:-6px; position:absolute; right:16px; top:50%; width:0; }
      .wrapper-dropdown-1 .dropdown { font-weight:normal;left:0;list-style:none;opacity:0;pointer-events:none;position:absolute;right:0;top:100%;border:1px solid #aaa;background:#fff;box-shadow:0 4px 5px rgba(0, 0, 0, 0.15);margin-top:0px !important;  }
      .wrapper-dropdown-1 .dropdown li a { color:#9e9e9e; display:block; padding:10px 20px; text-decoration:none; }
      .wrapper-dropdown-1 .dropdown li:hover a { background:#ddd; }
      .wrapper-dropdown-1 .dropdown { font-weight:normal;left:0;list-style:none;opacity:0;pointer-events:none;position:absolute;right:0;top:100%;border:1px solid #aaa;background:#fff;box-shadow:0 4px 5px rgba(0, 0, 0, 0.15);margin-top:0px !important; }
      .wrapper-dropdown-1 .dropdown li:hover a { background:#EFEFEF; }
      .wrapper-dropdown-1.active .dropdown { opacity:1; pointer-events:auto; }
      .wrapper-dropdown-1.active:after { border-color:#333 transparent; border-width:6px 6px 0 6px; margin-top:-3px; }
      .wrapper-dropdown-1.active { background:#ddd; background:linear-gradient(to right, #ddd 0%,#ddd 78%,#ffffff 78%,#ffffff 100%); background:-moz-linear-gradient(left, #9bc7de 0%, #9bc7de 78%, #ffffff 78%, #ffffff 100%); background:-ms-linear-gradient(left, #ddd 0%,#ddd 78%,#ffffff 78%,#ffffff 100%); background:-o-linear-gradient(left, #ddd 0%,#ddd 78%,#ffffff 78%,#ffffff 100%); background:-webkit-gradient(linear, left top, right top, color-stop(0%,#ddd), color-stop(78%,#ddd), color-stop(78%,#ffffff), color-stop(100%,#ffffff)); background:-webkit-linear-gradient(left, #ddd 0%,#ddd 78%,#ffffff 78%,#ffffff 100%); filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#9bc7de', endColorstr='#ffffff',GradientType=1 ); }
      ul.dropdown.months { box-sizing:border-box;margin:0;moz-box-sizing:border-box;padding:0;webkit-box-sizing:border-box;margin-top:-1px;border-radius:0 0 4px 4px;background-clip:padding-box; }
      .no-opacity .wrapper-dropdown-1 .dropdown,
      .no-pointerevents .wrapper-dropdown-1 .dropdown { display:none; opacity:1; pointer-events:auto; }
      .no-opacity .wrapper-dropdown-1.active .dropdown,
      .no-pointerevents .wrapper-dropdown-1.active .dropdown { display:block; }
      header[role="banner"] { width:100%;height:40px;z-index:1000;background:#f0f0f0; }
      .wrapper-dropdown { width:100% !important; }
      .wrapper-dropdown-1 { display:inline-block;font-family:"Benton Sans",Helvetica,Arial,sans-serif;z-index:900;background:#ddd;color:#333;cursor:pointer;font-weight:bold;outline:none;padding:8px;position:relative; border:1px solid #aaa;box-shadow:0 2px 1px rgba(0, 0, 0, 0.10);font-size:14px; width:100%; margin-right:auto; margin-left:auto; }
      .wrapper-dropdown-1 .dropdown { font-weight:normal;left:0;list-style:none;opacity:0;pointer-events:none;position:absolute;right:0;top:100%;border:1px solid #aaa;background:#fff;box-shadow:0 4px 5px rgba(0, 0, 0, 0.15);margin-top:0px !important; }
      ul.dropdown.months { box-sizing:border-box;margin:0;moz-box-sizing:border-box;padding:0;webkit-box-sizing:border-box;margin-top:-1px;border-radius:0 0 4px 4px;background-clip:padding-box; }
      .wrapper-dropdown-1 .dropdown { font-weight:normal;left:0;list-style:none;opacity:0;pointer-events:none;position:absolute;right:0;top:100%;border:1px solid #aaa;background:#fff;box-shadow:0 4px 5px rgba(0, 0, 0, 0.15);margin-top:0px !important; }
      .wrapper-dropdown-1 .dropdown li:hover a { background:#EFEFEF; }
      header[role="banner"] { width:100%;height:40px;z-index:1000;background:#f0f0f0; }

/*VIDEO*/
      .video { position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden; }
      .video iframe, .video object, .video embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

/*SEARCH*/
      #filter { font-family:"Helvetica"; font-size:.9em;}
      #filter input { width: 100% !important; padding: 0 10px 0 10px; font-family:"Helvetica"; border-radius:0 !important; margin:0; width:100%; height:30px; line-height:120%; font-size: 1em; -webkit-appearance: none;
        -webkit-border-radius:0; border-radius:0; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); color: rgba(0,0,0,0.75);  -webkit-transition: all 0.30s ease-in-out; -moz-transition: all 0.30s ease-in-out; -ms-transition: all 0.30s ease-in-out; -o-transition: all 0.30s ease-in-out; background-color: #fff !important; font-family: inherit; border: 1px solid #eee !important; 
        background-size: 14px 14px;
        background-repeat: no-repeat; 
        background-position: 98% 50%; }
      #filter input:focus { width: 100% !important; font-family:"Helvetica"; box-shadow: 0 0 5px #999; border-radius:0 !important; padding: 1px 10px 1px 10px; border: 1px solid #61bd1a; }
      #results { text-align:center; padding:15px; height:30px; }

/*LIGHTBOXES*/
     .featherlight .featherlight-inner { width:100%; height:600px; }
     .featherlight-iframe .featherlight-content { width:80%; }
      
/*RESOURCES*/
      #resourcesBlock { display:none; }
      .linkage { padding:5px; }
      .databankLink { font-weight:900; margin-right:auto; margin-left:auto; padding:20px; text-align:center; }
      .source { font-size:1em !important; }
      
/*FOOTER*/
      .scrollToTop { color:#87C944 !important; text-align:center; padding:15px; }
      .scrollToTop:hover { color:#333 !important; cursor:pointer; }
      #footerBottom { text-align:center; width:100%; border-top:1px solid #ddd; padding:15px; clear:both; float:none; }
      #footerStuff { display:none; }
      #intro { text-align:center; }
      #photo img { width:200px; }
     .footerLinks { display:inline-block; width:100%; text-align:center; vertical-align:top; }
     #footer { text-align:center; padding-top:5px; border-top:1px solid #ddd; padding:15px; }
     .footerLinks { display:inline-block; width:100%; text-align:center; vertical-align:top; font-size:.9em; }
     .linkDiv { display:inline-block !important; margin:5px; }
     .scrollToTop { color:#aaa !important; text-align:center; padding:15px; }
     .scrollToTop:hover { color:#333 !important; cursor:pointer; }
      #intro { text-align:center; }
      #photo img { width:200px; }
      #about { margin-top:15px; border-top:1px solid #ddd;}
      #profile { float:left; margin:10px; }
      #sharethis { clear:both !important; text-align:center; }

/*BREAKPOINTS*/
    @media only screen and (min-width:650px) {
      .sort-link-mid:hover, .sort-link:hover, .link:hover { background-color:#eee !important; cursor:pointer; }

    }

    @media only screen and (max-width:650px) { 
      .starlogo { float:none; margin:15px !important; width:150px !important; text-align:center !important; } 
      #top { text-align:center; padding:0; }
      .toptext, .topbreaker { text-align:left; display:none; }
      .byline { font-weight:bold; float:none; } 
      .date { float:none; font-family: "Benton Sans",Helvetica,Arial,sans-serif; font-size: .7em; color:#333; margin-top:2px; margin-bottom:2px; }
      .articleName { font-size:18px !important; }
    }

    @media (max-width: 940px) {
      .l-container { text-align:left !important; width:100% !important; margin:0; }
      .footer-navigation-mod { display:block !important; margin-top:30px; }
      #logo_container { text-align:center; display:block !important; float:none !important; }
      #articleHeader {margin-top:40px;}
      .nav-shortcuts-inner { display:none !important; }
      .nav-utility-btn:before { width:30px; height:30px; }
      .nav-utility-mod { height:50px; }
      .nav-utility-inner-right { float: right !important;  width:auto !important}
      .nav-utility-inner-center { float:right !important; text-align: right; width:auto !important; margin-top:10px !important; }
      .nav-utility-mod { width:100% !important; min-width:auto !important; max-width:auto!important; float:left !important; border-bottom: 1px solid #000; }
      .nav-branding-mod {/* margin-top:0 !important;*/ display:none !important; }
      .nav-utility-inner { width:auto; }
      .nav-utility-inner .btn-subscribe { display:none !important; }
      .btn-eedition { display:none !important; }
      .js-nav-subscriptions-dropdown { display:none !important; }
      .dpp, .navigation-shortnav-ad { display:none !important; }
      .show-divider { border-left:0 !important; }
      .nav-logo-link { height: 38px !important; width: 260px !important; }
      .nav-utility-btn.show-divider:after { display:none; }
      #wrapper { padding:0; }
      /*.nav-utility-btn { text-indent:-5000px; }
      .nav-utility-btn::before { text-indent:2px; }*/
      .nav-weather-mod, .nav-section-mod { margin-top:40px !important; }
      .logInBtn { display:none !important; }
      /*.navbar-fixed-top { display:block !important; }*/
      .global-nav-mod { display:none !important; } 
      #specialContentWrapper { width:100% !important; }
      .l-section-container { width:100% !important; }
      .l-section-inner { padding-right: 0; width:100%; } 

      #dataSidebar{ display:none !important;}
      #viewSwitch { display:block !important; }
      #leftPane, #articlePane, #infobox { width:100% !important; }
      #searchMe_m, #sorting_mobile { display:block !important; }
      .sectionBox { margin:0; }
      #footerStuff { display:block; }
      #footerStuff .link:hover { background-color:#fff !important; cursor:pointer; }
    }

     @media (max-width:800px) {
     .topbutton { width:24%; }
     #socialmenu div { width:24%; display:inline-block; text-align:center; }
     #socialmenu img { width:33%; }
     #wrapper { width:100%; }
     .pubBanner img { width:100%; }
     .linkDiv { width:48%; margin:5px; }
     .icon { width:19%; display:inline-block; }
     #sidebar { width:100%; text-align:center; float:none; }
     #content { width:100%; text-align:center; float:none; }
     #resumebox { height:750px !important; }
     }

     @media (max-width:450px) {
     #profile { width:100%; margin:0; }
     .linkDiv { width:100%; display:block !important; margin:5px; }
     .icon { width:18% !important; display:inline-block; }
     .icon img { width:40px !important; }
     h1 { letter-spacing: 10px !important; }
     }
   </style>

<body>
<div id="wrapper">
<div id="intro" class="section">
<div class='masthead'><a href="./">striblab</a></div>
<p class='tagline'>converging storytelling, data, code, and design</p>
</div>

<div id="topmenu">
<a href="http://freyhargarten.com"><button class="topbutton">Resume</button></a>
<a href="http://striblab.github.io/startribune_dataviz"><button class="topbutton this">Articles</button></a>
<a href="http://standardcandles.org"><button class="topbutton">Blog</button></a>
<a href="http://deadskies.org"><button class="topbutton">Artwork</button></a>
</div>
<div id="socialmenu">
<div><a href="https://www.linkedin.com/in/jeffhargarten" target="new_"><img src="http://freyhargarten.com/_base/img/icons/linkedin.png" /></a><a href="https://github.com/jhargarten" target="new_"><img src="http://freyhargarten.com/_base/img/icons/github.png" /></a><a href="mailto:jeff.hargarten@startribune.com" target="new_"><img src="http://freyhargarten.com/_base/img/icons/mail.png" /></a></div>
<div><a href="http://www.startribune.com/jeff-hargarten/274254381/" target="new_"><img src="http://freyhargarten.com/_base/img/icons/striblab.png" /></a><a href="http://startribune.com/local/datadrop" target="new_"><img src="http://freyhargarten.com/_base/img/icons/datadrop.png" /></a><a href="http://twitter.com" target="new_"><img src="http://freyhargarten.com/_base/img/icons/twitter.png" /></a></div>
<div><a href="https://medium.com/@jeffhargarten" target="new_"><img src="http://freyhargarten.com/_base/img/icons/medium.png" /></a><a href="https://www.facebook.com/jeffhargarten" target="new_"><img src="http://freyhargarten.com/_base/img/icons/facebook.png" /></a><a href="https://www.instagram.com/jeffhargarten/" target="new_"><img src="http://freyhargarten.com/_base/img/icons/instagram.png" /></a></div>
<div><a href="http://jhshadowflare.deviantart.com/" target="new_"><img src="http://freyhargarten.com/_base/img/icons/deviantart.png" /></a><a href="http://jeffhargarten.tumblr.com/" target="new_"><img src="http://freyhargarten.com/_base/img/icons/tumblr.png" /></a><a href="https://soundcloud.com/jeffhargarten" target="new_"><img src="http://freyhargarten.com/_base/img/icons/soundcloud.png" /></a></div>
</div>

<p></p>

<div id="filter"><input type="search" id="filter_box" placeholder="search by keyword"></input></div>

<div id="results"></div>

<div id="sidebar">

<div class="icon sort-link selected articles" id="allProjects_m"><img data="startribune" src="img/striblab.png" /></div>
<div class="icon sort-link datadrop" id="datadrop"><img data="startribune" src="img/datadrop.png" /></div>
<div class="icon sort-link resources" id="resources"><img data="github" src="img/github.png" /></div>

</div>

<div id="content">

<div id="sorting" class="sectionBox">
  <section class="main">
        <div class="wrapper-demo">
          <div id="dd" class="wrapper-dropdown-1" tabindex="1">
            <span>All Projects</span>
              <ul class="dropdown months" tabindex="1">
              <li class="sort-link" id="allProjects_m"><strong>All Projects <span class='dash'>-</span> </strong><div class="count"><strong>0</strong></div></li>
              <li class="sort-link" id="economics">Business and Economics <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="crime">Criminal Justice <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="demographics">Demographics <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="education">Education <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="environment">Environment <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="health">Health <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="politics">Politics <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="scitech">Science and Technology <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="transit">Transport/Infrastructure <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="other">Other <span class='dash'>-</span> <div class="count">0</div></li>
              <li class="sort-link" id="tools">Tools <span class='dash'>-</span> <div class="count">0</div></li>
              </ul>
          </div>
        â€‹</div>
</section>
</div>

<div id="articlePane" class="sectionBox">


</div>

<div id="resourcesBlock" class="resources">
<a href="http://journalismtools.io/tools/" target="new_"><img src="./img/jtools.png" width="100%" /></a>

<h3 id="foi">Freedom of Information</h3>
<div id="foia">

</div>

<h3 id="timelines">Timelines and Time Series</h3>
<div id="timeline">

</div>

<h3 id="carto">Cartography</h3>
<div id="maps">

</div>

<h3 id="geo">Geocoding</h3>
<div id="geocoding">

</div>

<h3 id="datapub">Blogs and Publications</h3>
<div id="publications">

</div>

<h3 id="sourcing">Data Sources</h3>
<div id="source">

</div>

<h3 id="deep">Deep Web Searches</h3>
<div id="deepweb">

</div>

<h3 id="nvd3">Visualization Generators</h3>
<div id="vizgen">

</div>

<h3 id="vizlib">Visualization Scripting Libraries</h3>
<div id="library">

</div>

<h3 id="infographic">Infographics</h3>
<div id="infographics">

</div>


<h3 id="textstuff">Text Manipulation</h3>
<div id="text">

</div>

<h3 id="fusiontools">Data Fusion Tools</h3>
<div id="fusion">

</div>

<h3 id="datascraping">Data Scraping</h3>
<div id="scraping">

</div>

<h3 id="dataconversion">Data Conversion and Validation</h3>
<div id="conversion">

</div>

<h3 id="db">Database and Data Analysis</h3>
<div id="database">

</div>

<h3 id="color">Colors</h3>
<div id="colors">

</div>

<h3 id="graphicdesign">Graphic Design</h3>
<div id="graphics">

</div>
</div>
</div>

<div class="breaker"></div>

<div class="scrollToTop">Return to Top</div>

<div class="breaker"></div>

<div id="sharethis"><div class="addthis_sharing_toolbox"></div></div>

<div class="breaker"></div>

<div id="about">
<img src="http://freyhargarten.com/_base/img/profile.jpg" width="200px" id="profile" />
<p>Dead Skies is the work of Frey Hargarten, a journalist, traveller, writer, artist, futurist, nerd and general pain in the ass. Opinions are mine and far too many.</p> 
<div id="pgpkey"><a href="http://freyhargarten.com/pgp/frey.hargarten.A33572D4.pgp.asc" key="E502 A15E A8D1 8CAA 478A F1CE 13AC DE60 A335 72D4">E502 A15E A8D1 8CAA 478A F1CE 13AC DE60 A335 72D4</a></div>

<div class="breaker"></div>

<div id="linkFarm" class="footerLinks">
<div class="linkDiv">
<h4><img src="http://freyhargarten.com/_base/img/deadskies.png" width="50" /></h4>  
<h4><strong><a href="http://deadskies.org">Dead Skies</a></strong></h4>
<div class="linkage"><a href="http://jhshadowflare.deviantart.com/">DeviantArt</a> | <a href="http://jeffhargarten.tumblr.com/">Tumblr</a> | <a href="https://soundcloud.com/jeffhargarten">Soundcloud</a></div>
</div>
<div class="linkDiv">  
<h4><img src="http://freyhargarten.com/_base/img/dm_logo.png" width="50" /></h4>  
<h4><strong><a href="http://freyhargarten.com">Datamancy</a></strong></h4>
<div class="linkage"><a href="https://www.linkedin.com/in/jeffhargarten">LinkedIn</a> | <a href="https://github.com/jhargarten">Github</a></div>
</div>
<div class="linkDiv">
<h4><img src="http://freyhargarten.com/_base/img/striblab.png" width="50" /></h4>  
<h4><strong><a href="http://striblab.github.io/startribune_dataviz">StribLab</a></strong></h4>
<a href="http://www.startribune.com/jeff-hargarten/274254381/">StarTribune</a> | <a href="http://startribune.com/local/datadrop">Data Drop</a>
</div>
<div class="linkDiv">
<h4><img src="http://freyhargarten.com/_base/img/standardcandles.jpg" width="50" /></h4>  
<h4><strong><a href="http://portalmancy.org">Portalmancy</a></strong></h4>
<div class="linkage"><!-- <a href="https://medium.com/@jeffhargarten">Medium</a> |  --><a href="https://twitter.com/jeffhargarten">Twitter</a> | <a href="https://www.facebook.com/jeffhargarten">Facebook</a> | <a href="https://www.instagram.com/jeffhargarten/">Instagram</a></div>
</div>
</div>

<div class="breaker"></div>

<div id="footer"><span><a href="https://creativecommons.org/" target="new_"><img src="http://freyhargarten.com/_base/img/cc.large.png" width="15px" /></a></span> Star Tribune, Frey Hargarten 2016</div>
</body>
<!--close wrapper-->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-530d7525029946bb"></script>

<script>

// $(window).on('resize', function(event){
//     var windowWidth = $(window).width();
// if(windowWidth < 933){
//     $(".nav-utility-btn").text("");
// }
// });

// $(document).ready(function() {
//     var windowWidth = $(window).width();
// if(windowWidth < 933){
//     $(".nav-utility-btn").text("");
// }
// });
</script>

<script>
//menu magic

</script>

<script>
//live json magic

//https://script.google.com/a/macros/umn.edu/s/AKfycbzOAHrfmtGJMR9crHeF9zdAhqU9saB9YzKf1Xxivfs/exec?id=1MrdiPvoMBzgfSGyF_DpDQPvs2ZFFJpD5_YYttKqtKQ0&sheet=Sheet1
//https://script.google.com/macros/s/AKfycbw_cqdXZADky_zHS3pi9aBL2S3-514vlxJkcnv5TJ1z9sxCqPY/exec?id=1MrdiPvoMBzgfSGyF_DpDQPvs2ZFFJpD5_YYttKqtKQ0&sheet=published_master

// $jsonData = file_get_contents("https://script.googleusercontent.com/macros/echo?user_content_key=BOfjI4TSNmVu370MsVSQB_Uyyblk_gZzoGt5pocAksdR5w4v_f2ujy3Itp6RrgmHu-1uDbWlU06h6dNs9MBqWM2rkCMrzZGwOJmA1Yb3SEsKFZqtv3DaNYcMrmhZHmUMWojr9NvTBuBLhyHCd5hHa3HMflvAE5oEneTLZU5s79KARkcyFDMjX0ewt5-cuI2hRHouKSPCrKRcgufhrII6-M3MleihyRS6Yxs7ziheq_kx8s3fq8FhcV7V45FBz4fadfh_z-4qMMEa0mO-EXf9WyjPuXlbvplVwqJbeTowOR_fVIgxkfofiQ&lib=Mpc9sEUZubx48Zop7g8xYBjbZ7jG6IkQL");


d3.json("http://googlescript.startribune.com/?macro=AKfycbw_cqdXZADky_zHS3pi9aBL2S3-514vlxJkcnv5TJ1z9sxCqPY&id=1MrdiPvoMBzgfSGyF_DpDQPvs2ZFFJpD5_YYttKqtKQ0&sheet=published_master", function(error, json) {
d3.json("http://googlescript.startribune.com/?macro=AKfycbw_cqdXZADky_zHS3pi9aBL2S3-514vlxJkcnv5TJ1z9sxCqPY&id=1MrdiPvoMBzgfSGyF_DpDQPvs2ZFFJpD5_YYttKqtKQ0&sheet=resources", function(error, json2) {

// $(".nav-section-link").text("StribLab");
// $(document).prop('title', 'Data-driven storytelling, maps, charts and more | Startribune.com');

$('.scrollToTop').click(function(){
    $('html, body').animate({scrollTop : 0},800);
    return false;
  });

var data = json;
var dataResources = json2.resources;

d3.select("#articlePane").selectAll("div").data(data.published_master).enter().append("div").attr("class",function (d){ return "articleEntry " + d.articleType }).html(function (d){

if (d.git != '') { var git = "<div class='git'><a href='" + d.git + "' target='new_'>View on Github</a></div>"; }
else { var git = ""; }

var dateString = (new Date(d.dateUpdated).getMonth() + 1) + "/" + (new Date(d.dateUpdated).getDate()) + "/" + new Date(d.dateUpdated).getFullYear()

  return "<div class='articleName tease-headline'><div style='display:none;' id='tags'>" + d.articleType + " </div><a href='" + d.articleURL + "' target='new_' >"+ d.articleName + "</a></div><div class='byline'>" + d.byline + "</div><div class='date'>" + dateString + "</div><div class='articlePhoto'><a href='" + d.articleURL + "' target='new_' ><img src='" + d.thumbnail + "' /></a></div>" + git;

});

function spitResources(type){
  d3.select("#" + type).selectAll("div").data(dataResources.filter(function(d){ return d.type == type; })).enter().append("div").attr("class",function (d){ return "linkage " + d.type }).html(function (d){
  return '<a href="' + d.url + '" target="new_">' + d.name + '</a><div class="describe">' + d.description + '</div>';

});
}

spitResources("foia");
spitResources("timeline");
spitResources("maps");
spitResources("geocoding");
spitResources("publications");
spitResources("source");
spitResources("deepweb");
spitResources("vizgen");
spitResources("library");
spitResources("infographics");
spitResources("text");
spitResources("fusion");
spitResources("scraping");
spitResources("conversion");
spitResources("database");
spitResources("colors");
spitResources("graphics");

var killPaging = false;

$('#allProjects, #allProjects_m').css("background-color","#ddd");
  $( ".sort-link" ).each(function( index ) {
  var type = "." + $(this).attr("id");
  $(this).find(".count").html($(type).length);
});

  $("#allProjects, #allProjects_m").find(".count").html($(".articleEntry").length);
$( ".sort-link" ).click(function() {
  killPaging = true;
  $('#filter_box').val("");
  $('#filter_box').val("");
  $(".articleEntry").hide();
  $(".sort-link").css("background-color","#fff");
  $(this).css("background-color","#ddd");
  console.log($(this).attr("data"));
  $("." + $(this).attr("id")).show();
  $("#resourcesBlock").hide();
  if ($(this).attr("id") != "tools") { $(".tools").hide(); }
  if ($(this).attr("id") == "resources") { $(".articleEntry, #contributorsBlock").hide(); $("#resourcesBlock").show(); }
  if ($(this).attr("id") == "contributors") { $("#resourcesBlock, .articleEntry").hide(); $(" #contributorsBlock").show(); }
});

$( "#allProjects, #allProjects_m" ).click(function() {
  $(".articleEntry").show();
  $(".tools").hide();
  $("#resourcesBlock").hide();
  $(".sort-link").css("background-color","#fff");
  $(this).css("background-color","#ddd");
});

$( document ).ready(function() {
   

$('#filter_box').keyup(function(){
    $('.articleEntry, .linkage').hide();
    $(".sort-link").css("background-color","#fff");
    var txt = $('#search-criteria_m').val();
    if (txt == '') { $('#allProjects').addClass("linkSelect"); $("#resourcesBlock, #contributorsBlock").hide(); }
    $('.articleName, .byline, .linkage').each(function(){
       if($(this).text().toUpperCase().indexOf(txt.toUpperCase()) != -1){
           $(this).parent().show();
           $(this).show();
       }
    });
});

});

$(".articleEntry").hide();

var start = 0;
var end = 2;

$('.articleEntry:not(.tools)').eq(start).show();
$('.articleEntry:not(.tools)').eq(start+1).show();
$('.articleEntry:not(.tools)').eq(end).show();

$(window).scroll(function() {
  if (killPaging == false){
   // if($(window).scrollTop() + $(window).height() == $(document).height()) {
       start = end + 1;
       end = end + 3;
       $('.articleEntry:not(.tools)').eq(start).show();
       $('.articleEntry:not(.tools)').eq(start+1).show();
       $('.articleEntry:not(.tools)').eq(end).show();
   // }
 }
});

$.urlParam = function(name){
  var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
  if (results != null) { return results[1]; }
  else { return 0; }
}

if ($.urlParam('cat') != 0 ) {
  var catTerm = $.urlParam('cat'); 
  $(".articleEntry").hide();
  $(".sort-link").removeClass("linkSelect");
  $("#dataSidebar #" + catTerm).addClass("linkSelect");
  $("." + catTerm).show();
  killPaging = true;
}


if ($.urlParam('page') != 0 ) {
  var pageTerm = $.urlParam('page'); 
  $(".sort-link").removeClass("linkSelect");
  killPaging = true;
  if (pageTerm == "resources") { 
    $(".articleEntry").hide(); 
    $("#resourcesBlock").show(); 
    $("#dataSidebar #resources").addClass("linkSelect");
  }
  if (pageTerm == "contributors") { 
    $(".articleEntry").hide(); 
    $("#contributorsBlock").show(); 
    $("#dataSidebar #contributors").addClass("linkSelect");
  }
}

});
});

$(document).ready(function () {

  $(".socialBox").hide();
  $("#overall").show();

    $(".menu-btn a").click(function () {
        $(".overlay").fadeToggle(200);
        $(this).toggleClass('btn-open').toggleClass('btn-close');
    });

    $('.overlay').on('click', function () {
        $(".overlay").fadeToggle(200);
        $(".menu-btn a").toggleClass('btn-open').toggleClass('btn-close');
    });

    $('.menu a').on('click', function () {
        $(".overlay").fadeToggle(200);
        $(".menu-btn a").toggleClass('btn-open').toggleClass('btn-close');
    });

    $(".icon img").click(function () {
        $(".socialBox").hide();
        $(".icon").removeClass('selected');
        // window.history.pushState(null, null, '/?page=' + $(this).attr("data"));
        $(this).parent().addClass('selected');
        $("#" + $(this).attr("data")).fadeToggle(200);
    });

});
</script>
<script type="text/javascript">
      
      function DropDown(el) {
        this.dd = el;
        this.placeholder = this.dd.children('span');
        this.opts = this.dd.find('ul.dropdown > li');
        this.val = '';
        this.index = -1;
        this.initEvents();
      }
      DropDown.prototype = {
        initEvents : function() {
          var obj = this;

          obj.dd.on('click', function(event){
            $(this).toggleClass('active');
            return false;
          });

          obj.opts.on('click',function(){
            var opt = $(this);
            obj.val = opt.text();
            obj.index = opt.index();
            obj.placeholder.text(obj.val);
          });
        },
        getValue : function() {
          return this.val;
        },
        getIndex : function() {
          return this.index;
        }
      }

      $(function() {

        var dd = new DropDown( $('#dd') );
        var dd2 = new DropDown( $('#dd2') );

        $(document).click(function() {
          // all dropdowns
          $('.wrapper-dropdown-1').removeClass('active');
        });

      });

</script>
</html>