!function e(a,r,n){function t(s,c){if(!r[s]){if(!a[s]){var d="function"==typeof require&&require;if(!c&&d)return d(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var o=r[s]={exports:{}};a[s][0].call(o.exports,function(e){var r=a[s][1][e];return t(r||e)},o,o.exports,e,a,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)t(n[s]);return t}({1:[function(e,a,r){$.urlParam=function(e){var a=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null!=a?a[1]||0:null};var n=$.urlParam("chart");null!=n&&($(".slide").hide(),$("#"+n).show()),d3.json("./data/diff.json",function(e,a){d3.json("./shapefiles/counties.json",function(e,r){function n(e,a,r){if("change"==a){for(var n="",t=0,i=0;i<r.length;i++)String(e.properties.COUNTYNAME).toUpperCase()==r[i].county&&(t=r[i].cabin_share_diff,r[i].cabin_share_diff>=.1?n="gray5":r[i].cabin_share_diff>=.05?n="gray4":r[i].cabin_share_diff>=.02?n="gray3":r[i].cabin_share_diff>=.01?n="gray2":r[i].cabin_share_diff>0?n="gray1":0==r[i].cabin_share_diff?n="none":r[i].cabin_share_diff<=-.05?n="red5":r[i].cabin_share_diff<=-.02?n="red3":r[i].cabin_share_diff<0&&(n="red1"));return"<div class='districtName'>"+e.properties.COUNTYNAME+" County</div><div class='"+n+"'>"+d3.format("+%")(t)+" change</div>"}if("portion"==a){for(var n="",t=0,i=0;i<r.length;i++)String(e.properties.COUNTYNAME).toUpperCase()==r[i].county&&(t=r[i].cabin_share_2016,r[i].cabin_share_2016>=.5?n="gray5":r[i].cabin_share_2016>=.3?n="gray4":r[i].cabin_share_2016>=.2?n="gray3":r[i].cabin_share_2016>=.1?n="gray2":r[i].cabin_share_2016>0&&(n="gray1"));return"<div class='districtName'>"+e.properties.COUNTYNAME+" County</div>Cabins are <span class='"+n+"'>"+d3.format("%")(t)+"</span> of residential property taxes"}if("count"==a){for(var n="",s=0,t=0,i=0;i<r.length;i++)String(e.properties.COUNTYNAME).toUpperCase()==r[i].county&&(s=r[i].cabins_2015,t=r[i].cabins_diff,r[i].cabins_diff>=.6?n="gray5":r[i].cabins_diff>=.4?n="gray4":r[i].cabins_diff>=.2?n="gray3":r[i].cabins_diff>=.01?n="gray2":r[i].cabins_diff>0?n="gray1":0==r[i].cabins_diff?n="none":r[i].cabins_diff<=-.4?n="red5":r[i].cabins_diff<=-.2?n="red3":r[i].cabins_diff<=-.01?n="red2":r[i].cabins_diff<0&&(n="red1"));return"<div class='districtName'>"+e.properties.COUNTYNAME+" County</div><div>"+d3.format(",")(s)+" cabins in 2015</div><div><span class='"+n+"'>"+d3.format("+%")(t)+"</span> change since 2004</div>"}}function t(e,a,r,t,i,s,c,d){function o(e){if(e&&f!==e){var a=_.centroid(e);a[0],a[1],1,f=e}else l/2,u/2,1,f=null;b.selectAll("path").classed("faded",!1).classed("active",f&&function(e){return e===f})}var f,l=320,u=400;if("us"==s)var h=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==s)var h=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==s)var h=d3.geo.mercator().scale([16800]).center([-92.384033,45.209134]);var _=d3.geo.path().projection(h),p=d3.select(e+" svg").attr("width",l).attr("height",u);p.append("rect").attr("class","background").attr("width",l).attr("height",u);var b=p.append("g");d3.json("shapefiles/"+t,function(e,a){b.append("g").attr("class","states").selectAll("path").data(a.features).enter().append("path").attr("d",_).attr("class",function(e){if("change"==i){for(var a=0;a<c.length;a++)if(String(e.properties.COUNTYNAME).toUpperCase()==c[a].county){if(c[a].cabin_share_diff>=.1)return"gray5";if(c[a].cabin_share_diff>=.05)return"gray4";if(c[a].cabin_share_diff>=.02)return"gray3";if(c[a].cabin_share_diff>=.01)return"gray2";if(c[a].cabin_share_diff>0)return"gray1";if(0==c[a].cabin_share_diff)return"none";if(c[a].cabin_share_diff<=-.05)return"red5";if(c[a].cabin_share_diff<=-.02)return"red3";if(c[a].cabin_share_diff<0)return"red1"}}else if("portion"==i){for(var a=0;a<c.length;a++)if(String(e.properties.COUNTYNAME).toUpperCase()==c[a].county){if(c[a].cabin_share_2016>=.5)return"gray5";if(c[a].cabin_share_2016>=.3)return"gray4";if(c[a].cabin_share_2016>=.2)return"gray3";if(c[a].cabin_share_2016>=.1)return"gray2";if(c[a].cabin_share_2016>0)return"gray1";if(0==c[a].cabin_share_2016)return"none"}}else if("count"==i)for(var a=0;a<c.length;a++)if(String(e.properties.COUNTYNAME).toUpperCase()==c[a].county){if(c[a].cabins_2015>=1e4)return"gray5";if(c[a].cabins_2015>=7500)return"gray4";if(c[a].cabins_2015>=5e3)return"gray3";if(c[a].cabins_2015>=2500)return"gray2";if(c[a].cabins_2015>0)return"gray1";if(0==c[a].cabins_2015)return"none"}}).style("stroke-width","1px").style("stroke","#fff").call(d3.helper.tooltip(function(e,a){return n(e,i,c)})),b.append("path").attr("id","state-borders").attr("d",_)});d3.behavior.zoom().on("zoom",function(){b.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),b.selectAll("circle").attr("d",_.projection(h)),b.selectAll("path").attr("d",_.projection(h))});$(".zoom, .switch, #close, .mapSwitch").click(function(){o(),$("#filter input").val(""),$(".district").removeClass("selected"),$("#infobox").hide(),d3.selectAll(".map rect").classed("faded",!1),d3.selectAll(".map rect").classed("active",!1),$(".rightSide").show()}),$(".mapSwitch").click(function(){$("#filter input").val("")})}function i(e,a,r,n,t){d3.select(e).selectAll(".card").sort(function(e,a){if("county"==n){if("descend"==t)return d3.descending(e.county,a.county);if("ascend"==t)return d3.ascending(e.county,a.county)}if("cabin_share_2016"==n){if("descend"==t)return d3.descending(e.cabin_share_2016,a.cabin_share_2016);if("ascend"==t)return d3.ascending(e.cabin_share_2016,a.cabin_share_2016)}if("cabin_share_diff"==n){if("descend"==t)return d3.descending(e.cabin_share_diff,a.cabin_share_diff);if("ascend"==t)return d3.ascending(e.cabin_share_diff,a.cabin_share_diff)}if("cabins"==n){if("descend"==t)return d3.descending(e.cabins_2015,a.cabins_2015);if("ascend"==t)return d3.ascending(e.cabins_2015,a.cabins_2015)}}).transition().duration(500)}var s=a.diff;d3.helper={},d3.helper.tooltip=function(e){return function(a){var r,n=d3.select("body").node();a.on("mouseover",function(a,t){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var i=d3.mouse(n);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px").style("position","absolute").style("z-index",1001);e(a,t)}).on("mousemove",function(a,t){var i=d3.mouse(n);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px");var s=e(a,t)||"";r.html(s)}).on("mouseout",function(e,a){r.remove()})}},t("#map","#infobox","#chart","counties.json","change","mn",s,0),t("#map2","#infobox","#chart","counties.json","portion","mn",s,0),t("#mapCount","#infobox","#chart","counties.json","count","mn",s,0),$(".scrollToTop").click(function(){return $("#countyList").animate({scrollTop:0},800),!1}),function(){d3.select("#countyList").selectAll(".card").data(s.sort(function(e,a){return d3.descending(e.cabin_share_2016,a.cabin_share_2016)})).enter().append("div").attr("class",function(e){return"card"}).html(function(e){var a=d3.scale.linear().domain([0,.25,.5]).range(["#dddddd","#969696","#252525"]),r=a(e.cabin_share_2016),n=d3.scale.linear().domain([-.05,0,.1]).range(["#9C0004","#dddddd","#252525"]),t=n(e.cabin_share_diff),i=d3.scale.linear().domain([0,1e4]).range(["#dddddd","#252525"]),s=i(e.cabins_2015);return"<div class='tableCell county'>"+e.county+"</div><div class='tableCell county pct' style='background-color:"+r+";'>"+d3.format("%")(e.cabin_share_2016)+"</div><div class='tableCell cabin_share_diff pct' style='background-color:"+t+";'>"+d3.format("%")(e.cabin_share_diff)+"</div><div class='tableCell cabins_2015 pct' style='background-color:"+s+";'>"+d3.format(",")(e.cabins_2015)+"</div>"}),$(document).ready(function(){$("#filter_box").on("keyup search",function(e){$(".card").hide();var a=$("#filter_box").val();$(".card").each(function(){-1!=$(this).text().toUpperCase().indexOf(a.toUpperCase())&&$(this).show()});var r=$(".card:visible").length;$("#results").html(r)}),$(".switch").click(function(){$(".switch").removeClass("selected"),$(this).addClass("selected"),$(".card").hide(),$("."+$(this).attr("data")).show()})}),$(".hSort").click(function(){if($(".hSort").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("toggled")){$(this).removeClass("toggled");var e="ascend"}else if($(this).hasClass("selected")){$(this).addClass("toggled");var e="descend"}i("#countyList",null,s,$(this).attr("data"),e)})}(),function(){var e={top:20,right:60,bottom:20,left:60};c3.generate({bindto:"#chartCabins",padding:e,data:{x:"x",columns:[["x",2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],["Cabins",106788,109300,112044,114661,116371,113387,114405,115531,117395,119124,122427,124471]],type:"line"},legend:{show:!1},point:{show:!1},color:{pattern:["#333"]},axis:{y:{min:0,padding:{bottom:0,top:0},tick:{count:4,format:d3.format(",.0f")}},x:{padding:{right:0,left:0},tick:{count:5,multiline:!1,format:d3.format(".0f")}}}})}()})})},{}]},{},[1]);