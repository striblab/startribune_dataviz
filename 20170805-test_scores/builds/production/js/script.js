!function t(e,r,o){function a(i,s){if(!r[i]){if(!e[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(c)return c(i,!0);throw new Error("Cannot find module '"+i+"'")}var n=r[i]={exports:{}};e[i][0].call(n.exports,function(t){var r=e[i][1][t];return a(r||t)},n,n.exports,t,e,r,o)}return r[i].exports}for(var c="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(t,e,r){function o(t){this.dd=t,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.dropdown > li"),this.val="",this.index=-1,this.initEvents()}d3.csv("./data/scores.csv",function(t){return{id:t.SchoolID,district:t.districtname_new,school:t.SCHOOLNAME_NEW,type:t.grds,metro:t.Metro7county,region:t.Location,location:t.SchoolLocationCountyName,county:t.SchoolLocationCountyName,year:String(t.datayr),subject:t.subject,profpct:+t.PctProf,freelunch:+t.FreeLunch,povertypct:+t.PctPoverty,povertycat:t.PovertyCategory,minoritypct:+t.pctminority,overallcat:t.Overall,predicted:+t.Predicted,residual:+t.residual,category:t.CategoryName,enrollment:t.K12Enr}},function(t,e){function r(t,e){var r=0,o=0,a=0,c=0;if(1==e)for(var i=0;i<d.length;i++)"M"==d[i].subject&&"16 to 17"==d[i].year&&(r++,"Medium"==d[i].povertycat&&a++,"High"==d[i].povertycat&&o++,"Low"==d[i].povertycat&&c++);else for(var i=0;i<d.length;i++)d[i].district==t&&"M"==d[i].subject&&"16 to 17"==d[i].year&&(r++,"Medium"==d[i].povertycat&&a++,"High"==d[i].povertycat&&o++,"Low"==d[i].povertycat&&c++);$("#failP").html(d3.format("%")(o/r)),$("#metP").html(d3.format("%")(a/r)),$("#betterP").html(d3.format("%")(c/r))}function o(t,e){var r=0,o=0,a=0,c=0;if(1==e)for(var i=0;i<d.length;i++)"M"==d[i].subject&&"16 to 17"==d[i].year&&(r++,"About as expected"==d[i].category&&a++,"Falling short"==d[i].category&&o++,"Better than expected"==d[i].category&&c++);else for(var i=0;i<d.length;i++)d[i].district==t&&"M"==d[i].subject&&"16 to 17"==d[i].year&&(r++,"About as expected"==d[i].category&&a++,"Falling short"==d[i].category&&o++,"Better than expected"==d[i].category&&c++);$("#failM").html(d3.format("%")(o/r)),$("#metM").html(d3.format("%")(a/r)),$("#betterM").html(d3.format("%")(c/r))}function a(t,e){var r=0,o=0,a=0,c=0;if(1==e)for(var i=0;i<d.length;i++)"R"==d[i].subject&&"16 to 17"==d[i].year&&(r++,"About as expected"==d[i].category&&a++,"Falling short"==d[i].category&&o++,"Better than expected"==d[i].category&&c++);else for(var i=0;i<d.length;i++)d[i].district==t&&"R"==d[i].subject&&"16 to 17"==d[i].year&&(r++,"About as expected"==d[i].category&&a++,"Falling short"==d[i].category&&o++,"Better than expected"==d[i].category&&c++);$("#failR").html(d3.format("%")(o/r)),$("#metR").html(d3.format("%")(a/r)),$("#betterR").html(d3.format("%")(c/r))}function c(t,e){var r=[];r[0]="x";var o=1,a=[],c=[];a[0]="Reading",c[0]="Math",dataRP=0,dataMP=0;for(var i=!1,s=0;s<d.length;s++)t==d[s].school&&e==d[s].district&&(i=!0,"R"==d[s].subject&&(a[o]=d[s].profpct,r[o]=d[s].year,o++,dataRP=d[s].predicted));o=1;for(var s=0;s<d.length;s++)t==d[s].school&&e==d[s].district&&(i=!0,"M"==d[s].subject&&(c[o]=d[s].profpct,o++,dataMP=d[s].predicted));if(a.length>c.length?c[c.length]=0:a.length<c.length&&(a[a.length]=0),1==i){var l={top:20,right:60,bottom:20,left:70};c3.generate({bindto:"#chart",padding:l,data:{x:"x",columns:[r,a,c],type:"line"},legend:{show:!1},point:{size:4},color:{pattern:["#51373E","#E3B5A4"]},axis:{y:{max:1,min:0,padding:{bottom:0,top:0},tick:{count:5,format:d3.format("%"),values:[0,.25,.5,.75,1]}},x:{type:"category",tick:{rotate:-75,multiline:!1},height:30}},grid:{y:{lines:[]}}});d3.select("#chart svg").append("text").attr("x",200).attr("y",20).attr("class","mobilekill").style("text-anchor","right").text("Proficiency change over time")}}var i,s,l,n,h,d=e,y="",p="All Districts";d3.select("#schoolsList").selectAll(".switch").data(d.filter(function(t){return"16 to 17"==t.year&&"R"==t.subject})).enter().append("div").attr("class",function(t){return"switch"}).attr("categoryr",function(t){return"About as expected"==t.category?"expected":"Better than expected"==t.category?"better":"Falling short"==t.category&&"worse",t.category}).attr("categoryo",function(t){var e;return"About as expected"==t.categoryO?e="expected":"Better than expected"==t.categoryO?e="better":"Falling short"==t.categoryO&&(e="worse"),e}).attr("categoryp",function(t){var e;return"High"==t.povertycat?e="High":"Medium"==t.povertycat?e="Medium":"Low"==t.povertycat&&(e="Low"),e}).attr("categorym",function(t){for(var e,r=0;r<d.length;r++)d[r].school==t.school&&d[r].district==t.district&&"M"==d[r].subject&&"16 to 17"==d[r].year&&(e=d[r].category);return e}).attr("district",function(t){return t.district}).attr("id",function(t){return"s"+t.id}).attr("latitude",function(t){return t.latitude}).attr("longitude",function(t){return t.longitude}).on("click",function(t){$("#poverty,#freelunch").removeClass("gray5"),$("#poverty,#freelunch").removeClass("gray4"),$("#poverty,#freelunch").removeClass("gray3"),$("#poverty,#freelunch").removeClass("gray2"),$("#poverty,#freelunch").removeClass("gray1"),$("#categoryR,#categoryM").removeClass("better"),$("#categoryR,#categoryM").removeClass("worse"),$("#categoryR,#categoryM").removeClass("expected"),$("#categoryR,#categoryM").removeClass("nan"),c(t.school,t.district);for(var e=0;e<d.length;e++)d[e].school==t.school&&d[e].district==t.district&&"M"==d[e].subject&&"16 to 17"==d[e].year&&($("#categoryM").html(d[e].category),$("#categoryR").html(t.category),$("#mPCT").html(d3.format("%")(d[e].profpct)+" proficiency"),$("#rPCT").html(d3.format("%")(t.profpct)+" proficiency"),$("#mPCTP").html(d3.format("%")(d[e].predicted)+" predicted"),$("#rPCTP").html(d3.format("%")(t.predicted)+" predicted"),"About as expected"==d[e].category&&(h="expected"),"Falling short"==d[e].category&&(h="worse"),"Better than expected"==d[e].category&&(h="better"),"Not enough students tested"==d[e].category&&(h="nan"));var r=t.freelunch/t.enrollment;r>=.7?l="gray5":r>=.5?l="gray4":r>=.4?l="gray3":r>=.2?l="gray2":r>=0&&(l="gray1"),t.minoritypct>=.7?s="gray5":t.minoritypct>=.5?s="gray4":t.minoritypct>=.4?s="gray3":t.minoritypct>=.2?s="gray2":t.minoritypct>=0&&(s="gray1"),t.povertypct>=.7?i="gray5":t.povertypct>=.5?i="gray4":t.povertypct>=.4?i="gray3":t.povertypct>=.2?i="gray2":t.povertypct>=0&&(i="gray1"),"About as expected"==t.category&&(n="expected"),"Falling short"==t.category&&(n="worse"),"Better than expected"==t.category&&(n="better"),"Not enough students tested"==t.category&&(n="nan"),$("#schoolname").html(t.school),$("#district").html(t.district),$("#enrolled").html(d3.format(",")(t.enrollment)),$("#type").html(t.type),$("#location").html(" ("+t.location+")"),$("#category").html(t.category),$("#freelunch").html(d3.format("%")(r)),$("#poverty").html(d3.format("%")(t.povertypct)),$("#minority").html(d3.format("%")(t.minoritypct)),$("#freelunch").addClass(l),$("#poverty").addClass(i),$("#categoryR").addClass(n),$("#categoryM").addClass(h)}).html(function(t){return y!=t.district&&(y=t.district,$("#listedSchools").append("<li class='district'>"+y+"</li>")),t.school}),$("#districtSelect").click(function(){$("#listedSchools, #filter2").slideToggle(),$(".directions").toggle()}),$("li.district").click(function(){$("li.district").removeClass("selected"),$(".cell").removeClass("selected2"),$(this).addClass("selected"),$("#listedSchools, #filter2").slideToggle(),$(".directions").toggle(),$("#thisDistrict").html($(this).text()),$(".switch").hide(),$(".switch[district='"+$(this).text()+"']").show(),r($(this).text(),!1),o($(this).text(),!1),a($(this).text(),!1),p=$(this).text()}),$(".cell").click(function(){$(".cell").removeClass("selected2"),$(this).addClass("selected2"),$(".switch").hide(),"All Districts"==p?"R"==$(this).attr("type")?$(".switch[categoryr='"+$(this).attr("data")+"']").show():"M"==$(this).attr("type")?$(".switch[categorym='"+$(this).attr("data")+"']").show():"O"==$(this).attr("type")?$(".switch[categoryo='"+$(this).attr("data")+"']").show():"P"==$(this).attr("type")&&$(".switch[categoryp='"+$(this).attr("data")+"']").show():"R"==$(this).attr("type")?$(".switch[categoryr='"+$(this).attr("data")+"'][district='"+p+"']").show():"M"==$(this).attr("type")?$(".switch[categorym='"+$(this).attr("data")+"'][district='"+p+"']").show():"O"==$(this).attr("type")?$(".switch[categoryo='"+$(this).attr("data")+"'][district='"+p+"']").show():"P"==$(this).attr("type")&&$(".switch[categoryp='"+$(this).attr("data")+"'][district='"+p+"']").show()}),$("#filter_box").on("keyup search",function(t){$(".switch").hide();var e=$("#filter_box").val();$(".switch").each(function(){-1!=$(this).text().toUpperCase().indexOf(e.toUpperCase())&&$(this).show()})}),$("#filter2 input").on("keyup search",function(t){$(".district").hide();var e=$("#filter2 input").val();$(".district").each(function(){-1!=$(this).text().toUpperCase().indexOf(e.toUpperCase())&&$(this).show()})}),$(".switch").click(function(){$(".switch").removeClass("selected"),$(this).addClass("selected"),$("#instructions").hide(),$("#infobox,#chart,#chartLabel").show()}),$("#infobox,#chart,#chartLabel").hide(),$("#instructions").show(),$("#schoolname").html(d[4].school),$("#district").html(d[4].district),$("#enrolled").html(d[4].enrollment),$("#freelunch").html(d3.format("%")(d[4].freelunch/d[4].enrollment)),$("#type").html(d[4].type),$("#location").html(" ("+d[4].location+")"),$("#categoryR").html(d[4].category),$("#categoryM").html(d[5].category),$("#poverty").html(d3.format("%")(d[4].povertypct)),$("#povertycat").html(d[4].povertycat),$("#minority").html(d3.format("%")(d[4].minoritypct)),$("#poverty").addClass("gray3"),$("#freelunch").addClass("gray3"),$("#categoryR,#categoryM").addClass("better"),$("#mPCT").html(d3.format("%")(d[4].profpct)+" proficiency"),$("#rPCT").html(d3.format("%")(d[5].profpct)+" proficiency"),$("#mPCTP").html(d3.format("%")(d[4].predicted)+" predicted"),$("#rPCTP").html(d3.format("%")(d[5].predicted)+" predicted"),r("",!0),o("",!0),a("",!0),$(".zoom").on("click keyup search",function(){return p="All Districts",$("#infobox,#chart,#chartLabel").hide(),$("#instructions").show(),$(".switch, li.district").removeClass("selected"),$(".switch").show(),$("li.district").show(),$("#listedSchools").hide(),$("#thisDistrict").html("All Districts"),$("#schoolsList").animate({scrollTop:0},800),$("#listedSchools").animate({scrollTop:0},800),$("#filter input, #filter2 input").val(""),$("#enrolled").html(d[4].enrollment),$("#poverty,#freelunch").removeClass("gray5"),$("#poverty,#freelunch").removeClass("gray4"),$("#poverty,#freelunch").removeClass("gray3"),$("#poverty,#freelunch").removeClass("gray2"),$("#poverty,#freelunch").removeClass("gray1"),$("#categoryR,#categoryM").removeClass("better"),$("#categoryR,#categoryM").removeClass("worse"),$("#categoryR,#categoryM").removeClass("expected"),$("#categoryR,#categoryM").removeClass("nan"),$("#mPCT").html("75% math proficiency"),$("#rPCT").html("65% reading proficiency"),$("#mPCTP").html("57% predicted"),$("#rPCTP").html("54% predicted"),$("#categoryR").html(d[4].category),$("#categoryM").html(d[5].category),$("#schoolname").html(d[4].school),$("#district").html(d[4].district),$("#type").html(d[4].type),$("#location").html(" ("+d[0].location+")"),$("#category").html(d[4].category),$("#poverty").html(d3.format("%")(d[4].povertypct)),$("#povertycat").html(d[4].povertycat),$("#minority").html(d3.format("%")(d[4].minoritypct)),$("#freelunch").addClass("gray3"),$("#poverty").addClass("gray3"),r("",!0),o("",!0),a("",!0),$("#categoryR,#categoryM").addClass("better"),$(".cell").removeClass("selected2"),c("A.C.G.C. SECONDARY"),!1}),c("A.C.G.C. SECONDARY"),$(".switch").first().addClass("selected")}),o.prototype={initEvents:function(){var t=this;t.dd.on("click",function(t){return $(this).toggleClass("active"),!1}),t.opts.on("click",function(){var e=$(this);t.val=e.text(),t.index=e.index(),t.placeholder.text(t.val)})},getValue:function(){return this.val},getIndex:function(){return this.index}},$(function(){new o($("#dd")),new o($("#ddY"));$(document).click(function(){$(".wrapper-dropdown-1").removeClass("active")})})},{}]},{},[1]);