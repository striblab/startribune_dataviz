!function e(t,a,r){function i(n,l){if(!a[n]){if(!t[n]){var c="function"==typeof require&&require;if(!l&&c)return c(n,!0);if(o)return o(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=a[n]={exports:{}};t[n][0].call(s.exports,function(e){var a=t[n][1][e];return i(a||e)},s,s.exports,e,t,a,r)}return a[n].exports}for(var o="function"==typeof require&&require,n=0;n<r.length;n++)i(r[n]);return i}({1:[function(e,t,a){d3.json("./data/chart_breakdowns.json",function(e,t){d3.json("./data/white_breakdowns.json",function(e,a){d3.json("./data/minority_breakdowns.json",function(e,r){var i=t.chart_breakdowns,o=a.white_breakdowns,n=r.minority_breakdowns,l={top:40,right:40,bottom:30,left:40};c3.generate({bindto:"#chart_segregated",padding:l,data:{json:i,keys:{x:"school_year",value:["Minneapolis","St._Paul","Inner_Suburbs","Outer_Suburbs"]},names:{data1:"Minneapolis",data2:"St. Paul",data3:"Inner Suburbs",data4:"Outer Suburbs"}},color:{pattern:["#251202","#98775B","#1D305B","#7E8CAC"]},axis:{x:{tick:{fit:!0,values:["1993","1999","2003","2008","2015"]}},y:{tick:{format:d3.format("%"),count:6},padding:{top:2,bottom:0}}}}),c3.generate({bindto:"#chart_white",padding:l,data:{json:o,keys:{x:"school_year",value:["Minneapolis","St._Paul","Inner_Suburbs","Outer_Suburbs"]},names:{data1:"Minneapolis",data2:"St. Paul",data3:"Inner Suburbs",data4:"Outer Suburbs"}},color:{pattern:["#251202","#98775B","#1D305B","#7E8CAC"]},axis:{x:{tick:{fit:!0,values:["1993","1999","2003","2008","2015"]}},y:{tick:{format:d3.format("%"),count:6},padding:{top:1,bottom:0}}}}),c3.generate({bindto:"#chart_minority",padding:l,data:{json:n,keys:{x:"school_year",value:["Minneapolis","St._Paul","Inner_Suburbs","Outer_Suburbs"]},names:{data1:"Minneapolis",data2:"St. Paul",data3:"Inner Suburbs",data4:"Outer Suburbs"}},color:{pattern:["#251202","#98775B","#1D305B","#7E8CAC"]},axis:{x:{tick:{fit:!0,values:["1993","1999","2003","2008","2015"]}},y:{tick:{format:d3.format("%"),count:6},padding:{top:43,bottom:0}}}});$(document).ready(function(){$(".c3-legend-item-MinneapolisWhite text, .c3-legend-item-MinneapolisMinority text, .c3-legend-item-STPMinority text").text("Minneapolis"),$(".c3-legend-item-St--Paul text, .c3-legend-item-STPWhite text, .c3-legend-item-STPMinority text").text("St. Paul"),$(".c3-legend-item-InSubMinority text, .c3-legend-item-InSubWhite text, .c3-legend-item-Inner-Suburbs text").text("Inner Suburbs"),$(".c3-legend-item-OutSubWhite text, .c3-legend-item-OutSubMinority text, .c3-legend-item-Outer-Suburbs text").text("Outer Suburbs")}),$(".c3-legend-item").click(function(){$(".c3-legend-item-MinneapolisWhite text, .c3-legend-item-MinneapolisMinority text, .c3-legend-item-STPMinority text").text("Minneapolis"),$(".c3-legend-item-St--Paul text, .c3-legend-item-STPWhite text, .c3-legend-item-STPMinority text").text("St. Paul"),$(".c3-legend-item-InSubMinority text, .c3-legend-item-InSubWhite text, .c3-legend-item-Inner-Suburbs text").text("Inner Suburbs"),$(".c3-legend-item-OutSubWhite text, .c3-legend-item-OutSubMinority text, .c3-legend-item-Outer-Suburbs text").text("Outer Suburbs")}),$(".yearChatter").hide(),$("#year1993").show(),$.getJSON("shapefiles/counties.json",function(e){$.getJSON("shapefiles/data_93.json",function(t){$.getJSON("shapefiles/data_99.json",function(a){$.getJSON("shapefiles/data_03.json",function(r){$.getJSON("shapefiles/data_08.json",function(i){$.getJSON("shapefiles/data_15.json",function(o){function n(){f.value(1993),c(f.value()),h.value(f.value()),g=0,p=setTimeout(function(){f.value(1999),c(f.value()),h.value(f.value()),g++},2e3),b=setTimeout(function(){f.value(2003),c(f.value()),h.value(f.value()),g++},4e3),v=setTimeout(function(){f.value(2008),c(f.value()),h.value(f.value()),g++},6e3),S=setTimeout(function(){f.value(2015),c(f.value()),h.value(f.value()),$("#toggle").attr("class","play myButton2"),$("#toggle").html("&#9658;"),g++},8e3)}function l(){clearTimeout(p),clearTimeout(b),clearTimeout(v),clearTimeout(S),f.value(1993),h.value(1993),c(1993)}function c(e){d3.selectAll("tspan, text").style("font-weight","normal");d3.selectAll("tspan, text").each(function(t){d3.select(this).html()==""+e&&d3.select(this).style("font-weight","900")});1993==e?(m.removeLayer(x),m.removeLayer(E),m.removeLayer(k),m.removeLayer(w),m.removeLayer(D),m.addLayer(x),$(".yearChatter").hide(),$("#year1993").show()):1999==e?(m.removeLayer(x),m.removeLayer(E),m.removeLayer(k),m.removeLayer(w),m.removeLayer(D),m.addLayer(E),$(".yearChatter").hide(),$("#year1999").show()):2003==e?(m.removeLayer(x),m.removeLayer(E),m.removeLayer(k),m.removeLayer(w),m.removeLayer(D),m.addLayer(k),$(".yearChatter").hide(),$("#year2003").show()):2008==e?(m.removeLayer(x),m.removeLayer(E),m.removeLayer(k),m.removeLayer(w),m.removeLayer(D),m.addLayer(w),$(".yearChatter").hide(),$("#year2008").show()):2015==e&&(m.removeLayer(x),m.removeLayer(E),m.removeLayer(k),m.removeLayer(w),m.removeLayer(D),m.addLayer(D),$(".yearChatter").hide(),$("#year2015").show())}function s(e,t){e.eachLayer(function(e){e.feature.properties.SegFlag==t?e.setStyle({fillOpacity:.5}):e.setStyle({fillOpacity:0})})}function u(e){e.eachLayer(function(e){e.setStyle({fillOpacity:.5})})}var d=new L.LatLngBounds(new L.LatLng(39.1982,-128.1445),new L.LatLng(50.5414,-68.2031));L.mapbox.accessToken="pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiODRHdjBSWSJ9.lF4ymp-69zdGvZ5X4Tokzg";var m=L.mapbox.map("map","mapbox.light",{maxZoom:8,minZoom:8,bounds:d}).setView([44.983333,-93.266667],8);m.dragging.disable(),m.touchZoom.disable(),m.doubleClickZoom.disable(),m.scrollWheelZoom.disable(),$(".myButton2").css("background-color","#fff"),$(document).ready(function(){$("#toggle").bind("click",function(){"play myButton2"==$(this).attr("class")?($(this).attr("class","pause myButton2"),$(this).html("&#9724;"),n()):($(this).attr("class","play myButton2"),$(this).html("&#9658;"),l())})}),$("#all").css("background-color","#bbb"),$("#all").click(function(){$(".myButton2").css("background-color","#fff"),$("#seg").css("color","#D6935D"),$("#diverse").css("color","#299129"),$(this).css("background-color","#bbb"),m.setView([44.983333,-93.266667],8),u(x),u(E),u(k),u(w),u(D)});var y=[1993,1999,2003,2008,2015],g=0;$(".previous").click(function(){if(g>0){g--;var e=g;e>=0&&(f.value(y[e]),c(f.value()),h.value(f.value()))}}),$(".next").click(function(){if(g<4){g++;var e=g;e<5&&(f.value(y[e]),c(f.value()),h.value(f.value()))}}),$("#seg").click(function(){$(".myButton2").css("background-color","#fff"),$(this).css("background-color","#D6935D"),$("#diverse").css("color","#299129"),$(this).css("color","#000"),s(x,"SEGREGATED"),s(E,"SEGREGATED"),s(k,"SEGREGATED"),s(w,"SEGREGATED"),s(D,"SEGREGATED")}),$("#diverse").click(function(){$(".myButton2").css("background-color","#fff"),$("#seg").css("color","#D6935D"),$(this).css("background-color","#299129"),$(this).css("color","#000"),s(x,"DIVERSE"),s(E,"DIVERSE"),s(k,"DIVERSE"),s(w,"DIVERSE"),s(D,"DIVERSE")});var f=d3.slider().axis(!0);d3.select("#slider").call(f.min(1993).max(2015).value(1993).axis(d3.svg.axis().tickValues([1993,1999,2003,2008,2015]).tickFormat(d3.format("")).orient("top").ticks(5)).step(1).on("slide",function(e,t){h.value(t),c(t)}));var h=d3.slider().axis(!0);d3.select("#slider2").call(h.min(1993).max(2015).value(1993).axis(d3.svg.axis().tickValues([1993,1999,2003,2008,2015]).tickFormat(d3.format("")).orient("bottom").ticks(5)).step(1).on("slide",function(e,t){f.value(t),c(t)}));var p,b,v,S,x=(new L.Popup({autoPan:!1}),L.geoJson(e,{style:{color:"#333",weight:1,fillOpacity:0}}).addTo(m),L.geoJson(t,{pointToLayer:function(e,t){switch(e.properties.SegFlag){case"SEGREGATED":return L.circleMarker(t,{radius:3,color:"#D6935D",weight:1,fillOpacity:.5});case"DIVERSE":return L.circleMarker(t,{radius:3,color:"#299129",weight:1,fillOpacity:.5})}}}).addTo(m)),E=L.geoJson(a,{pointToLayer:function(e,t){switch(e.properties.SegFlag){case"SEGREGATED":return L.circleMarker(t,{radius:3,color:"#D6935D",weight:1,fillOpacity:.5});case"DIVERSE":return L.circleMarker(t,{radius:3,color:"#299129",weight:1,fillOpacity:.5})}}}),k=L.geoJson(r,{pointToLayer:function(e,t){switch(e.properties.SegFlag){case"SEGREGATED":return L.circleMarker(t,{radius:3,color:"#D6935D",weight:1,fillOpacity:.5});case"DIVERSE":return L.circleMarker(t,{radius:3,color:"#299129",weight:1,fillOpacity:.5})}}}),w=L.geoJson(i,{pointToLayer:function(e,t){switch(e.properties.SegFlag){case"SEGREGATED":return L.circleMarker(t,{radius:3,color:"#D6935D",weight:1,fillOpacity:.5});case"DIVERSE":return L.circleMarker(t,{radius:3,color:"#299129",weight:1,fillOpacity:.5})}}}),D=L.geoJson(o,{pointToLayer:function(e,t){switch(e.properties.SegFlag){case"SEGREGATED":return L.circleMarker(t,{radius:3,color:"#D6935D",weight:1,fillOpacity:.5});case"DIVERSE":return L.circleMarker(t,{radius:3,color:"#299129",weight:1,fillOpacity:.5})}}})})})})})})})})})})},{}]},{},[1]);