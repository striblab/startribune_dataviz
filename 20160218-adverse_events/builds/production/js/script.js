!function e(t,n,i){function r(d,s){if(!n[d]){if(!t[d]){var c="function"==typeof require&&require;if(!s&&c)return c(d,!0);if(a)return a(d,!0);throw new Error("Cannot find module '"+d+"'")}var o=n[d]={exports:{}};t[d][0].call(o.exports,function(e){var n=t[d][1][e];return r(n||e)},o,o.exports,e,t,n,i)}return n[d].exports}for(var a="function"==typeof require&&require,d=0;d<i.length;d++)r(i[d]);return r}({1:[function(e,t,n){d3.json("./data/events.json",function(e,t){d3.json("./data/summary.json",function(e,n){function i(e,t,n,i,r){d3.select(e).selectAll(".card").sort(function(e,t){if("year"==i){if("descend"==r)return d3.descending(e.year,t.year);if("ascend"==r)return d3.ascending(e.year,t.year)}if("hospital"==i){if("descend"==r)return d3.descending(e.hospital,t.hospital);if("ascend"==r)return d3.ascending(e.hospital,t.hospital)}if("city"==i){if("descend"==r)return d3.descending(e.city,t.city);if("ascend"==r)return d3.ascending(e.city,t.city)}if("event"==i){if("descend"==r)return d3.ascending(e.category,t.category);if("ascend"==r)return d3.descending(e.category,t.category)}if("incidents"==i){if("descend"==r)return d3.ascending(e.number,t.number);if("ascend"==r)return d3.descending(e.number,t.number)}if("deaths"==i){if("descend"==r)return d3.ascending(e.death,t.death);if("ascend"==r)return d3.descending(e.death,t.death)}if("injuries"==i){if("descend"==r)return d3.ascending(e.injury,t.injury);if("ascend"==r)return d3.descending(e.injury,t.injury)}if("type"==i){if("descend"==r)return d3.ascending(e.cattype,t.cattype);if("ascend"==r)return d3.descending(e.cattype,t.cattype)}}).transition().duration(500)}var r=t.events,a=n.sum,d={top:20,right:60,bottom:20,left:270},d=(c3.generate({bindto:"#chart",size:{height:600},padding:d,data:{json:a,keys:{x:"hospital",value:["count"]},names:{count:"Number of Adverse Events"},types:{count:"bar"},labels:{format:{count:d3.format(",.0f")}}},bar:{width:{ratio:.5}},tooltip:{show:!1},legend:{show:!1},axis:{rotated:!0,y:{max:40,min:0,padding:{top:0,bottom:0},tick:{values:["0","20","40"],format:d3.format("r")}},x:{type:"category",tick:{multiline:!1}}},subchart:{show:!1},color:{pattern:["#3580A3"]}}),{top:20,right:60,bottom:20,left:40});c3.generate({bindto:"#chartTrend",padding:d,data:{x:"x",columns:[["x","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017"],["count",312,301,305,316,314,258,308,292,336,341]],type:"bar",labels:{format:{count:d3.format(".0f")}}},legend:{show:!1},tooltip:{show:!1},color:{pattern:["#3580A3"]},axis:{y:{max:400,min:0,padding:{bottom:0,top:0},tick:{count:7,values:[0,50,100,150,200,250,300,350,400],format:d3.format(".0f")}},x:{type:"category",tick:{multiline:!1}}}});!function(){d3.select("#events").selectAll(".card").data(r.sort(function(e,t){return t.year-e.year})).enter().append("div").attr("class",function(e){return"card"}).attr("id",function(e){return"s"+e.id}).on("click",function(e){}).html(function(e){return"<div class='cell num year'>"+e.year+"</div><div class='cell hospital'>"+e.hospital+"</div><div class='cell kill city'>"+e.city+"</div><div class='cell kill category'>"+e.category+"</div><div class='cell num'>"+e.number+"</div><div class='cell kill num'>"+e.death+"</div><div class='cell kill num'>"+e.injury+"</div><div class='cell kill type'>"+e.cattype+"</div>"})}(),$(document).ready(function(){$("#filter_box").on("keyup search",function(e){$(".card").hide();var t=$("#filter_box").val();$(".card").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()});var n=$(".card:visible").length;$("#results").html(d3.format(",")(n))}),$(".scrollToTop").click(function(){return $("#events").animate({scrollTop:0},800),!1}),$(".th").click(function(){if($(".th").removeClass("sortSelect"),$(this).addClass("sortSelect"),$(this).hasClass("toggled")){$(this).removeClass("toggled");var e="ascend"}else if($(this).hasClass("sortSelect")){$(this).addClass("toggled");var e="descend"}i("#events",null,r,$(this).attr("data"),e)})})})})},{}]},{},[1]);